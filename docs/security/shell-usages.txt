resources/ts/lib/api.ts:19:    return apiFetch(`/API/Search?${params.toString()}`);
scripts/redirect-guard.sh:41:  echo '```'
scripts/redirect-guard.sh:43:  echo '```'
scripts/redirect-guard.sh:46:  echo '```'
scripts/redirect-guard.sh:48:  echo '```'
scripts/redirect-guard.sh:53:  echo '```'
scripts/redirect-guard.sh:55:  echo '```'
scripts/redirect-guard.sh:58:  echo '```'
scripts/redirect-guard.sh:60:  echo '```'
scripts/redirect-guard.sh:63:  echo '```'
scripts/redirect-guard.sh:65:  echo '```'
scripts/redirect-guard.sh:68:  echo '```'
scripts/redirect-guard.sh:70:  echo '```'
app/Helpers/vite_helper.php:16:     * @param string      $entry  Entry name from vite.config.ts `rollupOptions.input` (e.g., 'app', 'dashboard')
app/Helpers/vite_helper.php:40:            return "<!-- vite manifest not found: run `npm run build` -->";
app/Libraries/MyMISEC.php:133:        $response = curl_exec($ch);
app/Libraries/MyMIFacebook.php:168:        $response = curl_exec($ch);
app/Libraries/Resilience/HttpClient.php:54:        $resp = curl_exec($ch);
app/Commands/TestsChecklist.php:20:                $out .= "- [ ] **".strtoupper($m)."** `/".$uri."` ‚Üí `".$handler."`\n";
app/Language/en/Auth.php:12:    'unsetPasswordLength' => 'You must set the `minimumPasswordLength` setting in the Auth config file.',
app/Common.php:10: * This can be looked at as a `master helper` file that is
app/codex-structure.md:27:2. Data stored in `bf_marketing_scraper`.
app/codex-structure.md:28:3. Admin manually reviews ‚Üí sets `approved = 1`
app/codex-structure.md:29:4. If `ai_review = 1`, content goes to OpenAI, then to Zapier
app/codex-structure.md:30:5. If `ai_review = 0`, it goes directly to Zapier
app/codex-structure.md:31:6. On success: `posted = 1`, `status_log` is updated
app/Modules/ScriptStudio/Libraries/ScriptEngine.php:103:            if (preg_match('/^```/', ltrim($trimmed))) {
app/Modules/ScriptStudio/Libraries/ScriptEngine.php:170:        $escaped = preg_replace('/`(.+?)`/', '<code>$1</code>', $escaped);
app/Modules/ScriptStudio/Database/Seeds/ScriptSeeder.php:20:```pine
app/Modules/ScriptStudio/Database/Seeds/ScriptSeeder.php:30:```
app/Libraries/test.txt:2288:        // üîó Inject buttons that use `posts` field to generate platform messages
app/Libraries/test.txt:2289:        // (Handled in the view using `dynamicModalLoader()`)
app/Libraries/test.txt:2933:        exec($command, $output, $status);
app/Libraries/test.txt:2972:        // Store generated content in `bf_marketing_scraper` as automated logs
app/Libraries/test.txt:3203:        // Store generated fallback content in `bf_marketing_scraper` for future reference
app/Libraries/test.txt:5098:        curl_exec($ch);
app/Libraries/test.txt:5314:        $response = curl_exec($ch);
app/Libraries/test.txt:6849:        $response = curl_exec($ch);
app/Libraries/test.txt:7450:        $response = curl_exec($ch);
app/Libraries/test.txt:9351:    fetch(`/index.php/API/Marketing/getTopKeywordChart/<?= esc($summary['id']) ?>`)
app/Libraries/test.txt:9385:    fetch(`/index.php/API/Marketing/generateThreadFromSummary/<?= esc($summary['id']) ?>`)
app/Libraries/test.txt:9392:                    container.innerHTML += `<p><strong>Part ${i + 1}:</strong> ${tweet}</p>`;
app/Libraries/test.txt:9499:    fetch(`/index.php/API/Marketing/PreviewGeneratedPost/${summaryId}`)
app/Libraries/test.txt:9520:        fetch(`/index.php/API/Marketing/getTopKeywordChart/${summaryId}`)
app/Libraries/test.txt:9748:                content.innerHTML = `<div class="alert alert-danger">‚ùå Failed to load preview. Please try again.</div>`;
app/Libraries/test.txt:9752:            content.innerHTML = `<div class="alert alert-danger">‚ùå Error loading preview. Please try again.</div>`;
app/Libraries/test.txt:9787:            summariesBlock.innerHTML = `<div class="alert alert-warning">‚ö†Ô∏è ${data.message}</div>`;
app/Libraries/test.txt:9812:        summariesBlock.innerHTML = `<div class="alert alert-danger">üö® Failed to refresh summaries.</div>`;
app/Libraries/test.txt:9842:        hashtagsBlock.innerHTML = `<strong>#Tags:</strong> ` +
app/Libraries/test.txt:9845:                    return `<span class="badge bg-light me-1 text-dark">#${tag.trim()}</span>`;
app/Libraries/test.txt:9854:        ctaBlock.innerHTML = `<strong>üì£ CTA:</strong> ${summary.cta}`;
app/Libraries/test.txt:9884:        .map(([word]) => `<span class="badge bg-info text-dark me-1">#${word}</span>`)
app/Libraries/test.txt:9887:    trendingArea.innerHTML = `<strong>üìà Trending:</strong> ${topKeywords || 'No trending keywords yet'}`;
app/Libraries/test.txt:10219:        updateStatus(`‚è≥ Approving #${id}...`);
app/Libraries/test.txt:10221:            const response = await fetch(`<?= site_url('API/Management/approveBufferItem/') ?>${id}`, {
app/Libraries/test.txt:10232:            updateStatus(`‚ùå Error: ${err.message}`, true);
app/Libraries/test.txt:10255:        updateStatus(`‚è≥ Rejecting #${id}...`);
app/Libraries/test.txt:10257:            const response = await fetch(`<?= site_url('API/Management/rejectBufferItem/') ?>${id}`, {
app/Libraries/test.txt:10268:            updateStatus(`‚ùå Error: ${err.message}`, true);
app/Libraries/test.txt:10281:            updateStatus(`‚úÖ ${data.message}`);
app/Libraries/test.txt:10282:            document.querySelector(`#bufferTableBody tr td:first-child:contains(${id})`).parentElement.remove();
app/Libraries/test.txt:10284:            updateStatus(`‚ùå ${data.message}`, true);
app/Libraries/MyMIPump.php:163:            $response = curl_exec($ch);
app/Libraries/MyMIGemini.php:83:        $response = curl_exec($curl);
app/Modules/Exchange/Views/Solana/swap.php:190:        $(`#to_token option[value="${selectedFromToken}"]`).prop('disabled', true); // Disable selected token in 'to' dropdown
app/Modules/Exchange/Views/Solana/swap.php:198:        $(`#from_token option[value="${selectedToToken}"]`).prop('disabled', true); // Disable selected token in 'from' dropdown
app/Modules/Exchange/Views/Solana/swap.php:218:        fetch(`https://www.mymiwallet.com/index.php/API/Solana/getExchangePrice/${selectedFromToken}`)
app/Modules/Exchange/Views/Solana/swap.php:227:        fetch(`https://www.mymiwallet.com/index.php/API/Solana/getTokenPrice/${selectedToToken}`)
app/Modules/Exchange/Views/Solana/swap.php:235:        fetch(`<?= base_url('index.php/API/Solana/getCoinAmount') ?>/${selectedToken}`)
app/Modules/Exchange/Views/Solana/swap.php:262:        $('#platformFee').text(`$${platformFees.toFixed(2)}`);
app/Modules/Exchange/Views/Solana/swap.php:263:        $('#networkFee').text(`$${networkFees.toFixed(8)}`);
app/Modules/Exchange/Views/Solana/swap.php:264:        $('#serviceFee').text(`$${serviceFees.toFixed(2)}`);
app/Modules/Exchange/Views/Solana/swap.php:265:        $('#subtotalCosts').text(`$${subtotal.toFixed(2)}`);
app/Modules/Exchange/Views/Solana/swap.php:304:        $('#fromCoinSymbol').text(` ${toSymbol}`);
app/Modules/Exchange/Views/Solana/swap.php:305:        $('#amountSymbol').text(` ${fromSymbol}`);
app/Modules/Exchange/Views/Solana/swap.php:306:        $('#totalCoinsSymbol').text(` ${toSymbol}`);
app/Modules/Exchange/Views/Solana/swap.php:348://         fetch(`https://www.mymiwallet.com/index.php/API/Solana/getExchangePrice/${selectedFromToken}`)
app/Modules/Exchange/Views/Solana/swap.php:361://         fetch(`https://www.mymiwallet.com/index.php/API/Solana/getTokenPrice/${selectedToken}`)
app/Modules/Exchange/Views/Solana/swap.php:377://         $(`#to_token option[value="${selectedFromToken}"]`).prop('disabled', true); // Disable selected token in 'to' dropdown
app/Modules/Exchange/Views/Solana/swap.php:385://         $(`#from_token option[value="${selectedToToken}"]`).prop('disabled', true); // Disable selected token in 'from' dropdown
app/Modules/Exchange/Views/Solana/swap.php:438://         $('#fromCoinSymbol').text(` ${toSymbol}`);
app/Modules/Exchange/Views/Solana/swap.php:439://         $('#amountSymbol').text(` ${$('#exchangeSymbol').text()}`);
app/Modules/Exchange/Views/Solana/swap.php:440://         $('#totalCoinsSymbol').text(` ${$('#tokenSymbol').text()}`);
app/Modules/Exchange/Views/Solana/swap.php:447://         fetch(`<?=base_url('index.php/API/Solana/getCoinAmount')?>/${selectedToken}`)
app/Libraries/MyMIMarketing.php:1302:        curl_exec($ch);
app/Libraries/MyMIMarketing.php:1628:        $response = curl_exec($ch);
app/Libraries/MyMIMarketing.php:4284:        $response = curl_exec($ch);
app/Libraries/MyMIMarketing.php:5157:        $response = curl_exec($ch);
app/Modules/Exchange/Views/Solana/swap-working.php:273:        fetch(`<?= base_url('API/Solana/getExchangePrice') ?>/SOL`)
app/Modules/Exchange/Views/Solana/swap-working.php:288:        fetch(`<?= base_url('API/Solana/getTokenPrice') ?>/${selectedToken}`)
app/Modules/Exchange/Views/Solana/swap-working.php:386:        $('#amountSymbol').text(` ${$('#exchangeSymbol').text()}`);
app/Modules/Exchange/Views/Solana/swap-working.php:387:        $('#totalCoinsSymbol').text(` ${$('#tokenSymbol').text()}`);
app/Libraries/MyMITwitter.php:74:        $response = curl_exec($ch);
app/Modules/Exchange/Views/Solana/index.php:418:    $('#solana-value').text(`$${formatCurrency(data.mySolanaData?.totalValue ?? 0)}`);
app/Modules/Exchange/Views/Solana/index.php:419:    $('#solana-pl').text(`$${formatCurrency(data.mySolanaData?.profitLoss24hr ?? 0)}`);
app/Modules/Exchange/Views/Solana/index.php:422:    $('#solana-price').html(`$${formatCurrency(data.marketData?.currentPrice ?? 0)} <span class="currency currency-usd">USD</span>`);
app/Modules/Exchange/Views/Solana/index.php:423:    $('#market-cap').text(`$${formatCurrency(data.marketData?.market_cap ?? 0)}`);
app/Modules/Exchange/Views/Solana/index.php:424:    $('#daily-volume').text(`$${formatCurrency(data.marketData?.dailyVolume ?? 0)}`);
app/Modules/Exchange/Views/Solana/index.php:428:      .text(`${formatCurrency(mtdPL)} MTD`)
app/Modules/Exchange/Views/Solana/index.php:432:    $('#daily-pl').text(`${formatCurrency(data.marketData?.dailyPL ?? 0)} %`);
app/Modules/Exchange/Views/Solana/index.php:433:    $('#hourly-pl').text(`${formatCurrency(data.marketData?.hourlyPL ?? 0)} %`);
app/Modules/Exchange/Views/Solana/index.php:559:    return `${window.location.origin}/${path}`;
app/Modules/Exchange/Views/Solana/index.php:641:            document.getElementById('solana-value').textContent = `$${data.solanaStats.value || '0.00'}`;
app/Modules/Exchange/Views/Solana/index.php:642:            document.getElementById('market-cap').textContent = `$${data.solanaStats.marketCap || '0.00'}`;
app/Modules/Exchange/Views/Solana/index.php:643:            document.getElementById('daily-volume').textContent = `$${data.solanaStats.dailyVolume || '0.00'}`;
app/Modules/Exchange/Views/Solana/index.php:649:            document.getElementById('solana-price').textContent = `$${(data.solanaStats.price || 0).toFixed(2)}`;
app/Modules/Exchange/Views/Solana/index.php:654:            mtdPlChange.textContent = `${mtdPL} MTD`;
app/Modules/Exchange/Views/Solana/index.php:655:            mtdPlChange.className = `change ${mtdPL >= 0 ? 'up text-success' : 'down text-danger'}`;
app/Modules/Exchange/Views/Solana/index.php:659:            document.getElementById('daily-pl').textContent = `${dailyPL} %`;
app/Modules/Exchange/Views/Solana/index.php:663:            document.getElementById('hourly-pl').textContent = `${hourlyPL} %`;
app/Modules/Exchange/Views/Solana/viewWallet.php:15:// For backward compatibility: if something downstream still expects `public_token`,
app/Modules/Exchange/Views/index.php:133:                    $response 						= curl_exec($curl);
app/Modules/Exchange/Views/index.php:268:                    //         $response 						= curl_exec($curl);
app/Libraries/MyMIAlerts.php:878:    //                 log_message('error', '‚ùå Failed to insert email into `bf_investment_scraper`.');
app/Libraries/MyMIAlerts.php:1551:        curl_exec($ch);
app/Libraries/MyMIAlerts.php:1620:        $response = curl_exec($ch);
app/Libraries/MyMIAlerts.php:1641:        $response = curl_exec($ch);
app/Libraries/MyMIMetaMask.php:83:        $result = curl_exec($ch);
app/Modules/Exchange/Views/Overview.php:80:        $response 										= curl_exec($curl);
app/Libraries/Webhooks/WebhookDispatcher.php:48:        $resp = curl_exec($ch);
app/Libraries/Security/CaptchaService.php:24:        $res = curl_exec($ch);
app/Modules/Exchange/Controllers/SolanaController.php:586:        $result = shell_exec("solana airdrop 2 $publicKey");
app/Modules/Exchange/Controllers/SolanaController.php:968:            shell_exec($command); // Use appropriate error handling
app/Modules/Exchange/Controllers/SolanaController.php:1265:    //     // If your library sometimes returns a flat array, normalize to `{ all: [...] }`
app/Libraries/MyMIInvestments.php:809:                $output = shell_exec($command);
app/Libraries/MyMIInvestments.php:982:                $output = shell_exec($command);
app/Libraries/MyMIDexScreener.php:222:        $response = curl_exec($ch);
app/Libraries/BaseLoader.php:53:     * Children can call this via alias `commonData()` if they define their own commonData().
app/Libraries/GitHelper.php:43:        $this->sendWebhook("‚úÖ `{$repoKey}` repo auto-pushed:\n**{$message}**\nTimestamp: {$timestamp}");
app/Libraries/GitHelper.php:54:        exec($cmd, $output);
app/Libraries/GitHelper.php:102:        proc_open("nohup bash $tempScript > /dev/null 2>&1 &", [], $pipes);
app/Libraries/GitHelper.php:112:            exec($cmd . " 2>&1", $output, $return);
app/Libraries/GitHelper.php:151:        curl_exec($ch);
app/Libraries/BaseLoader.php.bak.20250905-163831:54:     * Children can call this via alias `baseCommonData()` if they define their own commonData().
app/Libraries/BaseLoader.php.bak.20250905-163731:54:     * Children can call this via alias `baseCommonData()` if they define their own commonData().
app/Libraries/BaseLoader.php.bak.20250905-163713:62:     * Children can call this via alias `baseCommonData()` if they define their own commonData().
app/Services/SupportService.php:51:            $response = curl_exec($curl);
app/Services/PythonService.php:41:        $output = shell_exec($cmd);
app/Services/PythonService.php:98:        exec($cmd, $output, $returnVar);
app/Services/BudgetService.php:1476:    //                 'accountType' => $accountType, // Correctly set `accountType`
app/Services/BudgetService.php:1477:    //                 'accountSourceType' => $sourceType, // Correctly set `accountSourceType`
app/Services/MarketingService.php:185:        // Assuming `MyMIMarketing` has a method to retrieve banners based on userId.
app/Services/DashboardService.php:19:        // Assuming `dashboardInfo` method fetches the relevant dashboard data including promotional banners
app/Modules/chatgpt.txt:1:<?php namespace App\Modules\Management\Controllers;use CodeIgniter\Controller;use Config\Services;use App\Config\{APIs,Auth,SiteSettings,SocialMedia};use App\Controllers\UserController;use App\Libraries\{BaseLoader,HtmlFormatter,MyMIAnalytics,MyMIAlerts,MyMIBudget,MyMIDashboard,MyMIExchange,MyMIMarketing,MyMIUser};use App\Models\{AlertsModel,AnnouncementModel,InvestmentModel,ManagementModel,MarketingModel,MyMIGoldModel,SolanaModel,UserModel};use App\Services\{DashboardService,GoalTrackingService,MarketingService,SolanaService,UserService};use CodeIgniter\API\ResponseTrait;use GuzzleHttp\Client;use GuzzleHttp\Exception\RequestException;use voku\helper\HtmlDomParser;class MarketingController extends UserController{use ResponseTrait;use BaseLoader;protected $API;protected $auth;protected $cuID;protected $data;protected $debug;protected $helpers=['auth','form','url'];protected $logger;protected $request;protected $session;protected $uri;protected $siteSettings;protected $NewsEmail;protected $HtmlFormatter;protected $MyMIAnalytics;protected $MyMIAlerts;protected $MyMIBudget;protected $MyMIDashboard;protected $MyMIExchange;protected $MyMIMarketing;protected $MyMIUser;protected $dashboardService;protected $goalTrackingService;protected $marketingService;protected $solanaService;protected $userService;protected $alertsModel;protected $investmentModel;protected $marketingModel;protected $userModel;protected $userAccount;protected $userDashboard;protected $getBlogPosts;protected $departmentTasks;protected $marketing;protected $reporting;public function __construct(){$this->API=config('APIs');$this->auth=service('authentication');$this->logger=service('logger');$this->NewsEmail=config('NewsEmailServer');$this->request=service('request');$this->session=Services::session();$this->siteSettings=config('SiteSettings');$this->debug=$this->siteSettings->debug;$this->uri=$this->request->getUri();$this->alertsModel=new AlertsModel();$this->investmentModel=new InvestmentModel();$this->marketingModel=new MarketingModel();$this->userDashboard=$this->getMyMIDashboard()->dashboardInfo($this->cuID);$this->departmentTasks=$this->getMyMIAnalytics()->get_department_tasks($this->uri->getSegment(2),['Page SEO Edit']);$this->getBlogPosts=$this->getMyMIMarketing()->getBlogPosts();$this->cuID=$this->session->get('user_id')?? $this->auth->id();if(!$this->cuID){log_message('error','Investments ControllerFailed to retrieve valid User ID in MyMIInvestments');throw new \RuntimeException('User ID could not be retrieved.');}log_message('debug',"InvestmentsController: cuID initialized as {$this->cuID}");$this->userAccount=$this->getMyMIUser()->getUserInformation($this->cuID);$userBudget=$this->getMyMIBudget()->getUserBudget($this->cuID);log_message('info','DashboardController L72 - $checkingSummary: '.$userBudget['checkingSummary']);$this->data['checkingSummary']=$userBudget['checkingSummary'];}public function commonData(): array{$this->data=$this->data ??[];$userData=$this->getuserService()->commonData();$this->data=array_merge($this->data,$userData);$this->data['siteSettings']=$this->siteSettings;$this->data['beta']=(string)$this->siteSettings->beta;$this->data['uri']=$this->request->getUri();$this->data['date']=$this->siteSettings->date;$this->data['time']=$this->siteSettings->time;$this->data['hostTime']=$this->siteSettings->hostTime;$dashboardInfo=$this->getDashboardService()->getDashboardInfo($this->cuID);$this->data['completedGoals']=$this->getGoalTrackingService()->getCompletedGoals($this->cuID);$this->data['pendingGoals']=$this->getGoalTrackingService()->getPendingGoals($this->cuID);$this->data['promotionalBanners']=$dashboardInfo['promotionalBanners'];$userBudget=$this->getBudgetService()->getUserBudget($this->cuID);$this->data['totalAccountBalance']=$userBudget['totalAccountBalance']?? 0;$this->data['totalAccountBalanceFMT']=$userBudget['totalAccountBalanceFMT']?? '0.00';$userSolanaData=$this->getSolanaService()->getSolanaData($this->cuID);$this->data['cuSolanaDW']=$userSolanaData['userSolanaWallets']['cuSolanaDW']?? null;$this->data['solanaNetworkStatus']=$userSolanaData['solanaNetworkStatus'];$this->data['cuSolanaTotal']=$userSolanaData['userSolanaWallets']['cuSolanaTotal']?? 0;$this->data['cuSolanaValue']=$userSolanaData['userSolanaWallets']['cuSolanaValue']?? 0;$this->data=array_merge($this->data,$userData);if($this->debug===1){}}public function index(){$this->data['pageTitle']='MyMI Marketing | Management | MyMI Wallet';$this->data['reporting']=$this->getMyMIAnalytics()->reporting();$this->data['recentMarketingPosts']=$this->getMyMIMarketing()->getRecentPosts(5);if(empty($this->data['recentMarketingPosts'])){log_message('info','üì≠ No recent posts found. Running fallback generation...');$this->getMyMIMarketing()->generateFromTempScraper(5);$this->data['recentMarketingPosts']=$this->getMyMIMarketing()->getRecentPosts(25);}$this->data['todaysStory']=$this->marketingModel->getTodaysStory();$this->data['generatedSummaries']=$this->marketingModel->getLatestGeneratedSummaries(25);$this->data['marketingBuffer']=$this->marketingModel->getMarketingBuffer();if(empty($this->data['todaysStory'])){log_message('info','üìÖ No content generated today. Triggering summary fallback...');$this->getMyMIMarketing()->generateFromTempScraper(5);$this->data['todaysStory']=$this->marketingModel->where('DATE(created_at)',date('Y-m-d'))->orderBy('created_at','DESC')->findAll();}$this->commonData();return $this->renderTheme('ManagementModule\Views\Marketing\index',$this->data);}public function add($type=null){log_message('debug','MarketingController L183 - add() method called with type: '.(is_null($type)?'null':$type));if(!empty($type)){if($this->request->getMethod()==='POST'){log_message('debug','Handling POST request for type: '.$type);if($type==='Schedule'){log_message('info','Processing Schedule submission');try{$this->marketingModel->addMarketingSchedule($this->request->getPost());log_message('info','Schedule data saved successfully');if($this->request->isAJAX()){return $this->response->setJSON(['success'=>true,'message'=>'Schedule added successfully']);}else{return redirect()->to('/Management/Marketing/Schedule')->with('success','Schedule added successfully');}}catch(\Exception $e){log_message('error','Error saving schedule: '.$e->getMessage());return $this->response->setJSON(['error'=>'Failed to save schedule.']);}}elseif($type==='Campaign'){log_message('info','Processing Campaign submission');try{$campaignData=['beta'=>$this->request->getPost('beta'),'config_mode'=>$this->request->getPost('config_mode'),'form_mode'=>$this->request->getPost('form_mode'),'escalated'=>$this->request->getPost('escalated'),'user_id'=>$this->request->getPost('user_id'),'user_email'=>$this->request->getPost('user_email'),'username'=>$this->request->getPost('username'),'assigned_to'=>$this->request->getPost('assigned_to'),'date'=>$this->siteSettings->date,'time'=>$this->siteSettings->time,'campaign_name'=>$this->request->getPost('campaign_name'),'promotionalLinks'=>json_encode($this->request->getPost('promotionalLinks')),'overall_campaign_description'=>$this->request->getPost('overall_campaign_description'),'voice_script'=>$this->request->getPost('voice_script'),'facebookMessage'=>$this->request->getPost('facebookMessage'),'linkedinMessage'=>$this->request->getPost('linkedinMessage'),'discordMessage'=>$this->request->getPost('discordMessage'),'stocktwitsMessage'=>$this->request->getPost('stocktwitsMessage'),'tiktokMessage'=>$this->request->getPost('tiktokMessage'),'youtubeMessage'=>$this->request->getPost('youtubeMessage'),'emailMessage'=>$this->request->getPost('emailMessage'),'additionalInfo'=>$this->request->getPost('additionalInfo'),'hashtags'=>$this->request->getPost('hashtags'),];$this->marketingModel->addMarketingCampaign($campaignData);log_message('info','Campaign data saved successfully');if($this->request->isAJAX()){log_message('info','MarketingController L251 - This is using the $this->request->isAJAX() Form Submission');return $this->response->setJSON(['success'=>true,'message'=>'Campaign added successfully']);}else{log_message('info','MarketingController L251 - This is NOT using the $this->request->isAJAX() Form Submission');return redirect()->to('/Management/Marketing/Campaigns')->with('success','Campaign added successfully');}}catch(\Exception $e){log_message('error','Error saving campaign: '.$e->getMessage());return $this->response->setJSON(['error'=>'Failed to save campaign.']);}}else{log_message('error','Unrecognized type in POST request: '.$type);return $this->response->setJSON(['error'=>'Unrecognized type in POST request']);}}if($this->request->getMethod()==='get'){log_message('debug','Handling GET request for type: '.$type);if($type==='Schedule'){log_message('debug','Loading view for Schedule');try{$response=$this->renderTheme('ManagementModule\Views\Marketing\Schedule\Add',$this->data);log_message('debug','View for Schedule loaded successfully');return $response;}catch(\Exception $e){log_message('error','Failed to load view for Schedule: '.$e->getMessage());return $this->response->setJSON(['error'=>'Failed to load view for Schedule']);}}elseif($type==='Campaign'){log_message('debug','Loading view for Campaign');try{$response=$this->renderTheme('ManagementModule\Views\Marketing\Campaign\Add',$this->data);log_message('debug','View for Campaign loaded successfully');return $response;}catch(\Exception $e){log_message('error','Failed to load view for Campaign: '.$e->getMessage());return $this->response->setJSON(['error'=>'Failed to load view for Campaign']);}}else{log_message('error','Unrecognized type in GET request: '.$type);return $this->response->setJSON(['error'=>'Unrecognized type in GET request']);}}}else{log_message('warning','No type provided; redirecting to /Management/Marketing');return redirect()->to('/Management/Marketing')->with('error','No type provided');}}public function addSchedule(){if($this->request->getMethod()==='post'){$additionalInfo=$this->request->getPost('additional_info');$jsonData=null;if(!empty($additionalInfo)){$jsonData=json_decode($additionalInfo,true);if(json_last_error()!==JSON_ERROR_NONE){return redirect()->back()->withInput()->with('error','Invalid JSON format in Additional Information.');}}$scheduleData=['day'=>$this->request->getPost('day'),'time'=>$this->request->getPost('time'),'activity'=>$this->request->getPost('activity'),'link'=>$this->request->getPost('link'),'additional_info'=>json_encode($jsonData)];$this->marketingModel->addMarketingSchedule($scheduleData);return redirect()->to(base_url('Management/Marketing/Schedule'))->with('success','New schedule added successfully.');}$this->commonData();return $this->renderTheme('ManagementModule\Views\Marketing\Schedule\Add');}public function addSubscriber(){helper('email');$rawRequestBody=$this->request->getBody();$jsonData=json_decode($rawRequestBody,true);$marketingModel=new MarketingModel();$subscriberData=['email'=>$jsonData['email'],'category'=>$jsonData['category'],'referral'=>$jsonData['referral'],'beta'=>$this->siteSettings->beta,'date'=>date('Y-m-d H:i:s'),'hostTime'=>date('Y-m-d H:i:s'),'time'=>date('H:i:s'),'user_id'=>session('user_id'),'user_ip'=>$this->request->getIPAddress()];if($marketingModel->addSubscriber($subscriberData)){$emailService=\Config\Services::email();$emailService->setTo($subscriberData['email']);$emailService->setSubject('üéâ Welcome to Investor‚Äôs Talk | MyMI Wallet');$emailService->setMessage(view('emails/welcomeInvestor',['siteSettings'=>$this->siteSettings,'socialMedia'=>config('SocialMedia'),]));if($emailService->send()){log_message('info','Management/MarketingController L346 - $emailService: '.print_r($emailService,true));return $this->response->setJSON(['success'=>true,'message'=>'Subscriber email sent successfully']);}else{log_message('error','Management/MarketingController L346 - Error Submitting: $emailService: '.print_r($emailService,true));return $this->response->setJSON(['success'=>false,'message'=>'Failed to send Welcome Email']);}}else{return $this->response->setJSON(['success'=>false,'message'=>'Failed to add subscriber']);}}public function approveBufferItem($id){$this->marketingModel->updateBufferStatus($id,'approved');return $this->respond(['status'=>'success','message'=>'Approved']);}public function approveLogo(){$symbol=$this->request->getPost('symbol');$imageUrl=$this->request->getPost('imageUrl');try{$this->marketingModel->saveApprovedLogo($symbol,$imageUrl);return $this->response->setJSON(['success'=>true,'message'=>'Logo approved successfully.',]);}catch(\Exception $e){log_message('error','Failed to approve logo: '.$e->getMessage());return $this->response->setJSON(['success'=>false,'message'=>'Failed to approve logo.',]);}}public function approveAndDownloadLogo(){$imageUrl=$this->request->getPost('selectedImage');$symbol=$this->request->getPost('symbol');try{$imageContent=file_get_contents($imageUrl);$imagePath=WRITEPATH.'uploads/Company-Logos/'.$symbol.'.png';file_put_contents($imagePath,$imageContent);$publicPath=FCPATH.'assets/images/Company-Logos/'.$symbol.'.png';rename($imagePath,$publicPath);return redirect()->to('/Management/Marketing/upcomingEarnings')->with('success','Logo approved and saved successfully.');}catch(\Exception $e){log_message('error','Failed to download or save logo: '.$e->getMessage());return redirect()->back()->with('error','Failed to save the logo.');}}public function approveContent($id){$content=$this->marketingModel->find($id);if(!$content){return redirect()->back()->with('error','Content not found.');}$this->marketingModel->update($id,['status'=>'approved']);return redirect()->back()->with('success','Content approved successfully.');}public function blogs(){$this->data['pageTitle']='MyMI Blogs | Management | MyMI Wallet';$this->data['reporting']=$this->getMyMIAnalytics()->reporting();$this->data['blogs']=$this->marketingModel->getBlogs();$this->data['totalBlogs']=$this->marketingModel->countBlogs();$this->commonData();return $this->renderTheme('ManagementModule\Views\Marketing\Blogs',$this->data);}public function campaigns(){$this->data['pageTitle']='Marketing Campaigns | Management | MyMI Wallet';$this->data['reporting']=$this->getMyMIAnalytics()->reporting();$this->data['getActiveCampaigns']=$this->marketing['department']['getActiveCampaigns'];$this->data['getActivePriorityCampaigns']=$this->marketing['department']['getActivePriorityCampaigns'];$this->commonData();return $this->renderTheme('ManagementModule\Views\Marketing\campaigns',$this->data);}public function contentGenerator(){try{$this->data['pageTitle']='MyMI Marketing | Management | MyMI Wallet';$this->commonData();return $this->renderTheme('ManagementModule\Views\Marketing\contentGenerator',$this->data);}catch(\Throwable $th){log_message('error','MarketingController contentGenerator error: '.$th->getMessage());}}public function contentReview(){$generatedContent=$this->session->get('generatedContent');if(empty($generatedContent)){return redirect()->to('/Management/Marketing')->with('error','No generated content available for review.');}return $this->renderTheme('ManagementModule\Views\Marketing\Content_Review',['generatedContent'=>$generatedContent]);}public function cronAnalyzeContent(){log_message('debug','üß† Starting content digest analysis...');$this->getMyMIMarketing()->generateFromTempScraper(5);log_message('debug','‚úÖ Content digest completed.');}public function cronFetchAndStoreEmails(){try{log_message('debug','Starting cronFetchAndStoreEmails');$this->marketingService->scrapeAndStoreEmailsToTemp();log_message('debug','Finished cronFetchAndStoreEmails');return $this->respond(['status'=>'success']);}catch(\Throwable $e){log_message('error','cronFetchAndStoreEmails Error: '.$e->getMessage());return $this->failServerError($e->getMessage());}}public function cronFetchInbox(){log_message('debug','üì® Starting inbox scrape...');$this->getMyMIMarketing()->scrapeInboxAndStore();log_message('debug','‚úÖ Inbox scrape completed.');}public function cronFetchMarketingEmails(){log_message('info','CRON: Starting Marketing Email Fetch');$service=new MarketingService();$emailsFetched=$this->getMyMIMarketing()->fetchAndStoreEmails('newsletters');log_message('info','CRON: Fetched '.$emailsFetched.' marketing emails');return $this->respond(['status'=>'success','fetched'=>$emailsFetched]);}public function cronGenerateContentFromTemp(){try{log_message('debug','Starting cronGenerateContentFromTemp');$this->marketingService->generateFinalContentFromTemp();log_message('debug','Finished cronGenerateContentFromTemp');return $this->respond(['status'=>'success']);}catch(\Throwable $e){log_message('error','cronGenerateContentFromTemp Error: '.$e->getMessage());return $this->failServerError($e->getMessage());}}public function cronSendDailyLog(){date_default_timezone_set('America/Chicago');$contentData=$this->getLogsOrFallback();$emailView=view('emails/daily_log_summary',['contentData'=>$contentData['data'],'contentType'=>$contentData['type'],]);$subject=($contentData['type']==='logs')?'Daily Log Summary for '.date('F j, Y'):'Fallback Content - Daily Summary '.date('F j, Y');$this->email->setTo('community@mymiwallet.com')->setSubject($subject)->setMessage($emailView)->send();$this->email->setTo('team@mymiwallet.com')->setSubject('Reminder: Daily Log Email Pending Confirmation')->setMessage('The daily log email is scheduled to be sent at 3 PM CST. Please review the content to ensure everything is accurate.')->send();}public function edit($id=null){if($id===null){throw new \CodeIgniter\Exceptions\PageNotFoundException('Exchange ID not provided');}$tokenData=$this->marketingModel->getExchangeTokenById($id);if(!$tokenData){throw new \CodeIgniter\Exceptions\PageNotFoundException('Token not found');}if($this->request->getMethod()==='post'){$validation=\Config\Services::validation();$validation->setRules(['coin_name'=>'required','market_cap'=>'required|numeric','website'=>'required|valid_url','discord'=>'permit_empty|valid_url','facebook'=>'permit_empty|valid_url','telegram'=>'permit_empty|valid_url','twitter'=>'permit_empty|valid_url',]);if($validation->withRequest($this->request)->run()){$updatedData=['coin_name'=>$this->request->getPost('coin_name'),'market_cap'=>$this->request->getPost('market_cap'),'website'=>$this->request->getPost('website'),'discord'=>$this->request->getPost('discord'),'facebook'=>$this->request->getPost('facebook'),'telegram'=>$this->request->getPost('telegram'),'twitter'=>$this->request->getPost('twitter'),];if($this->marketingModel->updateExchangeToken($id,$updatedData)){$this->session->setFlashdata('success','Exchange token updated successfully');}else{$this->session->setFlashdata('error','Failed to update the exchange token');}return redirect()->to(site_url('Management/Marketing/Exchanges/Edit/'.$id));}else{$this->session->setFlashdata('validation_errors',$validation->getErrors());}}return $this->renderTheme('ManagementModule\Views\Marketing\Exchanges\edit',['token'=>$tokenData,'validation'=>$this->session->getFlashdata('validation_errors'),'redirectURL'=>site_url('Management/Marketing/Exchanges'),]);}public function editContent($id){$content=$this->marketingModel->find($id);if(!$content){return redirect()->back()->with('error','Content not found.');}return $this->renderTheme('ManagementModule\Views\Marketing\Content_Edit',['content'=>$content]);}public function fetchBufferPaginated(){$page=(int) $this->request->getGet('page')?:1;$limit=(int) $this->request->getGet('limit')?:20;$data=$this->marketingModel->fetchBufferPaginated($page,$limit);return $this->respond($data);}public function fetchLatestSummaries(){$generatedSummaries=$this->marketingModel->getLatestGeneratedSummaries(25);return $this->renderTheme('ManagementModule\Views\Marketing\resources\generatedSummaries',['generatedSummaries'=>$generatedSummaries]);}public function fetchMissingLogos(){$postData=$this->request->getJSON(true);$csrfName=csrf_token();$csrfHash=csrf_hash();if(!isset($postData[$csrfName])||$postData[$csrfName]!==$csrfHash){log_message('error','fetchMissingLogos: CSRF validation failed');return $this->response->setHeader('X-CSRF-Token-Name',$csrfName)->setHeader('X-CSRF-Token-Hash',$csrfHash)->setJSON(['error'=>'Invalid CSRF token.']);}$symbols=$postData['symbols']?? null;if(empty($symbols)||!is_array($symbols)){log_message('error','fetchMissingLogos: Invalid symbols input');return $this->response->setHeader('X-CSRF-Token-Name',$csrfName)->setHeader('X-CSRF-Token-Hash',$csrfHash)->setJSON(['error'=>'Invalid symbols input.']);}$results=[];foreach($symbols as $symbol){$results[]=['symbol'=>$symbol,'status'=>'not_found',];}return $this->response->setHeader('X-CSRF-Token-Name',$csrfName)->setHeader('X-CSRF-Token-Hash',$csrfHash)->setJSON(['results'=>$results]);}public function financialNews(){$symbols=$this->investmentModel->getAllSymbolsByEarnings();$approvedLogos=$this->marketingModel->getApprovedLogos();$existingSymbols=array_column($approvedLogos,'symbol');$missingSymbols=array_filter($symbols,function($symbol)use($existingSymbols){return!in_array($symbol['symbol'],$existingSymbols);});$this->data['approvedLogos']=$approvedLogos ??[];$this->data['missingSymbols']=$missingSymbols ??[];$this->commonData();return $this->renderTheme('ManagementModule\Views\Marketing\financialNews',$this->data);}public function generateAudio(){$text=$this->request->getPost('text');$fileName=$this->request->getPost('fileName')?:uniqid('tts_',true);$directory=WRITEPATH.'uploads/';$outputFile=$directory.$fileName.'.mp3';if(empty($text)){return $this->response->setJSON(['status'=>'error','message'=>'Text cannot be empty.',]);}if(!is_dir($directory)){mkdir($directory,0777,true);}$command=sprintf('python3 gtts_script.py %s %s',escapeshellarg($text),escapeshellarg($outputFile));exec($command,$output,$status);if($status===0&&file_exists($outputFile)){$fileUrl=base_url('uploads/'.basename($outputFile));return $this->response->setJSON(['status'=>'success','message'=>'Audio file generated successfully.','file_url'=>$fileUrl,]);}else{return $this->response->setJSON(['status'=>'error','message'=>'Failed to generate audio.',]);}}private function generateAutomatedContent(){$scraperContent=$this->marketingModel->getRecentScrapes();$tempContent=$this->marketingModel->getRecentTempScrapes();$campaigns=$this->marketingModel->getActiveCampaignsLimited(50);$allContent=array_merge($scraperContent,$tempContent,$campaigns);$generatedContent=[];foreach($allContent as $content){$generatedContent[]=$this->getMarketingService()->generateContentFromPost($content->title ?? 'Untitled',$content->content ?? '',$content->tags?explode(',',$content->tags):[]);}foreach($generatedContent as $content){$slug=$this->marketingModel->createSlug($content['title']);$this->db->table('bf_marketing_blog_posts')->insert(['title'=>$content['title']?? 'Generated Content','content'=>$content['summary']?? '','slug'=>$slug,'tags'=>implode(',',$content['keywords']??[]),'created_on'=>date('Y-m-d H:i:s'),]);$this->marketingModel->saveDailyLog(['title'=>$content['title'],'content'=>$content['summary'],'type'=>'Automated','tags'=>implode(',',$content['keywords']),'date_time'=>date('Y-m-d H:i:s'),'author_information'=>'MyMI Automated System','created_on'=>date('Y-m-d H:i:s'),]);}return $generatedContent;}public function generateContent($platform,$postId){$post=$this->marketingModel->getSchedulePostById($postId);if(!$post){return redirect()->back()->with('error','Post not found.');}$content=$this->getMyMIMarketing()->generateContentFromGPT($post['subjects'],$post['descriptions'],$platform);$contentData=['post_id'=>$postId,'platform'=>$platform,'generated_content'=>$content,];$this->marketingModel->storeGeneratedContent($contentData);return redirect()->to("\Management\Marketing\Schedule")->with('success','Content generated successfully.');}public function generateContentDigestFromStored(){log_message('info','Marketing: Starting summary generation from stored marketing emails.');$model=new MarketingModel();$records=$model->getRecentUnprocessedTempEmails(5);$results=[];foreach($records as $record){if(empty($record['content'])||strlen($record['content'])<1000){log_message('debug',"‚ö†Ô∏è Skipping record ID {$record['id']} due to insufficient content length.");continue;}if(empty($record['title'])||empty($record['content'])){log_message('debug','Skipped record due to missing title/content ID: '.$record['id']);continue;}try{$summary=$this->getMarketingService()->generateContentFromRaw($record['title'],$record['content']);$model->storeFinalMarketingContent(['source_id'=>$record['id'],'title'=>$record['title'],'summary'=>$summary,'created_at'=>date('Y-m-d H:i:s')]);$model->markTempRecordAsProcessed($record['id']);$results[]=$record['title'];}catch(\Throwable $e){log_message('error','Failed to process record ID '.$record['id'].': '.$e->getMessage());}}return $this->respond(['status'=>'complete','processed_titles'=>$results]);}public function generateContentFromTweet($tweetId){$tweet=$this->marketingModel->getTweetById($tweetId);if(!$tweet){return $this->failNotFound('Tweet not found');}$generatedContent=$this->getMyMIMarketing()->generateContentFromTweets([$tweet]);$this->marketingModel->storeGeneratedContent(['tweet_id'=>$tweetId,'content'=>json_encode($generatedContent),'created_at'=>date('Y-m-d H:i:s')]);$this->getMyMIMarketing()->postToTwitter($generatedContent['platform_content']['Twitter']);return $this->respond(['message'=>'Content generated and posted successfully']);}public function generateDailyContentDigest(){log_message('debug','üß† Start Memory Usage: '.memory_get_usage(true));@ini_set('memory_limit','768M');$limit=5;$summary=[];$rawRecords=$this->marketingModel->getLatestUnprocessedEmails($limit);foreach($rawRecords as $record){$content=$record['content']?? '';if(empty($content)||strlen($content)<500){log_message('debug',"‚è≠Ô∏è Skipped record ID {$record['id']} - insufficient content.");continue;}$contentSize=strlen($content);log_message('debug','üìå Processing record ID '.$record['id'].' with content size: '.$contentSize);log_message('debug','Management/MarketingController L770 - $record Array: '.print_r($record,true));if($contentSize===0){log_message('debug',"‚è≠Ô∏è Skipped record ID {$record['id']} - empty content.");continue;}try{gc_collect_cycles();$processed=$this->getMarketingService()->generateContentFromRaw($record);if($processed===null){log_message('debug',"‚ö†Ô∏è Skipped record ID {$record['id']} - generateContentFromRaw() returned null.");continue;}$this->marketingModel->saveFinalizedMarketingContent($processed);$summary[]=['title'=>$processed['headline'],'summary'=>$processed['summary'],'subtopics'=>$processed['subtopics'],'platform_posts'=>$processed['posts'],];}catch(\Throwable $e){log_message('error',"‚ùå generateDailyContentDigest failed on record ID {$record['id']}: {$e->getMessage()}");}}$this->marketingModel->markEmailsAsProcessed(array_column($rawRecords,'id'));log_message('debug','üèÅ Peak Memory Usage: '.memory_get_peak_usage(true));return $this->response->setJSON(['digest'=>$summary]);}public function generateNewsletterContent(){$emailContents=$this->marketingModel->getEmailContentsForNewsletter();$content=$this->getMyMIMarketing()->generateNewsletterContent($emailContents);$newsletterData=['title'=>'Monthly Financial Newsletter - '.date('F Y'),'content'=>$content,'status'=>'draft','created_at'=>date('Y-m-d H:i:s'),];$this->marketingModel->storeNewsletterDraft($newsletterData);return redirect()->to(site_url('Management/Marketing/Content/Listing'))->with('success','Newsletter content generated successfully');}private function generateSummarizedFallbackContent($contentArray){$summarizedContent=[];$summarizer=new \App\Libraries\ContentSummarizer();foreach($contentArray as $content){$summarizedContent[]=['title'=>$content->title ?? 'Untitled','summary'=>$summarizer->summarize($content->content ?? '',200),'url'=>$content->url ?? null,];}return $summarizer->combineSummaries($summarizedContent);}private function getLogsOrFallback(){$logs=$this->marketingModel->getDailyLogsByDate(date('Y-m-d'));if(!empty($logs)){return['type'=>'logs','data'=>$logs];}$scrapedContent=$this->marketingModel->getRecentScrapes();$campaigns=$this->marketingModel->getActiveCampaignsLimited(50);$combinedContent=array_merge($scrapedContent,$campaigns['result']);$fallbackContent=$this->generateSummarizedFallbackContent($combinedContent);foreach($fallbackContent as $content){$this->marketingModel->saveDailyLog(['title'=>$content['title']?? 'Automated Content','content'=>$content['summary']?? '','type'=>'Automated','tags'=>implode(',',$content['keywords']??[]),'date_time'=>date('Y-m-d H:i:s'),'author_information'=>'MyMI Automated System','created_on'=>date('Y-m-d H:i:s'),]);}return['type'=>'fallback','data'=>$fallbackContent];}public function getRecentScrapes(){try{$scrapes=$this->marketingModel->getRecentScrapes();return $this->response->setJSON(['success'=>true,'scrapes'=>$scrapes]);}catch(\Throwable $th){log_message('error','getRecentScrapes: Exception - '.$th->getMessage());return $this->response->setJSON(['success'=>false,'message'=>'Failed to fetch recent scrapes.']);}}private function handleMediaUpload($mediaFiles){$uploadedMedia=[];foreach($mediaFiles as $file){if($file->isValid()&&!$file->hasMoved()){$newFileName=$file->getRandomName();$file->move(WRITEPATH.'uploads/media/',$newFileName);$uploadedMedia[]=['file_name'=>$file->getClientName(),'file_path'=>WRITEPATH.'uploads/media/'.$newFileName,'file_size'=>$file->getSize(),'file_type'=>$file->getMimeType(),];}}return $uploadedMedia;}public function ideas(){$this->data['pageTitle']='Marketing Campaigns | Management | MyMI Wallet';$this->data['reporting']=$this->getMyMIAnalytics()->reporting();$this->data['getActiveIdeas']=$this->marketingModel->getActiveIdeas();$this->commonData();return $this->renderTheme('ManagementModule\Views\Marketing\ideas',$this->data);}public function importScheduleCSV(){if($this->request->getMethod()==='post'){$file=$this->request->getFile('csv_file');if($file->isValid()&&!$file->hasMoved()){$filePath=WRITEPATH.'uploads/'.$file->store();$csvData=array_map('str_getcsv',file($filePath));foreach($csvData as $row){$scheduleData=['day'=>$row[0],'time'=>$row[1],'activity'=>$row[2],];$scheduleId=$this->marketingModel->addMarketingSchedule($scheduleData);$campaignData=['sched_id'=>$scheduleId,'title'=>$row[3],'platform'=>$row[4],'content'=>$row[5],];$this->marketingModel->addMarketingCampaign($campaignData);}return redirect()->back()->with('success','Schedule and campaigns imported successfully.');}return redirect()->back()->with('error','Invalid CSV file.');}return $this->renderTheme('ManagementModule\Views\Marketing\importCSV');}public function previewBufferItem($id){$record=$this->marketingModel->findBufferItem($id);if(!$record)return $this->failNotFound("Item not found.");return $this->renderTheme('ManagementModule\Views\Marketing\modals\bufferPreview',['item'=>$record]);}public function previewGeneratedPost($id){try{$post=$this->marketingModel->find($id);if(!$post){return $this->failNotFound('Post not found.');}return $this->renderTheme('App\Modules\Management\Views\Marketing\modals/previewGeneratedPost',['post'=>$post]);}catch(\Throwable $e){log_message('error','‚ùå Failed to load post preview: '.$e->getMessage());return $this->failServerError('Unable to preview post.');}}public function previewPendingSummaries(){try{$pendingSummaries=$this->marketingModel->getPendingScraperSummaries(10);return $this->renderTheme('App\Modules\Management\Views\Marketing\partials\previewPendingSummaries',['pendingSummaries'=>$pendingSummaries]);}catch(\Throwable $e){log_message('error','‚ùå previewPendingSummaries failed: '.$e->getMessage());return $this->failServerError('Could not load summaries.');}}public function previewVideoScript($id){$post=$this->marketingModel->getGeneratedPostById($id);if(!$post)return $this->failNotFound('Post not found.');$posts=json_decode($post['posts'],true);$videoScript=$posts['video']?? 'No video script generated yet.';return $this->renderTheme('MarketingModule\Views\Marketing\modals\video_preview_modal',['title'=>$post['title'],'videoScript'=>$videoScript,]);}public function processScheduledPosts(){$currentTimestamp=date('Y-m-d H:i:s');$scheduledPosts=$this->marketingModel->getPendingScheduledPosts($currentTimestamp);foreach($scheduledPosts as $post){$payload=['platform'=>$post->platform,'content'=>$post->content,'media_url'=>$post->media_url,];try{$response=$this->sendToZapier($post->zapier_webhook_url,$payload);if($response->getStatusCode()===200){$this->marketingModel->updatePostStatus($post->id,'posted');}else{throw new Exception("Zapier response error: {$response->getBody()}");}}catch(Exception $e){$this->handlePostFailure($post,$e->getMessage());}}}private function sendToZapier($webhookUrl,$payload){$client=new \GuzzleHttp\Client();return $client->post($webhookUrl,['headers'=>['Content-Type'=>'application/json'],'json'=>$payload,]);}private function handlePostFailure($post,$error){$this->marketingModel->incrementRetryCount($post->id);log_message('error',"Failed to post to Zapier for Post ID {$post->id}: {$error}");if($post->retry_count>=3){$this->marketingModel->updatePostStatus($post->id,'failed');}}public function postCreator(){try{$this->data['pageTitle']='MyMI Marketing | Management | MyMI Wallet';$this->commonData();return $this->renderTheme('ManagementModule\Views\Marketing\index',$this->data);}catch(\Throwable $th){log_message('error','MarketingController postCreator error: '.$th->getMessage());}}public function promote(){$this->data['pageTitle']='MyMI Marketing | Management | MyMI Wallet';$this->data['exchangeAssets']=[];$this->commonData();return $this->renderTheme('ManagementModule\Views\Marketing\Promote',$this->data);}public function publishBlog($blogId){$blog=$this->marketingModel->getBlogPostDetails($blogId);if(!$blog){return redirect()->back()->with('error','Blog post not found.');}$this->marketingModel->update($blogId,['status'=>'published']);return redirect()->to('/Management/Marketing/Blogs')->with('success','Blog published successfully.');}public function rejectBufferItem($id){$this->marketingModel->updateBufferStatus($id,'rejected');return $this->respond(['status'=>'success','message'=>'Rejected']);}public function rejectContent($id){$content=$this->marketingModel->find($id);if(!$content){return redirect()->back()->with('error','Content not found.');}$this->marketingModel->update($id,['status'=>'rejected']);return redirect()->back()->with('success','Content rejected successfully.');}public function reviewBuffer(){$buffer=$this->marketingModel->getBufferItems();$this->data['pageTitle']='Marketing Buffer Dashboard';$this->data['buffer']=$buffer;return $this->renderTheme('ManagementModule\Views\Marketing\BufferDashboard',$this->data);}public function runContentGeneration(){$generatedContent=$this->generateAutomatedContent();$this->session->set('generatedContent',$generatedContent);return redirect()->to('/Management/Marketing/ContentReview')->with('success',count($generatedContent).' content items generated successfully. Please review and approve.');}private function sanitizeContent($content){$content=preg_replace('#<script(.*?)>(.*?)</script>#is','',$content);$content=preg_replace('#<style(.*?)>(.*?)</style>#is','',$content);$content=strip_tags($content);$content=preg_replace('/\s+/',' ',$content);return trim($content);}private function saveCampaign($formData){$data=['title'=>$formData['title'],'description'=>$formData['description'],];$this->marketingModel->addMarketingCampaign($data);}public function saveContentEdit($id){$postData=$this->request->getPost();$content=$this->marketingModel->find($id);if(!$content){return redirect()->back()->with('error','Content not found.');}$this->marketingModel->update($id,['content'=>$postData['content'],'status'=>'pending',]);return redirect()->to('/Management/Marketing/ContentReview')->with('success','Content updated successfully.');}private function saveSchedule($formData){$scheduleModel=new \App\Models\ScheduleModel();$data=['title'=>$formData['title'],'description'=>$formData['description'],];$scheduleModel->insert($data);}public function schedule($day=null){if(!empty($day)){$this->data['marketingSchedule']=$this->marketingModel->getScheduleByDay($day);foreach($this->data['marketingSchedule']as&$schedule){$schedule['campaigns']=$this->marketingModel->getCampaignsBySchedId($schedule['id']);}$this->data['scheduleByDay']='Yes';}else{$this->data['marketingSchedule']=$this->marketingModel->getUpcomingSchedule();foreach($this->data['marketingSchedule']as&$schedule){$schedule['campaigns']=$this->marketingModel->getCampaignsBySchedId($schedule['id']);}$this->data['scheduleByDay']='No';}$this->commonData();$this->data['pageTitle']='Daily Schedule | Management | MyMI Wallet';return $this->renderTheme('ManagementModule\Views\Marketing\Schedule',$this->data);}public function scheduleNewsletterCampaign(){$newsletterDraft=$this->marketingModel->getLatestNewsletterDraft();if(!$newsletterDraft){return $this->response->setJSON(['success'=>false,'message'=>'No newsletter draft found']);}$campaignData=['title'=>$newsletterDraft['title'],'content'=>$newsletterDraft['content'],'status'=>'scheduled','send_date'=>$this->request->getPost('send_date'),'target_audience'=>'all_users','created_at'=>date('Y-m-d H:i:s'),];if($this->marketingModel->scheduleNewsletterCampaign($campaignData)){return redirect()->to(site_url('Management/Marketing/Content/Listing'))->with('success','Newsletter campaign scheduled successfully');}else{return redirect()->back()->with('error','Failed to schedule newsletter campaign');}}private function scrapeGoogleSearch($query){$searchUrl='https://www.google.com/search?q='.urlencode($query);$client=new Client();try{$response=$client->get($searchUrl);if($response->getStatusCode()==200){$html=$response->getBody()->getContents();$dom=new \DOMDocument();libxml_use_internal_errors(true);$dom->loadHTML($html);libxml_clear_errors();$xpath=new \DOMXPath($dom);$results=[];foreach($xpath->query('//a[@href]')as $link){$href=$link->getAttribute('href');if(strpos($href,'/url?q=')===0){$href=substr($href,7,strpos($href,'&')-7);$text=$link->nodeValue;$results[]=['href'=>$href,'text'=>$text];}}return $results;}else{log_message('error','scrapeGoogleSearch: Could not retrieve content, HTTP status code - '.$response->getStatusCode());return['error'=>'Could not retrieve content, HTTP status code - '.$response->getStatusCode()];}}catch(RequestException $e){log_message('error','scrapeGoogleSearch: RequestException - '.$e->getMessage());return['error'=>'RequestException error: '.$e->getMessage()];}catch(\Exception $e){log_message('error','scrapeGoogleSearch: General error - '.$e->getMessage());return['error'=>'General error: '.$e->getMessage()];}return[];}public function scrapeLink(){$rawRequestBody=$this->request->getBody();$jsonData=json_decode($rawRequestBody,true);$url=$jsonData['url']?? null;if(!$url){log_message('error','scrapeLink: URL is missing');return $this->response->setJSON(['success'=>false,'message'=>'URL is required.']);}try{log_message('debug','scrapeLink: Scraping URL - '.$url);$scrapedData=$this->scrapeWebsiteWithFallback($url);if(isset($scrapedData['error'])){log_message('error','scrapeLink: '.$scrapedData['error']);return $this->response->setJSON(['success'=>true,'message'=>'Partially scraped data, proceeding with available data.']);}if(!empty($scrapedData['content'])){$this->marketingModel->storeTempScrapedData(['title'=>$scrapedData['title'],'content'=>$scrapedData['content'],'links'=>json_encode($scrapedData['links']),'url'=>$scrapedData['url'],'scraped_at'=>date('Y-m-d H:i:s'),'modified_on'=>date('Y-m-d H:i:s'),]);return $this->response->setJSON(['success'=>true,'message'=>'Scraped data stored successfully.','data'=>$scrapedData]);}else{log_message('error','scrapeLink: Scraped data is empty');return $this->response->setJSON(['success'=>false,'message'=>'Scraping failed. Please check the URL and try again.']);}}catch(\Throwable $th){log_message('error','scrapeLink: Exception - '.$th->getMessage());return $this->response->setJSON(['success'=>false,'message'=>'An error occurred during scraping.']);}}private function scrapeLinks($links){$scrapedLinksData=[];foreach($links as $link){$url=filter_var($link['href'],FILTER_SANITIZE_URL);if(filter_var($url,FILTER_VALIDATE_URL)){$scrapedData=$this->scrapeWebsite($url);if(!empty($scrapedData['content'])){$scrapedLinksData[]=$scrapedData;}}}return $scrapedLinksData;}private function scrapeWebsite($url){$client=new Client();try{$response=$client->get($url,['stream'=>true,'headers'=>['User-Agent'=>'MyMI Wallet Bot'],'timeout'=>10,'http_errors'=>false ]);if($response->getStatusCode()==200){$html=$response->getBody()->getContents();$dom=HtmlDomParser::str_get_html($html);if($dom instanceof \voku\helper\HtmlDomParser){$title=$dom->find('title',0)->text ?? 'No title found';$bodyNode=$dom->find('body',0);$bodyContent=$bodyNode?$this->sanitizeContent($bodyNode->innerHtml()):'No body content found';$links=[];foreach($dom->find('a')as $link){$href=$link->getAttribute('href');$text=$link->text;$links[]=['href'=>$href,'text'=>$text];}log_message('debug','scrapeWebsite: Scraping successful for URL - '.$url);return['title'=>$title,'content'=>$bodyContent,'links'=>$links,'url'=>$url];}else{log_message('error','scrapeWebsite: DOM parsing failed for URL - '.$url);return['error'=>'DOM parsing failed.'];}}else{log_message('error','scrapeWebsite: Could not retrieve content, HTTP status code - '.$response->getStatusCode());return['error'=>'Could not retrieve content, HTTP status code - '.$response->getStatusCode()];}}catch(RequestException $e){if($e->hasResponse()&&$e->getResponse()->getStatusCode()==401){log_message('error','scrapeWebsite: Unauthorized access for URL - '.$url);return['error'=>'Unauthorized access. Skipping URL.'];}log_message('error','scrapeWebsite: RequestException - '.$e->getMessage());return['error'=>'RequestException error: '.$e->getMessage()];}catch(\Exception $e){log_message('error','scrapeWebsite: General error - '.$e->getMessage());return['error'=>'General error: '.$e->getMessage()];}}private function scrapeWebsiteWithFallback($url){try{log_message('debug','scrapeWebsiteWithFallback: Scraping URL - '.$url);$scrapedData=$this->scrapeWebsite($url);if(empty($scrapedData['content'])){log_message('debug','scrapeWebsiteWithFallback: Scraped data is empty, performing Google search fallback');$googleSearchResults=$this->scrapeGoogleSearch($url);$scrapedLinksData=$this->scrapeLinks($googleSearchResults);$scrapedData['google_search_results']=$scrapedLinksData;}return $scrapedData;}catch(RequestException $e){log_message('error','scrapeWebsiteWithFallback: RequestException - '.$e->getMessage());return['error'=>$e->getMessage()];}catch(\Exception $e){log_message('error','scrapeWebsiteWithFallback: General error - '.$e->getMessage());return['error'=>$e->getMessage()];}}public function searchAndApproveLogo($symbol){$query=$symbol.' logo png transparent';$searchUrl='https://www.google.com/search?q='.urlencode($query).'&tbm=isch';try{$response=$this->client->request('GET',$searchUrl);$htmlContent=$response->getBody()->getContents();$dom=new \DOMDocument();@$dom->loadHTML($htmlContent);$xpath=new \DOMXPath($dom);$imageNodes=$xpath->query('//img');$imageUrls=[];foreach($imageNodes as $imageNode){$src=$imageNode->getAttribute('src');if($src){$imageUrls[]=$src;}}return $this->renderTheme('ManagementModule\Views\Marketing\approve_logo',['symbol'=>$symbol,'imageUrls'=>$imageUrls,]);}catch(RequestException $e){log_message('error','Google Search Request Failed: '.$e->getMessage());return redirect()->back()->with('error','Failed to fetch logo suggestions.');}}public function sendScheduledNewsletter(){$campaigns=$this->marketingModel->getScheduledCampaigns();foreach($campaigns as $campaign){$this->getMyMIMarketing()->sendNewsletter($campaign['content'],$campaign['target_audience']);$this->marketingModel->updateCampaignStatus($campaign['id'],'sent');}return redirect()->to(site_url('Management/Marketing/Content/Listing'))->with('success','Scheduled newsletters sent successfully');}public function standaloneAddSubscriber(){$this->data['pageTitle']='Add Subscriber | Management | MyMI Wallet';$this->commonData();return $this->renderTheme('ManagementModule\Views\Marketing\resources\standaloneAddSubscriber',$this->data);}public function standaloneScrape(){$this->data['pageTitle']='Quick Scraper | Management | MyMI Wallet';$this->commonData();return $this->renderTheme('ManagementModule\Views\Marketing\resources\standaloneScraper',$this->data);}private function storeScrapedData($scrapedData){$db=\Config\Database::connect();$builder=$db->table('bf_marketing_temp_scraper');$data=['title'=>$scrapedData['title'],'content'=>$scrapedData['content'],'links'=>json_encode($scrapedData['links']),'url'=>$scrapedData['url'],'created_at'=>date('Y-m-d H:i:s'),'updated_at'=>date('Y-m-d H:i:s'),];$builder->insert($data);}public function submitContent(){$request=service('request');$validationRules=['campaignName'=>'required|min_length[3]','promotionalLinks'=>'required','facebookMessage'=>'required','linkedinMessage'=>'required','discordMessage'=>'required','stockTwitsMessage'=>'required','tiktokMessage'=>'required','youtubeMessage'=>'required','emailMessage'=>'required',];if(!$this->validate($validationRules)){return redirect()->back()->with('errors',$this->validator->getErrors())->withInput();}$campaignData=['name'=>$request->getPost('campaignName'),'promotional_links'=>json_encode($request->getPost('promotionalLinks')),'facebook_message'=>$request->getPost('facebookMessage'),'linkedin_message'=>$request->getPost('linkedinMessage'),'discord_message'=>$request->getPost('discordMessage'),'stocktwits_message'=>$request->getPost('stockTwitsMessage'),'tiktok_message'=>$request->getPost('tiktokMessage'),'youtube_message'=>$request->getPost('youtubeMessage'),'email_message'=>$request->getPost('emailMessage'),'additional_info'=>$request->getPost('additionalInfo'),'created_on'=>date('Y-m-d H:i:s'),'status'=>1,'stage'=>'draft',];$marketingModel=new MarketingModel();if($marketingModel->insert($campaignData)){return redirect()->to('/Marketing/Success')->with('success','Marketing content submitted successfully.');}else{return redirect()->back()->with('error','Failed to submit marketing content.')->withInput();}}public function submitDailyLog(){$data=['title'=>$this->request->getPost('subject'),'content'=>$this->request->getPost('log_content'),'subcontent'=>json_encode($this->request->getPost('subcontent')),'tags'=>$this->request->getPost('tags'),'type'=>$this->request->getPost('content_type'),'url'=>$this->request->getPost('url'),'author_information'=>$this->request->getPost('author_information'),'date_time'=>$this->request->getPost('date_time'),'trade_alert_subcategory'=>$this->request->getPost('trade_alert_subcategory'),'created_on'=>date('Y-m-d H:i:s'),];if($this->marketingModel->saveDailyLog($data)){return $this->response->setJSON(['success'=>true,'message'=>'Daily log submitted successfully!']);}else{return $this->response->setJSON(['success'=>false,'message'=>'Failed to submit daily log.']);}}public function submitLargeContent(){log_message('debug','submitLargeContent method called');try{$subject=$this->request->getPost('subject');$url=$this->request->getPost('url');$content=$this->request->getPost('large_content');$tags=$this->request->getPost('tags');$uploadedFiles=$this->request->getFiles();$contentType=$this->request->getPost('content_type');$mediaAssets=$this->handleMediaUpload($uploadedFiles['media_assets']);if(empty($content)||strlen($content)<50){throw new \Exception('Content too short or empty');}$generatedContent=$this->getMyMIMarketing()->generateContentFromLargeText($content,$tags);$keywords=is_array($generatedContent['keywords'])?$generatedContent['keywords']:[];$this->marketingModel->storeScrapedContent(['status'=>'pending','type'=>$contentType,'url'=>$url,'title'=>$subject,'summary'=>$generatedContent['summary'],'content'=>$content,'keywords'=>implode(', ',$keywords),'created_on'=>date('Y-m-d H:i:s'),]);return $this->response->setJSON(['success'=>true]);}catch(\Exception $e){log_message('error','submitLargeContent error: '.$e->getMessage());return $this->response->setJSON(['success'=>false,'message'=>'Failed to submit content.']);}}public function submitLargeContentForm(){$this->data['pageTitle']='MyMI Marketing | Management | MyMI Wallet';$this->commonData();$this->renderTheme('ManagementModule\Views\Marketing\resources\standaloneLargeContentForm',$this->data);}public function submitMarketingCampaign(){helper(['form','url']);$data=['name'=>$this->request->getPost('campaignName'),'assigned_to'=>$this->request->getPost('assigned_to'),'promotional_links'=>json_encode($this->request->getPost('promotionalLinks')),'facebook_message'=>htmlentities($this->request->getPost('facebookMessage'),ENT_QUOTES,'UTF-8'),'linkedin_message'=>htmlentities($this->request->getPost('linkedinMessage'),ENT_QUOTES,'UTF-8'),'discord_message'=>htmlentities($this->request->getPost('discordMessage'),ENT_QUOTES,'UTF-8'),'stocktwits_message'=>htmlentities($this->request->getPost('stocktwitsMessage'),ENT_QUOTES,'UTF-8'),'tiktok_message'=>htmlentities($this->request->getPost('tiktokMessage'),ENT_QUOTES,'UTF-8'),'youtube_message'=>htmlentities($this->request->getPost('youtubeMessage'),ENT_QUOTES,'UTF-8'),'email_message'=>htmlentities($this->request->getPost('emailMessage'),ENT_QUOTES,'UTF-8'),'additional_info'=>htmlentities($this->request->getPost('additionalInfo'),ENT_QUOTES,'UTF-8'),'overall_campaign_description'=>htmlentities($this->request->getPost('overall_campaign_description'),ENT_QUOTES,'UTF-8'),'voice_script'=>htmlentities($this->request->getPost('voice_script'),ENT_QUOTES,'UTF-8')];if($this->validate(['name'=>'required','facebook_message'=>'required',])){$this->marketingModel->submitCampaignContent($data);return redirect()->to('/dashboard')->with('success','Campaign submitted successfully.');}else{return redirect()->back()->withInput()->with('errors',$this->validator->getErrors());}}public function submitMarketIdeas(){if($this->request->getMethod()==='post'){$data=['title'=>$this->request->getPost('title'),'description'=>htmlentities($this->request->getPost('description'),ENT_QUOTES,'UTF-8'),'created_by'=>session()->get('user_id'),'assigned_to'=>$this->request->getPost('assigned_to'),'priority'=>$this->request->getPost('priority'),'status'=>'draft','platforms'=>json_encode($this->request->getPost('platforms')),'additional_info'=>htmlentities($this->request->getPost('additional_info'),ENT_QUOTES,'UTF-8'),];$uploadedFiles=$this->request->getFiles();$filePaths=[];if($uploadedFiles&&isset($uploadedFiles['imageFiles'])){foreach($uploadedFiles['imageFiles']as $file){if($file->isValid()&&!$file->hasMoved()){$newName=$file->getRandomName();$file->move(FCPATH.'public/assets/images/Marketing/Ideas',$newName);$filePaths[]=base_url('assets/images/Marketing/Ideas/'.$newName);}}}if(!empty($filePaths)){$data['image_paths']=json_encode($filePaths);}if($this->validate(['title'=>'required','description'=>'required'])){$this->marketingModel->submitIdea($data);return redirect()->back()->with('success','Idea submitted successfully.');}else{return redirect()->back()->withInput()->with('errors',$this->validator->getErrors());}}}public function topCommunities($channel=null){$this->commonData();$MyMIExchange=new MyMIExchange();$exchangeTokens=$MyMIExchange->getSolanaTokens();if(!empty($channel)){if($channel==='Discord'){$this->data['tokens']=$exchangeTokens['discord'];$this->data['pageTitle']='Discord Communities';$this->renderTheme('ManagementModule\Views\Marketing\Exchanges\includes\discord',$this->data);}elseif($channel==='Facebook'){$this->data['tokens']=$exchangeTokens['facebook'];$this->data['pageTitle']='Facebook Communities';$this->renderTheme('ManagementModule\Views\Marketing\Exchanges\includes\facebook',$this->data);}elseif($channel==='Twitter'){$this->data['tokens']=$exchangeTokens['x_twitter'];$this->data['pageTitle']='Twitter Communities';$this->renderTheme('ManagementModule\Views\Marketing\Exchanges\includes\twitter',$this->data);}elseif($channel==='Website'){$this->data['tokens']=$exchangeTokens['website'];$this->data['pageTitle']='Website Communities';$this->renderTheme('ManagementModule\Views\Marketing\Exchanges\includes\website',$this->data);}else{$this->data['tokens']=$exchangeTokens['all'];$this->data['pageTitle']='All Communities';$this->renderTheme('ManagementModule\Views\Marketing\Exchanges\includes\all_tokens',$this->data);}}else{$this->data['tokens']=$exchangeTokens['all'];$this->data['pageTitle']='All Communities';$this->renderTheme('ManagementModule\Views\Marketing\Exchanges\includes\all_tokens',$this->data);}}public function triggerPostAutogenOnEmpty(){$today=date('Y-m-d');$existing=$this->marketingModel->getLatestGeneratedSummaries(5,$today);if(!empty($existing)){return $this->response->setJSON(['status'=>'skipped','message'=>'Summaries already exist for today.']);}try{$this->getMyMIMarketing()->generateFromTempScraper(5);return $this->response->setJSON(['status'=>'generated','message'=>'Generated new summaries.']);}catch(\Throwable $e){log_message('error','triggerPostAutogenOnEmpty error: '.$e->getMessage());return $this->failServerError('Failed to generate summaries.');}}public function twitterDashboard(){$data=['pageTitle'=>'Twitter Dashboard','hashtags'=>$this->request->getPost('hashtags')?? '','tweets'=>[]];if($this->request->getMethod()==='post'){$hashtags=$this->request->getPost('hashtags');$tweets=$this->getMyMIMarketing()->fetchTweets($hashtags);$data['tweets']=$tweets;}return $this->renderTheme('Management/Marketing/Twitter',$data);}public function upcomingEarnings(){$model=new \App\Models\EarningsModel();$upcomingEarnings=$model->getUpcomingEarnings();$this->data['upcomingEarnings']=$upcomingEarnings;return $this->renderTheme('ManagementModule\Views\Marketing\upcoming_earnings',$this->data);}public function updatePlatformToggle($id){$post=$this->request->getJSON(true);$platform=$post['platform'];$enabled=(bool) $post['enabled'];$record=$this->marketingModel->getBufferItem($id);$platforms=json_decode($record['platforms']?? '{}',true);$platforms[$platform]=$enabled;$this->marketingModel->updateBufferItem($id,['platforms'=>json_encode($platforms)]);return $this->respond(['status'=>'success']);}public function viewBlog($slug){$blogPost=$this->marketingModel->getBlogPostBySlug($slug);if(!$blogPost){throw new \CodeIgniter\Exceptions\PageNotFoundException('Blog post not found');}return $this->renderTheme('blog/view',['blogPost'=>$blogPost]);}public function viewCampaign($campaign_id){$campaignModel=new CampaignModel();$campaign=$this->marketingModel->getCampaignsById($campaign_id);if(!$campaign){throw new \CodeIgniter\Exceptions\PageNotFoundException("Campaign not found");}return $this->renderTheme('ManagementModule\Views\Marketing\Campaigns\View',['campaign'=>$campaign]);}public function viewDailyLogs($date=null){$date=$this->siteSettings->date ?? date('Y-m-d');$this->data['pageTitle']='Marketing Daily Log | '.$date.' | MyMI Wallet';$this->data['reporting']=$this->getMyMIAnalytics()->reporting();$this->data['logs']=$this->marketingModel->getDailyLogsByDate($date);$this->commonData();return $this->renderTheme('ManagementModul\Views\Marketing\Daily_Logs',['logs'=>$logs,'date'=>$date]);}public function viewEmail($titleEncoded=null,$messageId=null){log_message('debug','üìß ManagementController::viewEmail called');try{if(empty($messageId)){return redirect()->back()->with('error','Invalid email identifier.');}$emailRecord=$this->marketingModel->getEmailByMessageId($messageId);if(!$emailRecord){return redirect()->back()->with('error','Email not found.');}$socialMediaPosts=$this->getMarketingService()->generateContentFromRaw($emailRecord);$emailRecord['social_media']=$socialMediaPosts['posts']??[];return $this->renderTheme('Management/Marketing/EmailDetail',['email'=>$emailRecord]);}catch(\Throwable $e){log_message('error','‚ùå viewEmail() failed: '.$e->getMessage());return $this->failServerError('Unable to load email.');}}public function viewGeneratedContent(){$contentData=$this->marketingModel->getLastGeneratedContent();$platformsContent=json_decode($contentData['platforms_content'],true);$this->data['pageTitle']='MyMI Marketing | Management | MyMI Wallet';$this->data['platforms_content']=$platformsContent;$this->commonData();$this->renderTheme('ManagementModule\Views\Marketing\resources\standaloneGeneratedContent',$this->data);}public function viewGeneratedSummaries(){$this->data['pageTitle']='Generated Summaries';$this->data['generatedSummaries']=$this->marketingModel->getLatestGeneratedSummaries(25);$this->renderTheme('ManagementModule\Views\Marketing\resources\generatedSummaries',$this->data);}} ?><?php namespace App\Modules\APIs\Controllers;use CodeIgniter\API\ResponseTrait;use CodeIgniter\Controller;use App\Libraries\{BaseLoader,MyMIMarketing};use App\Services\MarketingService;use App\Models\MarketingModel;class MarketingController extends Controller{use ResponseTrait;use BaseLoader;protected $MyMIMarketing;protected $marketingService;protected $marketingModel;public function __construct(){$this->MyMIMarketing=new MyMIMarketing();$this->marketingModel=new MarketingModel();}public function approveBufferItem($id){$record=$this->marketingModel->findBufferItem($id);if(!$record)return $this->failNotFound("Record not found.");$this->marketingModel->updateBufferItem($id,['status'=>'approved']);$posts=$this->MyMIMarketing->generateSocialPost($record);$this->MyMIMarketing->distributeContent('discord',$posts['discord']);$this->MyMIMarketing->distributeContent('linkedin',$posts['linkedin']);return $this->respond(['status'=>'success','message'=>'Content approved & promoted!']);}public function cronAnalyzeContent(){log_message('debug','üß† Starting content digest analysis...');$this->getMyMIMarketing()->generateFromTempScraper(5);return $this->respond(['status'=>'success','message'=>'Content analysis completed.']);}public function cronFetchAndGenerateNews(){try{$this->MyMIMarketing->cronFetchAndGenerateNews();return $this->respond(['status'=>'success','message'=>'News fetched and generated.']);}catch(\Throwable $e){return $this->failServerError($e->getMessage());}}public function cronFetchInbox(){log_message('debug','üì® Starting inbox scrape...');$this->getMyMIMarketing()->scrapeInboxAndStore();return $this->respond(['status'=>'success','message'=>'Inbox scraped.']);}public function cronFetchMarketingEmails(){log_message('info','üì¨ CRON: Fetching marketing emails via inbox scrape');try{$result=$this->getMyMIMarketing()->scrapeInboxAndStore();return $this->respond(['status'=>'success','message'=>'Marketing inbox scrape completed.','result'=>$result]);}catch(\Throwable $e){log_message('error','‚ùå cronFetchMarketingEmails() failed: '.$e->getMessage());return $this->failServerError('Inbox fetch failed: '.$e->getMessage());}}public function distributeHighScoreContent(){try{$this->getMyMIMarketing()->autoSendToZapier(80);return $this->respond(['status'=>'success','message'=>'Top scoring posts sent to Zapier']);}catch(\Throwable $e){return $this->failServerError($e->getMessage());}}public function exportBufferPosts(){helper('text');$model=new \App\Models\MarketingModel();$bufferPosts=$model->fetchBufferPostsForScoring();$filename='buffer-posts-'.date('Ymd_His').'.csv';$csvHeader=['ID','Keyword','Summary','Score','Tag Score','Category','Status','Created At'];$csvData=[$csvHeader];foreach($bufferPosts as $post){$csvData[]=[$post['id'],$post['keyword'],word_limiter(strip_tags($post['summary']),10),$post['score'],$post['tag_score'],$post['category'],$post['status'],$post['created_at']?? '',];}header('Content-Type: text/csv');header("Content-Disposition: attachment; filename=\"$filename\"");$f=fopen('php://output','w');foreach($csvData as $row){fputcsv($f,$row);}fclose($f);exit;}public function fetchBufferPaginated(){$request=service('request');$page=(int) $request->getGet('page')?? 1;$limit=(int) $request->getGet('limit')?? 20;$keyword=$request->getGet('keyword');$category=$request->getGet('category');$minTagScore=$request->getGet('min_tag_score')?? 0;$onlySuggested=(bool) $request->getGet('only_suggested');$result=$this->marketingModel->fetchBufferPaginatedWithFilters(['page'=>$page,'limit'=>$limit,'keyword'=>$keyword,'category'=>$category,'min_tag_score'=>$minTagScore,'only_suggested'=>$onlySuggested]);return $this->respond(['status'=>'success','data'=>$result['data'],'pagination'=>$result['pagination']]);}public function fetchGeneratedSummaries(){try{$summaries=$this->marketingModel->getRecentPosts(5);return $this->respond(['status'=>'success','summaries'=>$summaries,]);}catch(\Throwable $e){log_message('error','‚ùå fetchGeneratedSummaries Error: '.$e->getMessage());return $this->failServerError($e->getMessage());}}public function fetchGeneratedSummariesBlock(){try{helper('text');$todaysStory=$this->marketingModel->where('DATE(created_at)',date('Y-m-d'))->orderBy('created_at','desc')->findAll();return $this->renderTheme('App\Modules\Management\Views\Marketing\index/generatedSummariesBlock',['todaysStory'=>$todaysStory]);}catch(\Throwable $e){log_message('error','‚ùå Failed to fetch summaries block: '.$e->getMessage());return $this->failServerError('Unable to refresh summaries.');}}public function generateContentFromScraper(){try{$this->getMyMIMarketing()->generateFromTempScraper(25);return $this->respond(['status'=>'success','message'=>'Content generated from scraper.']);}catch(\Throwable $e){log_message('error','‚ùå generateContentFromScraper Error: '.$e->getMessage());return $this->failServerError($e->getMessage());}}public function generateContentDigestFromStored(){$records=$this->marketingModel->getRecentUnprocessedTempEmails(5);$processedTitles=[];foreach($records as $record){$recordId=$record['id']?? 0;try{if(empty($record['title'])){$record['title']='Fallback Title - ID '.$recordId;}$insertResult=$this->getMyMIMarketing()->generateContentAndInsert($record);if($insertResult){$this->marketingModel->markTempScraperProcessed($recordId);$processedTitles[]=$insertResult['title'];log_message('info',"‚úÖ Inserted content for ID {$recordId}");}else{log_message('warning',"‚ö†Ô∏è Skipped record ID {$recordId} ‚Äî summary not stored");}}catch(\Throwable $e){log_message('error',"‚ùå Exception on record ID {$recordId}: {$e->getMessage()}");}}return $this->respond(['status'=>'complete','processed_titles'=>$processedTitles]);}public function generateDailyContentDigest(){@ini_set('memory_limit','768M');$records=$this->marketingModel->getValidUnprocessedEmails(5);$insertedSummaries=[];foreach($records as $record){if(!is_array($record)){log_message('error','‚ùå Invalid record structure: Expected array, got '.gettype($record));continue;}try{log_message('debug','üîç Processing record ID '.$record['id']);$result=$this->getMyMIMarketing()->generateContentAndInsert($record);if($result){$this->marketingModel->markTempScraperProcessed($record['id']);$insertedSummaries[]=$result['title']?? '(no title)';log_message('info',"‚úÖ Successfully processed and inserted record ID {$record['id']}");}else{log_message('warning',"‚ö†Ô∏è Skipped or failed to insert record ID {$record['id']}");}}catch(\Throwable $e){log_message('error',"‚ùå Exception on record ID {$record['id']}: ".$e->getMessage());}}return $this->respond(['status'=>'success','inserted'=>$insertedSummaries]);}public function generatePostsFromSummary($summaryId=null){try{$summary=$this->marketingModel->find($summaryId);if(!$summary){return $this->failNotFound('Summary not found.');}$decodedTitleRaw=$summary['title']?? '';$decodedSummaryRaw=$summary['summary']?? '';$decodedTitle=$this->getMyMIMarketing()->decodeMimeHeaderSafe($decodedTitleRaw);$decodedSummary=quoted_printable_decode($decodedSummaryRaw);$decodedSummary=preg_replace('/=\r?\n/','',$decodedSummary);$decodedSummary=html_entity_decode($decodedSummary,ENT_QUOTES|ENT_HTML5,'UTF-8');$cleanTitle=preg_replace('/[^\p{L}\p{N}\s:;\-]/u','',$decodedTitle);$cleanedSummary=html_entity_decode(strip_tags($decodedSummary));$keywords=$this->MyMIMarketing->extractKeywords($cleanedSummary);$posts=$this->MyMIMarketing->generateSocialPosts($cleanedSummary,$keywords);$this->marketingModel->update($summaryId,['keywords'=>json_encode($keywords),'posts'=>json_encode($posts),]);return $this->respond(['status'=>'success','message'=>'Content generated and stored successfully.','original'=>$summary,'cleaned'=>['title'=>$cleanTitle,'summary'=>$cleanedSummary,'keywords'=>$keywords,'posts'=>$posts,],]);}catch(\Throwable $e){log_message('error','‚ùå generatePostsFromSummary() failed: '.$e->getMessage());return $this->failServerError('Error generating posts.');}}public function generateScheduledPosts(){helper('text');$marketingModel=new MarketingModel();$marketing=new MyMIMarketing();$buffer=$marketingModel->getTopBufferPosts(3,6.5);if(empty($buffer)){return $this->respond(['status'=>'empty','message'=>'No queued posts available.']);}foreach($buffer as $post){$marketingModel->updateBufferItem($post['id'],['status'=>'promoted']);$generated=$marketing->generateSocialPost($post);if(json_decode($post['platforms'])->discord ?? false){$marketing->distributeContent('discord',$generated['discord']);}if(json_decode($post['platforms'])->linkedin ?? false){$marketing->distributeContent('linkedin',$generated['linkedin']);}$marketing->notifyModerators($post);}return $this->respond(['status'=>'success','message'=>'Posts published!']);}public function generateVoiceScriptManually(){try{log_message('info','üé§ generateVoiceScriptManually() triggered.');$script=$this->getMyMIMarketing()->generateVoiceoverScript();return $this->response->setJSON(['status'=>'success','script'=>$script]);}catch(\Throwable $e){log_message('error','‚ùå Error in generateVoiceScriptManually: '.$e->getMessage());return $this->response->setJSON(['status'=>'error','message'=>$e->getMessage()]);}}public function massResendActivationEmails(){$userModel=new \App\Models\UserModel();$users=$userModel->getPendingActivationUsers();$activator=service('activator');$success=0;$failure=0;foreach($users as $user){if($activator->send($user)){$success++;}else{$failure++;}}return $this->respond(['status'=>'success','message'=>"$success emails sent, $failure failed."]);}public function monitorKeywordsAndScrape(){log_message('info','üß† Keyword Monitor Started');$keywords=$this->getMyMIMarketing()->getKeywordCandidates();if(empty($keywords)){return $this->respond(['status'=>'no_keywords']);}$results=[];foreach($keywords as $keyword){try{$scrapedData=$this->getMyMIMarketing()->scrapeGoogleSearch($keyword);if(!empty($scrapedData)){$summary=$this->getMyMIMarketing()->generateContentFromScrapedData($scrapedData,'generic');if($summary){$score=$this->getMyMIMarketing()->scoreKeywordRelevance($keyword,$summary);$results[]=['keyword'=>$keyword,'summary'=>$summary,'score'=>$score];$this->marketingModel->storeFinalMarketingContent(['source_id'=>null,'title'=>"Keyword: $keyword",'summary'=>$summary,'keywords'=>$keyword,'score'=>$score,'created_at'=>date('Y-m-d H:i:s')]);}}}catch(\Throwable $e){log_message('error',"‚ùå Failed keyword scrape for {$keyword}: ".$e->getMessage());}}return $this->respond(['status'=>'complete','processed'=>$results]);}public function processMarketingTempEmails($limit=5,$mode='daily',$id=null){try{log_message('debug',"üß† Running unified email processor with mode={$mode}, limit={$limit}, id={$id}");if($id){$record=$this->marketingModel->getEmailRecordById($id);if(!$record||empty($record['content'])){return $this->failNotFound("No valid temp email record found for ID {$id}");}$cleanText=strip_tags($record['content']);$summary=$this->getMyMIMarketing()->summarizeText($cleanText);$keywords=$this->getMyMIMarketing()->extractKeywords($cleanText);if(empty($summary)||empty($keywords)){return $this->fail("Failed to generate summary or keywords for record ID {$id}");}$testPosts=['discord'=>"üí¨ *{$record['title']}*: {$summary} #".implode(' #',$keywords),'linkedin'=>"üì¢ {$record['title']} ‚Äî {$summary}",'email'=>"Subject: {$record['title']}\n\n{$summary}",'x'=>substr($summary,0,250).'...'];$generated=['summary'=>$summary,'keywords'=>$keywords,'posts'=>$testPosts];$this->marketingModel->insertFinalScraper($record,$generated);$this->marketingModel->markTempScraperProcessed($id);return $this->respond(['status'=>'success','message'=>"‚úÖ Test record stored for ID {$id}",'summary'=>$summary,'keywords'=>$keywords,'posts'=>$testPosts]);}$records=($mode==='backfill')?$this->marketingModel->getOlderUnprocessedEmails($limit):$this->marketingModel->getValidUnprocessedEmails($limit);$results=[];foreach($records as $record){$recordId=$record['id']?? 0;if(empty($record['title'])){$record['title']="Fallback Title - ID {$recordId}";}try{$insert=$this->getMyMIMarketing()->generateContentAndInsert($record);if($insert){$this->marketingModel->markTempScraperProcessed($recordId);log_message('info',"‚úÖ Inserted record ID {$recordId}");$results[]=$insert['title'];}else{log_message('warning',"‚ö†Ô∏è Skipped ID {$recordId} ‚Äî No summary generated.");}}catch(\Throwable $e){log_message('error',"‚ùå Exception on ID {$recordId}: ".$e->getMessage());}}return $this->respond(['status'=>'success','mode'=>$mode,'inserted'=>$results]);}catch(\Throwable $e){return $this->failServerError("üî• Unified content processor failed: ".$e->getMessage());}}public function rankBufferPostsDaily(){$marketingModel=new MarketingModel();$marketing=new MyMIMarketing();$threshold=getenv('MARKETING_TFIDF_THRESHOLD')?:7.5;$pendingPosts=$marketingModel->getPendingBufferItems();foreach($pendingPosts as $post){$scoreData=$marketing->getTopKeywordScores(['summary'=>$post['summary'],]);$update=['score'=>$scoreData['score']?? 0,'tag_score'=>$scoreData['tag_score']?? 0,'tfidf_score'=>$scoreData['tfidf_score']?? 0,'auto_suggest'=>($scoreData['tfidf_score']?? 0)>=$threshold?1:0,];$marketingModel->updateBufferItem($post['id'],$update);}return $this->respond(['status'=>'success','message'=>'Buffer ranks updated.']);}public function rejectBufferItem($id){$record=$this->marketingModel->findBufferItem($id);if(!$record)return $this->failNotFound("Record not found.");$this->marketingModel->updateBufferItem($id,['status'=>'rejected']);return $this->respond(['status'=>'success','message'=>'Content rejected.']);}public function runBackfillForTempEmails(){try{log_message('info','[üîÑ Backfill] Starting backfill for unprocessed temp emails...');$unprocessedRecords=$this->marketingModel->where('status',null)->orWhere('status','')->findAll(25);if(empty($unprocessedRecords)){return $this->respond(['status'=>'complete','message'=>'No unprocessed records found.']);}$processedTitles=[];foreach($unprocessedRecords as $record){try{$result=$this->MyMIMarketing->generateContentAndInsert($record);if($result){$this->marketingModel->markTempScraperProcessed($record['id']);$processedTitles[]=$result['title'];}}catch(\Throwable $e){log_message('error','[‚ùå Backfill Error] ID '.$record['id'].' ‚Äî '.$e->getMessage());}}return $this->respond(['status'=>'success','processed'=>$processedTitles]);}catch(\Throwable $e){return $this->failServerError('[üî• Backfill Failure] '.$e->getMessage());}}public function testGenerateFromTempEmail($id){try{helper('text');$record=$this->marketingModel->getEmailRecordById($id);if(!$record||empty($record['content'])){return $this->failNotFound("No valid temp email record found for ID {$id}");}log_message('info',"üß™ Starting test content generation for temp record ID: {$id}");$cleanText=strip_tags($record['content']);$summary=$this->getMyMIMarketing()->summarizeText($cleanText);$summary=quoted_printable_decode($summary);$summary=mb_convert_encoding($summary,'UTF-8','UTF-8');$keywords=$this->getMyMIMarketing()->extractKeywords($cleanText);if(empty($summary)||empty($keywords)){return $this->fail("Failed to generate summary or keywords for record ID {$id}");}$decodedTitleRaw=$record['title']?? '';$decodedTitle=$this->getMyMIMarketing()->decodeMimeHeaderSafe($decodedTitleRaw);$cleanTitle=preg_replace('/[^\p{L}\p{N}\s:;\-]/u','',$decodedTitle);$testPosts=['discord'=>"üí¨ *{$cleanTitle}*: {$summary} #".implode(' #',$keywords),'linkedin'=>"üì¢ {$cleanTitle} ‚Äî {$summary}",'email'=>"Subject: {$cleanTitle}\n\n{$summary}",'x'=>substr($summary,0,250).'...',];$generated=['summary'=>$summary,'keywords'=>$keywords,'posts'=>$testPosts];$this->marketingModel->insertFinalScraper($record,$generated);$this->marketingModel->markTempScraperProcessed($id);log_message('info',"‚úÖ Test record stored in bf_marketing_scraper for temp ID {$id}");return $this->respond(['status'=>'success','message'=>"Content generated and stored successfully.",'summary'=>$summary,'keywords'=>$keywords,'posts'=>$testPosts]);}catch(\Throwable $e){log_message('critical',"‚ùå testGenerateFromTempEmail({$id}) failed: ".$e->getMessage());return $this->failServerError("An error occurred: ".$e->getMessage());}}public function testTfIdfEdgeCases(){$cases=['Empty String'=>'','Whitespace Only'=>'     ','Single Word'=>'Bitcoin','HTML Only'=>'<div><p></p></div>','Malformed UTF-8'=>"\xB1\x31",'Link-Only Spam'=>'http://marketwatch.com https://example.com','Token Noise'=>str_repeat('$$$!!!@@@###',10),];$results=[];foreach($cases as $label=>$input){try{log_message('info',"üß™ Running TF-IDF Test Case: $label");$cleanInput=is_string($input)?strip_tags(trim($input)):'';if(strlen($cleanInput)<10||substr_count($cleanInput,' ')<2){log_message('debug',"‚ö†Ô∏è Skipping test: $label ‚Äî input too short or lacks structure.");$results[$label]='[Skipped ‚Äî Too short or unstructured]';continue;}$summary=$this->MyMIMarketing->summarizeText($cleanInput);log_message('debug',"Result - Summary: $summary");$results[$label]=$summary;}catch(\Throwable $e){log_message('error',"‚ùå $label threw error: ".$e->getMessage());$results[$label]='[Error: '.$e->getMessage().']';}}return $this->renderTheme('App\Modules\Management\Views\Marketing\debugTfIdfResults',['results'=>$results,]);}public function triggerPostAutogenOnEmpty(){try{$existingPosts=$this->marketingModel->where('DATE(scraped_at)',date('Y-m-d'))->countAllResults();if($existingPosts===0){log_message('debug','[ü™Ñ AutoGen Trigger] No posts found for today. Running fallback generator‚Ä¶');$this->marketingService->generatePostsFromTodaysSummaries();return $this->respond(['status'=>'success','message'=>'No posts found. Generated fresh content.']);}else{return $this->respond(['status'=>'success','message'=>'Posts already exist for today. No action taken.']);}}catch(\Throwable $e){log_message('error','[‚ùå AutoGen Trigger Error] '.$e->getMessage());return $this->respond(['status'=>'error','message'=>'Failed to trigger autogen.','error'=>$e->getMessage()]);}}public function updateBufferScheduleInterval($id){$data=$this->request->getJSON(true);$interval=(int)($data['interval']?? 0);$updated=$this->marketingModel->updateBufferItem($id,['schedule_interval'=>$interval,'scheduled_at'=>null ]);if($updated){return $this->respond(['status'=>'success']);}else{return $this->fail('Failed to update interval.');}}public function updatePlatformToggle($id){$data=$this->request->getJSON(true);$platform=$data['platform'];$enabled=$data['enabled'];$record=$this->marketingModel->find($id);if(!$record){return $this->failNotFound("Record not found.");}$platforms=json_decode($record['platforms']?? '{}',true);$platforms[$platform]=$enabled;$this->marketingModel->update($id,['platforms'=>json_encode($platforms)]);return $this->respond(['status'=>'success']);}} ?><?php namespace App\Libraries;use App\Config\{SiteSettings,SocialMedia};use App\Libraries\{BaseLoader,MyMIInvestments};use App\Libraries\Traits\TextProcessor;use App\Models\{AnalyticalModel,MarketingModel};use App\Services\{EmailService,MarketingService,SolanaService};use CodeIgniter\HTTP\RequestInterface;use CodeIgniter\Session\Session;use Myth\Auth\Authorization\GroupModel;use Exception;use HTMLPurifier;use HTMLPurifier_Config;use Phpml\FeatureExtraction\TokenCountVectorizer;use Phpml\Tokenization\WhitespaceTokenizer;use Phpml\FeatureExtraction\TfIdfTransformer;use NlpTools\Tokenizers\WhitespaceTokenizer as NlpWhitespaceTokenizer;use NlpTools\Similarity\CosineSimilarity;use Facebook\Facebook;use Abraham\TwitterOAuth\TwitterOAuth;use Happyr\LinkedIn\LinkedIn;use Discord\Discord;use Discord\Parts\Channel\Message;use GuzzleHttp\Client;use Scrapemax\ScrapemaxClient;use Pscrape\Pscrape\Scrape as PscrapeScraper;use Symfony\Component\DomCrawler\Crawler;use Google\Cloud\TextToSpeech\V1\TextToSpeechClient;use Google\Cloud\TextToSpeech\V1\SynthesisInput;use Google\Cloud\TextToSpeech\V1\VoiceSelectionParams;use Google\Cloud\TextToSpeech\V1\AudioConfig;use Google\Cloud\TextToSpeech\V1\AudioEncoding;class MyMIMarketing{use BaseLoader;use TextProcessor;protected $auth;protected $cuID;protected $data;protected $debug;protected $logger;protected $request;protected $session;protected $uri;protected $APIs;protected $emailService;protected $solanaService;protected $siteSettings;protected $marketingModel;protected $analyticalModel;protected $socialMedia;protected $facebook;protected $twitter;protected $linkedin;protected $discord;protected $scrapemax;protected $pscrape;public function __construct(){$this->auth=service('authentication');$this->logger=service('logger');$this->request=service('request');$this->session=service('session');$this->uri=$this->request->getUri();$this->APIs=config('APIs');$this->socialMedia=config('SocialMedia');$this->siteSettings=config('SiteSettings');$this->debug=$this->siteSettings->debug;$this->socialMedia=config('SocialMedia');$this->marketingModel=new MarketingModel();$this->analyticalModel=new AnalyticalModel();$this->emailService=service('email');$this->solanaService=new SolanaService();$this->scrapemax=new ScrapemaxClient('https://api.scrapemax.com',$this->APIs->scrapemax_api_key);$this->pscrape=new PscrapeScraper();}public function marketing(){$department=$this->department();$links=$this->social_media();return['links'=>$links,'department'=>$department];}public function distributeTradeAlert($alert,$action='BUY'){$message=$this->generateTradeAlertMessage($alert,$action);$this->postToDiscord($message);$this->postToTwitter($message);$this->postToFacebook($message);$this->postToLinkedIn($message);}public function generateRandomMarketingContent(array $tradeAlert):array{$intros=["üö® Breaking Market Update!","üì¢ Urgent Trade Alert!","üî• High-Momentum Stock Pick!","üöÄ Skyrocketing Stocks!","üí∞ Smart Money Moves!","‚ö° Quick Market Insight!","üìà Bullish Breakout Alert!","üìä Technical Setup Unfolding!","üßê Deep Market Analysis!","üí° Pro-Level Trading Insight!"];$emoticons=['üöÄ','üî•','üí∞','üìà','üìä','‚ö°','‚úÖ','ü§ñ','üéØ','üîç'];$outros=["üìä Stay ahead of the markets!","‚è≥ Don't miss this setup!","üí∞ Trade smart & maximize gains!","üöÄ Follow for more trade alerts!","üìà Watch this ticker closely!","üî• This could be the next big mover!","üí° Insights that matter. Stay tuned!","üíé Precision trading at its best!","‚ö° More insights coming soon!","üì¢ Tap in for more premium setups!"];$intro=$intros[array_rand($intros)];$outro=$outros[array_rand($outros)];$emote1=$emoticons[array_rand($emoticons)];$emote2=$emoticons[array_rand($emoticons)];$ticker=strtoupper(trim($tradeAlert['ticker']?? 'N/A'));$company=$tradeAlert['company']?? 'Unknown Company';$tradeDesc=trim($tradeAlert['trade_description']?? '');$news=trim($tradeAlert['financial_news']?? '');$details=trim($tradeAlert['details']?? '');$price=number_format($tradeAlert['price']?? 0,2);$link=trim($tradeAlert['tv_chart']?? $tradeAlert['tv_chart_link']?? '');$chartText=(!empty($link))?"üìâ Chart: [View Here]({$link})\n":'';$fixedLength=strlen($intro)+strlen($outro)+strlen($emote1)+strlen($emote2)+strlen($chartText)+12;$maxMessageLength=2000-$fixedLength;$coreMessage="Trade Alert for **{$ticker}** ({$company}):\n"."Price: \${$price}\n"."Signal: {$tradeDesc}\n"."News: {$news}\n"."Details: {$details}\n".$chartText;if(strlen($coreMessage)>$maxMessageLength){$coreMessage=substr($coreMessage,0,$maxMessageLength-3)."...";}$finalMessage="{$emote1} {$intro}\n{$coreMessage}\n{$outro} {$emote2}";return['twitter'=>substr($finalMessage,0,280),'facebook'=>substr($finalMessage,0,2000),'linkedin'=>substr($finalMessage,0,2000),'discord'=>substr($finalMessage,0,2000)];}public function generateEmailContent(array $tradeAlert):string{$ticker=strtoupper(trim($tradeAlert['ticker']?? 'N/A'));$company=$tradeAlert['company']?? 'Unknown Company';$price=number_format($tradeAlert['price']?? 0,2);$tradeDesc=$tradeAlert['trade_description']?? '';$news=$tradeAlert['financial_news']?? '';$details=$tradeAlert['details']?? '';$content="Email Alert for {$ticker} ({$company}):\n"."Current Price: \${$price}\n"."Trade Signal: {$tradeDesc}\n"."Latest News: {$news}\n"."Analysis Details: {$details}\n"."For more information, visit our website.";return $content;}public function generateBlogContent(array $tradeAlert):string{$ticker=strtoupper(trim($tradeAlert['ticker']?? 'N/A'));$company=$tradeAlert['company']?? 'Unknown Company';$price=number_format($tradeAlert['price']?? 0,2);$tradeDesc=$tradeAlert['trade_description']?? '';$news=$tradeAlert['financial_news']?? '';$details=$tradeAlert['details']?? '';$content="Blog Post: In-depth Market Analysis on {$ticker} ({$company})\n\n"."Current Price: \${$price}\n\n"."Trade Analysis: {$tradeDesc}\n\n"."Financial News: {$news}\n\n"."Detailed Analysis: {$details}\n\n"."Stay tuned for more insights!";return $content;}public function generateVoiceoverScriptContent(array $tradeAlert):string{$ticker=strtoupper(trim($tradeAlert['ticker']?? 'N/A'));$company=$tradeAlert['company']?? 'Unknown Company';$price=number_format($tradeAlert['price']?? 0,2);$tradeDesc=$tradeAlert['trade_description']?? '';$script="Voiceover Script:\n"."Welcome to today's market update. Our focus is on {$ticker} from {$company}.\n"."The current trading price is \${$price}.\n"."Trade insight: {$tradeDesc}.\n"."Thank you for watching. Stay tuned for more updates.";return $script;}public function generateTradeAlertEmailContent(array $tradeAlert):string{$defaultTemplate=<<<S
app/Modules/chatgpt.txt:44:S;}public function formatSocialPost(string $headline,string $summary,string $platform='generic'):string{$hashtags='#MyMIWallet #InvestSmarter #FinancialFreedom';switch($platform){case 'facebook':case 'linkedin':return"{$headline}\n\n{$summary}\n\nStart your journey: https://www.mymiwallet.com\n\n{$hashtags}";case 'twitter':case 'x':$shortSummary=substr($summary,0,180);return"{$headline} ‚Äî {$shortSummary}...\nhttps://www.mymiwallet.com\n{$hashtags}";default:return"{$headline}\n\n{$summary}\nhttps://www.mymiwallet.com";}}public function formatDiscordPost(string $headline,string $summary):string{return"**{$headline}**\n\n{$summary}\n\nüëâ <https://www.mymiwallet.com>";}private function normalizeUtf8($text){return mb_convert_encoding($text,'UTF-8',mb_detect_encoding($text,'UTF-8, ISO-8859-1',true));}private function notifyAdminOnError($subject,$message){$this->emailService->setFrom('no-reply@mymiwallet.com','MyMI Wallet');$this->emailService->setTo('team@mymiwallet.com');$this->emailService->setSubject($subject);$this->emailService->setMessage($message);if(!$this->emailService->send()){$this->logger->error('Failed to send error notification email: '.print_r($this->emailService->printDebugger(),true));}}public function notifyModerators(array $post){$platforms=json_decode($post['platforms']?? '{}',true);$used=implode(', ',array_keys(array_filter($platforms)));$subject="üì¢ Buffer Post Promoted: {$post['keyword']}";$message="‚úÖ Post ID: {$post['id']}\n\n"."Summary: ".wordwrap($post['summary'],80)."\n\n"."Promoted Platforms: {$used}\n\n".site_url('Marketing/PreviewGeneratedPost/'.$post['id']);$email=\Config\Services::email();$email->setTo('moderators@mymiwallet.com');$email->setSubject($subject);$email->setMessage($message);$email->send();log_message('info',"üì¨ Sent moderator alert for Buffer ID {$post['id']}");}public function reprocessIncompleteEmails(){$incompleteRecords=$this->marketingModel->getEmailsMissingTitleOrUrl(20);log_message('debug','üìã MyMIMarketing L986 - Incomplete records fetched: '.count($incompleteRecords));foreach($incompleteRecords as $record){try{$emailId=$record['message_id']?? null;$content=$record['content']?? '';$title=$record['title']?? '';$url=$record['url']?? '';if(!$emailId)continue;$email=$this->fetchEmailByMessageId($emailId);if($email){$content=$email['body']?? $content;$title=$email['subject']?? $title;$url=$email['link']?? $url;}$title=$title?:'Untitled Email - '.date('Y-m-d H:i');$url=$url?:'https://mymiwallet.com/news/fallback';$this->marketingModel->updateEmailFields($record['id'],$title,$url,$content);}catch(\Throwable $e){log_message('error','‚ùå Error backfilling email ID '.$record['id'].': '.$e->getMessage());}}}private function retry($function,$attempts=3,$delay=2000){$attempt=0;while($attempt<$attempts){try{return $function();}catch(Exception $e){$attempt++;if($attempt>=$attempts){throw $e;}sleep($delay/1000);}}}private function sanitizeContent($content){$content=preg_replace('#<script(.*?)>(.*?)</script>#is','',$content);$content=preg_replace('#<noscript(.*?)>(.*?)</noscript>#is','',$content);$content=strip_tags($content)?? '';$content=preg_replace('/\.\s*/','. ',$content);return $content;}public function sanitizeRawEmailContent(string $rawContent):string{log_message('debug','üß™ MyMIMarketing L1140 - Raw Email Before Cleaning: {raw}',['raw'=>$rawContent]);$clean=preg_replace("/=\r\n|\=\n/",'',$rawContent);$clean=quoted_printable_decode($clean);$clean=html_entity_decode($clean,ENT_QUOTES|ENT_HTML5,'UTF-8');$clean=strip_tags($clean);$clean=preg_replace('/\s+/',' ',$clean);$clean=mb_convert_encoding($clean,'UTF-8','UTF-8');log_message('debug','‚úÖ MyMIMarketing L1159 - Cleaned Email Output: {clean}',['clean'=>$clean]);return trim($clean);}private function sanitizeText(string $text):string{return strip_tags(html_entity_decode($text));}public function saveTradingViewChart($chartUrl,$ticker){$saveDir=FCPATH.'assets/images/Alerts/Charts/';if(!is_dir($saveDir)){mkdir($saveDir,0777,true);}$timestamp=time();$filename="{$ticker}_chart_{$timestamp}.jpg";$savePath=$saveDir.$filename;$ch=curl_init($chartUrl);$fp=fopen($savePath,'wb');curl_setopt($ch,CURLOPT_FILE,$fp);curl_setopt($ch,CURLOPT_HEADER,0);curl_exec($ch);curl_close($ch);fclose($fp);if(file_exists($savePath)){return $filename;}else{return null;}}public function scoreKeywordRelevance(string $keyword,string $summary):int{$keyword=strtolower($keyword);$summaryText=strtolower(strip_tags($summary));$totalWords=str_word_count($summaryText);if($totalWords===0)return 0;$matches=substr_count($summaryText,$keyword);$score=min(100,round(($matches/$totalWords)*500));return $score;}public function scrapeTokenContent($tokenInfo){$scrapedData=[];foreach($tokenInfo as $token){if(!empty($token['website'])){log_message('debug','MyMIMarketing L101 - $token[website]: '.$token['website']);$websiteData=$this->scrapeWebsite($token['website']);log_message('debug','MyMIMarketing L103 - $websiteData: '.print_r($websiteData,true));$this->storeTemporaryData($websiteData);$scrapedData[]=$websiteData;}if(!empty($token['facebook'])){log_message('debug','MyMIMarketing L109 - $token[facebook]: '.$token['facebook']);$facebookData=$this->scrapeFacebook($token['facebook']);log_message('debug','MyMIMarketing L111 - $facebookData: '.print_r($facebookData,true));$this->storeTemporaryData($facebookData);$scrapedData[]=$facebookData;}if(!empty($token['twitter'])){log_message('debug','MyMIMarketing L117 - $token[twitter]: '.$token['twitter']);$twitterData=$this->scrapeTwitter($token['twitter']);log_message('debug','MyMIMarketing L119 - $twitterData: '.print_r($twitterData,true));$this->storeTemporaryData($twitterData);$scrapedData[]=$twitterData;}log_message('debug','MyMIMarketing L117 - $token[symbol] $token[name]: '.$token['symbol'].' '.$token['coin_name']);$googleData=$this->scrapeGoogleSearch($token['symbol'].' '.$token['coin_name']);$this->storeTemporaryData($googleData);$scrapedData[]=$googleData;}return $scrapedData;}public function scrapeAndGenerateContent($accountid,$category,$platform=null){$generatedData=[];if($category==='Solana'){$this->solanaModel=new SolanaModel();$tokenInfo=$this->solanaModel->getTokenInfoByID($accountid);}else{$tokenInfo=[];}if(!empty($tokenInfo)){$scrapedData=[];try{log_message('debug','Attempting to scrape token content.');$scrapedData=$this->scrapeTokenContent($tokenInfo);log_message('debug','Scraped Data: '.print_r($scrapedData,true));}catch(\GuzzleHttp\Exception\ClientException $e){if($e->getResponse()->getStatusCode()==403){log_message('critical','403 Forbidden encountered while scraping website: '.$e->getMessage());}else{log_message('critical','ClientException: '.$e->getMessage());}}catch(\Exception $e){log_message('critical','An error occurred while scraping token content: '.$e->getMessage());}try{if(!empty($scrapedData)){log_message('debug','Attempting to generate content from scraped data.');$generatedData=$this->generateContentFromScrapedData($scrapedData,$platform);log_message('debug','Generated Data: '.print_r($generatedData,true));}else{log_message('debug','Scraped data is empty.');}}catch(\Exception $e){log_message('critical','An error occurred while generating content: '.$e->getMessage());}}else{log_message('debug','Token information is empty.');}return $generatedData;}private function scrapeWebsite($url){try{$client=new Client();$response=$client->get($url);if($response->getStatusCode()==200){$html=$response->getBody()->getContents();$crawler=new \Symfony\Component\DomCrawler\Crawler($html);return['title'=>$crawler->filter('title')->text(),'content'=>$this->sanitizeContent($crawler->filter('body')->html()),];}}catch(RequestException $e){$this->logger->error('Error scraping website: '.$e->getMessage());}return[];}private function scrapeFacebook($url){return $this->scrapeWithRetries('facebook',$url,function($content){return['title'=>$content['page_title']?? 'No title','content'=>$this->sanitizeContent($content['posts']?? 'No posts'),];});}private function scrapeTwitter($url){return $this->scrapeWithRetries('twitter',$url,function($content){return['title'=>$content['profile']?? 'No title','content'=>$this->sanitizeContent($content['tweets']?? 'No tweets'),];});}private function scrapeWithRetries($type,$url,$transform,$retries=3){$backoff=1;for($i=0;$i<$retries;$i++){try{$response=$this->scrapemax->scrape(['target_url'=>$url,'type'=>'data','js_enabled'=>1,'base64_encoded'=>0]);$content=json_decode($response->getBody()->getContents(),true);if(empty($content)){throw new \Exception("No content returned");}return $transform($content);}catch(ServerException $e){if($i<$retries-1){sleep($backoff);$backoff*=2;continue;}$this->logger->error("Error scraping $type: ".$e->getMessage());}catch(RequestException $e){$this->logger->error("Error scraping $type: ".$e->getMessage());break;}catch(\Exception $e){$this->logger->error("General error scraping $type: ".$e->getMessage());break;}}return['title'=>'No title','content'=>'No content'];}private function scrapeGoogleSearch($query){try{$results=$this->pscrape->rollingCurl('rollingCurl');$results->request('https://www.google.com/search?q='.urlencode($query));$content='';$resultsData=$results->execute();if(!is_array($resultsData)){throw new \Exception("Google search did not return an array");}foreach($resultsData as $result){$content.=$result['title'].' '.$result['link'].' ';}return['title'=>'Google Search Results for '.$query,'content'=>$this->sanitizeContent($content),];}catch(\Exception $e){$this->logger->error('Error scraping Google Search: '.$e->getMessage());}return[];}public function sendZapierTradeAlert($tradeAlert){$zapierWebhookUrl="YOUR_ZAPIER_WEBHOOK_URL";$payload=json_encode(['ticker'=>$tradeAlert['ticker'],'price'=>$tradeAlert['price'],'sentiment'=>$tradeAlert['market_sentiment'],'chart_link'=>$tradeAlert['link'],'created_on'=>$tradeAlert['created_on']]);$ch=curl_init($zapierWebhookUrl);curl_setopt($ch,CURLOPT_HTTPHEADER,['Content-Type: application/json']);curl_setopt($ch,CURLOPT_POST,1);curl_setopt($ch,CURLOPT_POSTFIELDS,$payload);curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);$response=curl_exec($ch);curl_close($ch);return $response;}public function standaloneScrapeWebsite($url){try{$client=new Client();$response=$client->get($url);if($response->getStatusCode()==200){$html=$response->getBody()->getContents();$crawler=new Crawler($html);$content=$crawler->filter('body')->each(function($node){return $node->text();});$content=array_filter($content,function($text){return!str_contains($text,'footer')&&!str_contains($text,'head');});$data=['url'=>$url,'content'=>implode(' ',$content),'scraped_at'=>date('Y-m-d H:i:s')];$this->saveTemporaryScrapedData($data);return $data;}else{log_message('error','Failed to scrape website. HTTP status code: '.$response->getStatusCode());}}catch(RequestException $e){log_message('error','RequestException while scraping website: '.$e->getMessage());}catch(\Throwable $th){log_message('error','Throwable error while scraping website: '.$th->getMessage());}return false;}public function saveTemporaryScrapedData($data){$marketingModel=new \App\Models\MarketingModel();return $this->marketingModel->insertTemporaryData($data);}private function storeTemporaryData($data){if(!empty($data)){$this->marketingModel->insertTemporaryData($data);}else{$this->logger->warning('Attempted to store empty data.');}}private function selectSummarySentences($sentences,$scores,$topN=5){arsort($scores,SORT_NUMERIC);$topSentenceIndexes=array_keys(array_slice($scores,0,$topN,true));$summary=array_intersect_key($sentences,array_flip($topSentenceIndexes));usort($summary,function($a,$b)use($sentences){return array_search($a,$sentences)-array_search($b,$sentences);});return $summary;}private function splitIntoSentences($content){$content=preg_replace('/\s+/',' ',trim($content));$sentences=preg_split('/(?<=[.!?])\s+/',$content,-1,PREG_SPLIT_NO_EMPTY);return array_filter($sentences,function($sentence){return strlen(trim($sentence))>0;});}public function summarize($text,$method='textrank',$charLimit=500){$text=$this->cleanText($text);if($method==='tfidf'){return $this->summarizeText($text);}else{return $this->summarizeContent($text,$charLimit);}}public function summarizeContent($content,$charLimit=500){if(empty(trim($content))){$this->logger->error('$content is Empty for summarizeContent() function');return[];}$sentences=$this->splitIntoSentences($content);if(empty($sentences)){log_message('warning','‚ö†Ô∏è MyMIMarketing L1306 - summarizeContent(): No valid sentences found in content.');return null;}if(empty($sentences)){$this->logger->error('No sentences found for summarization');return[];}$tokens=$this->tokenizeWithNlpTools($content);$features=$this->extractFeaturesWithPhpMl($content);$wordFrequencies=$this->calculateWordFrequencies($content,$this->getStopWords());$similarityMatrix=$this->buildSimilarityMatrix($sentences,$wordFrequencies);$scores=$this->pageRank($similarityMatrix);$summary=$this->buildSummaryToCharLimit($sentences,$scores,$charLimit);$finalSummary=$this->convertUrlsToLinks($summary);return!empty($finalSummary)?['sentences'=>$sentences,'tokens'=>$tokens,'features'=>$features,'wordFrequencies'=>$wordFrequencies,'similarityMatrix'=>$similarityMatrix,'scores'=>$scores,'summary'=>$finalSummary,]:$summary;}public function summarizeContentFromHtml(string $html,$recordId=null):array{$html=quoted_printable_decode($html);$html=html_entity_decode($html,ENT_QUOTES|ENT_HTML5,'UTF-8');$html=preg_replace('/=\r?\n/','',$html);$plainText=strip_tags(html_entity_decode($html));$cleaned=$this->sanitizeRawEmailContent($plainText);if(strlen($cleaned)<300||substr_count($cleaned,' ')<20){$logSuffix=$recordId?" (ID: $recordId)":'';log_message('info',"[MyMIMarketing] summarizeContentFromHtml(): Skipping ‚Äî content too short or lacks structure{$logSuffix}");return['summary'=>'','keywords'=>[]];}$cleaned=preg_replace('/\s{2,}/',' ',$cleaned);$summaryData=$this->summarizeContent($cleaned);if(!is_array($summaryData)||empty($summaryData['summary'])){return['summary'=>'','keywords'=>[]];}$keywords=$this->marketingModel->extractKeywords($cleaned);return['summary'=>$summaryData['summary'],'keywords'=>$keywords ??[],'featureScore'=>$summaryData['featureScore']?? null,'keywordScore'=>$summaryData['keywordScore']?? null,'pageRankScore'=>$summaryData['pageRankScore']?? null,'semanticDiversityScore'=>$summaryData['semanticDiversityScore']?? null,];}public function summarizeContentTextRank($content){$sentences=$this->splitIntoSentences($content);$similarityMatrix=$this->buildSimilarityMatrix($sentences);$scores=$this->pageRank($similarityMatrix);return $this->extractTopSentences($sentences,$scores);}public function summarizeText($text,$maxSentences=5){if(!is_string($text)||empty(trim($text))){log_message('error','summarizeText(): Empty or invalid input text provided.');return 'Summary not available.';}$sentences=$this->splitIntoSentences($text);if(empty($sentences)||count($sentences)<2){log_message('warning','summarizeText(): Not enough content to summarize.');return implode(' ',$sentences);}$vectorizer=new TokenCountVectorizer(new WhitespaceTokenizer());$vectorizer->fit($sentences);$vectorizer->transform($sentences);$tfidf=new TfIdfTransformer();try{$tfidf->fit($sentences);$tfidf->transform($sentences);}catch(\Throwable $e){log_message('error','summarizeText(): TF-IDF transform failed ‚Äî '.$e->getMessage());return 'Summary unavailable due to processing error.';}$scores=[];foreach($sentences as $i=>$vector){$score=0;foreach($vector as $value){$score+=(float)$value;}$scores[$i]=$score;}arsort($scores);$topIndexes=array_slice(array_keys($scores),0,$maxSentences);sort($topIndexes);$originalSentences=$this->splitIntoSentences($text);$summary=implode(' ',array_map(fn($i)=>$originalSentences[$i],$topIndexes));return $summary;}private function tokenizeSmart($text,$method='nlp'){return $method==='nlp'?$this->tokenizeWithNlpTools($text):$this->tokenizeText($text);}private function tokenizeText($text){$text=strtolower(strip_tags($text));return preg_split('/\W+/',$text,-1,PREG_SPLIT_NO_EMPTY);}public function tokenizeWithNlpTools($content){$tokenizer=new NlpWhitespaceTokenizer();$tokens=$tokenizer->tokenize($content);$this->logger->debug('Tokens: '.print_r($tokens,true));return $tokens;}public function insertFinalScraper($record,$summary){$model=new MarketingModel();if(!isset($record['id'])||!$summary){log_message('error','‚ùå Missing record ID or summary when calling insertFinalScraper()');return false;}$existing=$model->where('source_id',$record['id'])->first();if($existing){log_message('info',"‚ö†Ô∏è Final scrape already exists for source_id: {$record['id']}");return false;}$cleanSummary=mb_convert_encoding($summary['summary'],'UTF-8','UTF-8');$cleanTitle=isset($record['title'])?$record['title']:word_limiter($cleanSummary,12);$cleanTitle=preg_replace('/[^\p{L}\p{N}\s:;\-]/u','',$cleanTitle);$data=['source_id'=>$record['id'],'title'=>trim($cleanTitle),'summary'=>trim($cleanSummary),'keywords'=>isset($summary['keywords'])?implode(',',$summary['keywords']):'','date_created'=>date('Y-m-d H:i:s'),];$result=$model->insert($data);if($result){log_message('info',"‚úÖ Final scraped content inserted for source_id: {$record['id']}");}else{log_message('error',"‚ùå Failed to insert final scrape for source_id: {$record['id']}");}return $result;}private function cleanText($text){$text=$this->decodeSpecialCharacters($text);$text=$this->sanitizeRawEmailContent($text);return $this->normalizeUtf8(strip_tags($text));}private function combineScores($featureScore,$keywordScore,$pageRankScore,$semanticDiversityScore){$featureScore=is_numeric($featureScore)?(float)$featureScore:0.0;$keywordScore=is_numeric($keywordScore)?(float)$keywordScore:0.0;$pageRankScore=is_numeric($pageRankScore)?(float)$pageRankScore:0.0;$semanticDiversityScore=is_numeric($semanticDiversityScore)?(float)$semanticDiversityScore:0.0;$combinedScore=0.4*$featureScore+0.2*$keywordScore+0.3*$pageRankScore+0.1*$semanticDiversityScore;$this->logger->debug('‚úÖ Combined Score for sentence: '.$combinedScore);return $combinedScore;}private function buildSimilarityMatrix($sentences,$wordFrequencies){$matrix=[];$sentenceLength=count($sentences);for($i=0;$i<$sentenceLength;$i++){for($j=0;$j<$sentenceLength;$j++){if($i!=$j){$matrix[$i][$j]=$this->calculateSimilarity($sentences[$i],$sentences[$j],$wordFrequencies);}}}return $matrix;}private function calculateSimilarity($sentence1,$sentence2,$wordFrequencies){$sentence1=is_string($sentence1)?strtolower($sentence1):'';$sentence2=is_string($sentence2)?strtolower($sentence2):'';$words1=array_unique(str_word_count($sentence1,1));$words2=array_unique(str_word_count($sentence2,1));$commonWords=array_intersect($words1,$words2);$score=0;foreach($commonWords as $word){$score+=(float)($wordFrequencies[$word]?? 0);}$logWordCount1=count($words1)>0?log(count($words1)):0;$logWordCount2=count($words2)>0?log(count($words2)):0;if($logWordCount1+$logWordCount2==0){return 0;}return $score/($logWordCount1+$logWordCount2);}private function calculateWordFrequencies($content,$stopWords){$frequencies=[];$words=preg_split('/\s+/',strtolower($content));foreach($words as $word){if(!in_array($word,$stopWords)&&strlen($word)>1){$frequencies[$word]=($frequencies[$word]?? 0)+1;}}arsort($frequencies);return $frequencies;}public function decodeMimeHeaderSafe($string){try{return mb_decode_mimeheader($string);}catch(\Throwable $e){log_message('error','decodeMimeHeaderSafe() failed: '.$e->getMessage());return $string;}}private function decodeSpecialCharacters($text){return html_entity_decode($text,ENT_QUOTES|ENT_HTML5,'UTF-8');}public function getScrapesByKeyword($keyword){return $this->marketingModel->getScrapesByKeyword($keyword);}private function getStopWords(){return["a","the","and","of","in","to","is","you","that","it","he","was","for","on","are","as","with","his","they","I","at","be","this","have","from","or","one","had","by","word","but","not","what","all","were","we","when","your","can","said","there","use","an","each","which","she","do","how","their","if","will","up","other","about","out","many","then","them","these","so","some","her","would","make","like","him","into","time","has","look","two","more","write","go","see","number","no","way","could","people","my","than","first","water","been","call","who","oil","its","now","find","long","down","day","did","get","come","made","may","part"];}public function getTopKeywordScores($content,$max=10){if(!is_string($content)){log_message('error','MyMIMarketing L1706 - getTopKeywordScores(): Content must be a string');return[];}$content=$this->normalizeUtf8($content);$sentences=$this->splitIntoSentences($content);if(empty($sentences)){log_message('error','MyMIMarketing L1713 - getTopKeywordScores(): No valid sentences to process');return[];}$tfIdf=new TfIdfTransformer();$tokenized=array_values(array_filter(array_map(function($sentence){$cleaned=strtolower($this->normalizeUtf8(trim($sentence)));$tokens=array_filter(explode(' ',$cleaned),fn($w)=>strlen($w)>1);return count($tokens)>0?$tokens:null;},$sentences)));if(empty($tokenized)||!isset($tokenized[0])||!is_array($tokenized[0])||empty($tokenized[0])){log_message('error','‚ùå MyMIMarketing L1725 - Tokenized input invalid for TF-IDF. Tokenized: '.json_encode($tokenized));return[];}try{$tfIdf->fit($tokenized);log_message('debug','üìä MyMIMarketing L1731 - TF-IDF Document Preview: '.json_encode(array_slice($tokenized,0,1)));$tfIdf->transform($tokenized);}catch(\Throwable $e){log_message('error','‚ùå MyMIMarketing L1734 - TF-IDF error: '.$e->getMessage());return[];}$scores=[];foreach($tokenized as $docIndex=>$tokens){foreach($tokens as $token){if(!is_string($token))continue;if(!isset($scores[$token])){$scores[$token]=0.0;}$scores[$token]+=1.0;}}if(empty($scores)){log_message('error','‚ùå MyMIMarketing L1752 - No TF-IDF scores generated');return[];}arsort($scores);return array_keys(array_slice($scores,0,$max,true));}private function isSemanticallyDifferent($sentence1,$sentence2,$tokens){$tokens1=array_intersect($tokens,str_word_count(strtolower($sentence1),1));$tokens2=array_intersect($tokens,str_word_count(strtolower($sentence2),1));$overlap=count(array_intersect($tokens1,$tokens2));$threshold=2;return $overlap<$threshold;}private function pageRank($matrix,$dampingFactor=0.85,$maxIterations=100,$tolerance=1e-6){$numSentences=count($matrix);if($numSentences==0){return[];}$pagerank=array_fill(0,$numSentences,1/$numSentences);$tempRank=array_fill(0,$numSentences,0);for($iter=0;$iter<$maxIterations;$iter++){for($i=0;$i<$numSentences;$i++){$tempRank[$i]=(1-$dampingFactor)/$numSentences;for($j=0;$j<$numSentences;$j++){if($i!=$j&&isset($matrix[$j][$i])){$matrixRowSum=array_sum($matrix[$j]);if($matrixRowSum!=0){$tempRank[$i]+=$dampingFactor*($matrix[$j][$i]*$pagerank[$j]/$matrixRowSum);}}}}$diff=0;for($i=0;$i<$numSentences;$i++){$diff+=abs($tempRank[$i]-$pagerank[$i]);}if($diff<$tolerance){break;}$pagerank=$tempRank;}return $pagerank;}private function extractTopSentences($sentences,$scores,$topN=5){asort($scores,SORT_NUMERIC);$topSentenceIndexes=array_keys(array_slice($scores,-$topN,$topN,true));$summary=[];foreach($topSentenceIndexes as $index){$summary[]=trim($sentences[$index]);}return $summary;}public function enqueueEmailJob($emailData){$data=['type'=>'email_processing','data'=>json_encode($emailData)];$this->marketingModel->insertJobQueue($data);}private function stripHtmlTags($htmlContent){return strip_tags($htmlContent);}public function social_media(){return['discord'=>$this->socialMedia->discord,'facebook_page'=>$this->socialMedia->facebook_page,'facebook_group'=>$this->socialMedia->facebook_group,'linkedin'=>$this->socialMedia->linkedin,'twitter'=>$this->socialMedia->twitter,'youtube'=>$this->socialMedia->youtube,];}public function department(){$activeCampaigns=$this->marketingModel->getActiveCampaigns();$totalActiveCampaigns=$activeCampaigns['num_rows'];$activePriorityCampaigns=$this->marketingModel->getActivePriorityCampaigns();$totalActivePriorityCampaigns=$activePriorityCampaigns['num_rows'];return['getActiveCampaigns'=>$activeCampaigns['result'],'totalActiveCampaigns'=>$totalActiveCampaigns,'getActivePriorityCampaigns'=>$activePriorityCampaigns['result'],'totalActivePriorityCampaigns'=>$totalActivePriorityCampaigns,];}public function seoCheck(){$uri_string=$this->request->getUri()->getPath();$query=$this->marketingModel->where('url',$uri_string)->first();if(!$query){$data=['url'=>$uri_string,'title'=>str_replace(['_','/'],[' ',' - '],$uri_string),'description'=>"Experience the future of personal finance with MyMI Wallet. We provide advanced budgeting and investment portfolio management solutions, empowering individuals to better manage their finances. Streamline your financial journey with our intuitive online fintech application and service.",'image'=>base_url('/assets/images/Company/MyMI-Wallet-White.png'),];$this->marketingModel->insert($data);$insert_id=$this->marketingModel->getInsertID();$task_info=['task'=>'Page SEO Edit','title'=>str_replace(['_','/'],[' ',' - '],$uri_string),'seo_id'=>$insert_id,'url'=>$uri_string,];$this->assignMarketingTask($task_info);}}public function assignMarketingTask($task_info){$data=['status'=>'Pending','group'=>'Marketing','task'=>$task_info['task'],'title'=>$task_info['title'],'description'=>'Complete SEO for '.$task_info['url'],'url'=>site_url('/Management/Marketing/Page-SEO/'.$task_info['seo_id']),];$this->marketingModel->insertManagementTask($data);}public function autoDistributeHighRelevanceSummaries($minScore=75){$posts=$this->marketingModel->getRecentPosts(10);foreach($posts as $post){if(($post['score']?? 0)>=$minScore){$message="**{$post['title']}**\n\n".word_limiter(strip_tags($post['summary']),60);$this->sendToDiscordNotification($message);}}}public function autoSendToZapier($minScore=75){$posts=$this->marketingModel->getRecentPosts(10);foreach($posts as $post){if(($post['score']?? 0)>=$minScore){$this->sendToZapier('facebook',$post['summary']);}}}public function getPageHeaders(){$getPageSEO=$this->marketingModel->getMarketingPageSeo();$pageSEOData=[];foreach($getPageSEO as $pageSEO){$pageSEOData[]=['page_id'=>$pageSEO['id'],'page_name'=>$pageSEO['page_name'],'page_title'=>$pageSEO['page_title'],'page_url'=>$pageSEO['page_url'],'page_sitemap_url'=>$pageSEO['page_sitemap_url'],'page_internal_url'=>$pageSEO['page_internal_url'],'page_controller'=>$pageSEO['page_controller'],'page_controller_url'=>$pageSEO['page_controller_url'],'page_controller_directory'=>$pageSEO['page_controller_directory'],'page_file_directory'=>$pageSEO['page_file_directory'],'page_image'=>$pageSEO['page_image'],'page_description'=>$pageSEO['page_description'],'page_address'=>$pageSEO['page_address'],'page_city'=>$pageSEO['page_city'],'page_state'=>$pageSEO['page_state'],'page_country'=>$pageSEO['page_country'],'page_zipcode'=>$pageSEO['page_zipcode'],'page_facebook'=>$pageSEO['page_facebook'],'linked'=>$pageSEO['linked'],'functionality'=>$pageSEO['functionality'],'design'=>$pageSEO['design'],'seo'=>$pageSEO['seo'],'ext_links'=>$pageSEO['ext_links'],'grammar'=>$pageSEO['grammar'],'d_optimize'=>$pageSEO['d_optimize'],'load_perf'=>$pageSEO['load_perf'],'additional_notes'=>$pageSEO['additional_notes'],];}return $pageSEOData;}public function getPageHeadersByName($pageName){$getPageSEO=$this->marketingModel->getMarketingPageSeoByName($pageName);$pageSEOData=[];foreach($getPageSEO as $pageSEO){$pageSEOData[]=['page_id'=>$pageSEO['id'],'page_name'=>$pageSEO['page_name'],'page_title'=>$pageSEO['page_title'],'page_url'=>$pageSEO['page_url'],'page_sitemap_url'=>$pageSEO['page_sitemap_url'],'page_internal_url'=>$pageSEO['page_internal_url'],'page_controller'=>$pageSEO['page_controller'],'page_controller_url'=>$pageSEO['page_controller_url'],'page_controller_directory'=>$pageSEO['page_controller_directory'],'page_file_directory'=>$pageSEO['page_file_directory'],'page_image'=>$pageSEO['page_image'],'page_description'=>$pageSEO['page_description'],'page_address'=>$pageSEO['page_address'],'page_city'=>$pageSEO['page_city'],'page_state'=>$pageSEO['page_state'],'page_country'=>$pageSEO['page_country'],'page_zipcode'=>$pageSEO['page_zipcode'],'page_facebook'=>$pageSEO['page_facebook'],'linked'=>$pageSEO['linked'],'functionality'=>$pageSEO['functionality'],'design'=>$pageSEO['design'],'seo'=>$pageSEO['seo'],'ext_links'=>$pageSEO['ext_links'],'grammar'=>$pageSEO['grammar'],'d_optimize'=>$pageSEO['d_optimize'],'load_perf'=>$pageSEO['load_perf'],'additional_notes'=>$pageSEO['additional_notes'],];}return $pageSEOData;}public function postToDiscord($message){$discordWebhookUrl=getenv('DISCORD_WEBHOOK_URL');if(strlen($message)>2000){$message=substr($message,0,1997)."...";}$payload=json_encode(["content"=>$message]);$ch=curl_init($discordWebhookUrl);curl_setopt($ch,CURLOPT_HTTPHEADER,['Content-Type: application/json']);curl_setopt($ch,CURLOPT_POST,1);curl_setopt($ch,CURLOPT_POSTFIELDS,$payload);curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);$response=curl_exec($ch);curl_close($ch);return $response;}public function postToFacebookPage($pageId,$message){try{$response=$this->facebook->post("/{$pageId}/feed",['message'=>$message,],$this->facebook->getAccessToken());return $response->getGraphNode();}catch(Facebook\Exceptions\FacebookResponseException $e){log_message('error','Graph returned an error: '.$e->getMessage());return false;}catch(Facebook\Exceptions\FacebookSDKException $e){log_message('error','Facebook SDK returned an error: '.$e->getMessage());return false;}}public function postToFacebookGroup($groupId,$message){try{$response=$this->facebook->post("/{$groupId}/feed",['message'=>$message,],$this->facebook->getAccessToken());return $response->getGraphNode();}catch(Facebook\Exceptions\FacebookResponseException $e){log_message('error','Graph returned an error: '.$e->getMessage());return false;}catch(Facebook\Exceptions\FacebookSDKException $e){log_message('error','Facebook SDK returned an error: '.$e->getMessage());return false;}}public function sendNotification($type,$viewPath,$data,$targetGroup=null,$socialMedia=[]){$userModel=new UserModel();if($targetGroup){$users=$userModel->where('group',$targetGroup)->findAll();}else{$users=$userModel->findAll();}$viewContent=view($viewPath,$data);$notoCount=0;$emailNotoCount=0;if(in_array('in-app',$type)){foreach($users as $user){$this->sendInAppNotification($user,$viewContent);$notoCount++;}}if(in_array('email',$type)){foreach($users as $user){$this->sendEmailNotification($user,$viewContent);$emailNotoCount++;}}foreach($socialMedia as $platform){switch($platform){case 'facebook':$this->postToFacebook($data['message']);break;case 'twitter':$this->postToTwitter($data['message']);break;case 'linkedin':$this->postToLinkedIn($data['message']);break;case 'discord':$this->postToDiscord($data['message']);break;}}$notificationData=['active'=>1,'message'=>$viewContent,'created_at'=>date('Y-m-d H:i:s'),'created_by'=>session('user_id'),'noto_count'=>$notoCount,'email_noto_count'=>$emailNotoCount,];$this->marketingModel->storeNotification($notificationData);}private function sendInAppNotification($user,$content){$db=\Config\Database::connect();$db->table('user_notifications')->insert(['user_id'=>$user->id,'content'=>$content,'created_at'=>date('Y-m-d H:i:s')]);}private function sendEmailNotification($user,$content){$email=\Config\Services::email();$email->setTo($user->email);$email->setSubject('Notification');$email->setMessage($content);$email->send();}public function postToSocialMedia($content){try{$this->postToFacebook($content);$this->postToTwitter($content);$this->postToLinkedIn($content);}catch(\Throwable $e){$this->logger->error('‚ùå postToSocialMedia() failed: '.$e->getMessage());}}private function postToFacebook($message){try{$response=$this->facebook->post('/me/feed',['message'=>$message],$this->socialMedia->facebook_access_token);return $response->getGraphNode();}catch(Facebook\Exceptions\FacebookResponseException $e){$this->logger->error('Facebook Graph returned an error: '.$e->getMessage());return false;}catch(Facebook\Exceptions\FacebookSDKException $e){$this->logger->error('Facebook SDK returned an error: '.$e->getMessage());return false;}}public function fetchTweets($query,$count=100){try{$tweets=$this->twitter->get('search/tweets',['q'=>$query,'count'=>$count]);if($this->twitter->getLastHttpCode()===200){$processedTweets=[];foreach($tweets->statuses as $tweet){$processedTweets[]=['tweet_id'=>$tweet->id_str,'content'=>$tweet->text,'author'=>$tweet->user->screen_name,'created_at'=>$tweet->created_at,'url'=>"https://twitter.com/{$tweet->user->screen_name}/status/{$tweet->id_str}"];}foreach($processedTweets as $tweetData){$this->marketingModel->storeScrapedContent(['title'=>$tweetData['content'],'url'=>$tweetData['url'],'content'=>$tweetData['content'],'keywords'=>json_encode([$tweetData['author']]),'scraped_at'=>date('Y-m-d H:i:s')]);}return $processedTweets;}else{throw new \Exception('Failed to fetch tweets: '.$this->twitter->getLastBody());}}catch(\Throwable $th){log_message('error','Error fetching tweets: '.$th->getMessage());return[];}}public function generateContentFromTweets($tweets){$summary=$this->summarizeText(implode(' ',array_column($tweets,'content')));$keywords=$this->extractKeywords($summary);return['summary'=>$summary,'keywords'=>$keywords,'platform_content'=>$this->generatePlatformContent($summary,$keywords)];}public function generateFromTempScraper($limit=5){$records=$this->marketingModel->getLatestTempRecords($limit);if(empty($records)){log_message('info','No temp scraper records found to process.');return;}foreach($records as $record){try{log_message('debug','üß™ Processing record ID '.$record['id']);$summary=$this->generateContentFromRaw($record);if($summary){$this->marketingModel->markTempScraperProcessed($record['id']);log_message('info','‚úÖ Processed and stored content for record ID '.$record['id']);}else{log_message('warning','‚ö†Ô∏è Summary was null/empty for record ID '.$record['id']);}}catch(\Throwable $e){log_message('error','‚ùå Error generating content for record ID '.$record['id'].': '.$e->getMessage());}}}public function postToTwitter($content){try{$response=$this->twitter->post('statuses/update',['status'=>$content]);if($this->twitter->getLastHttpCode()===200){log_message('info','Successfully posted to Twitter: '.$content);return $response;}else{throw new \Exception('Failed to post to Twitter: '.json_encode($response));}}catch(\Throwable $th){log_message('error','Error posting to Twitter: '.$th->getMessage());return false;}}private function postToLinkedIn($message){try{$response=$this->linkedin->post('/people/~/shares',['comment'=>$message,'visibility'=>['code'=>'anyone']],$this->socialMedia->linkedin_access_token);return $response;}catch(Exception $e){$this->logger->error('LinkedIn API returned an error: '.$e->getMessage());return false;}}private function postToBlog($content){$client=new Client(['base_uri'=>$this->siteSettings->wordpress_site_url,]);try{$response=$client->post('/wp-json/wp/v2/posts',['auth'=>[$this->siteSettings->wordpress_username,$this->siteSettings->wordpress_password],'json'=>['title'=>substr($content,0,50),'content'=>$content,'status'=>'publish',],]);if($response->getStatusCode()==201){$this->logger->info('Posted to blog: '.$content);return json_decode($response->getBody(),true);}else{$this->logger->error('Failed to post to blog: '.$response->getBody());return false;}}catch(RequestException $e){$this->logger->error('Blog post request error: '.$e->getMessage());return false;}}public function distributeContentToSocialMedia($content){$twitterPost="ÔøΩ **Stock Market Highlights** ÔøΩ\n";$facebookPost="ÔøΩ **Market Movers Update** ÔøΩ\n";$linkedinPost="ÔøΩ **Today's Market Summary** ÔøΩ\n";$discordPost="ÔøΩ **TRADE ALERTS UPDATE!** ÔøΩ\n";foreach($content['expandedContent']as $post){$twitterPost.=$post."\n";$facebookPost.=$post."\n";$linkedinPost.=$post."\n";$discordPost.=$post."\n";}$this->postToTwitter($twitterPost);$this->postToFacebook($facebookPost);$this->postToLinkedIn($linkedinPost);$this->postToDiscord($discordPost);return['twitter'=>$twitterPost,'facebook'=>$facebookPost,'linkedin'=>$linkedinPost,'discord'=>$discordPost];}public function generateAndPostContent(){$emailSummaries=$this->marketingModel->getEmailSummariesForReview();foreach($emailSummaries as $summary){log_message('info','Generating content for email summary: '.$summary['email_subject']);$content=$this->generateMarketingContent($summary['summary']);log_message('debug','Generated content: '.print_r($content,true));$this->postToSocialMedia($content);$this->postToBlog($content);$this->marketingModel->updateEmailStatus($summary['email_identifier'],'Posted');log_message('info','Updated email status to Posted for: '.$summary['email_subject']);}}public function generateMarketingContent():void{$topStories=$this->marketingModel->getTopStories(10);$count=0;foreach($topStories as $story){if(empty(trim($story['title']?? ''))){log_message('debug','‚è≠ Skipped record ID '.$story['id'].' - no title provided.');continue;}if($count>=5){break;}$headline=$story['title'];$url=$story['source_url']?? '#';$summary=$this->generateSummary($story);$hashtags=$this->extractHashtags($story['title'].' '.$story['email_body']);$platformPosts=['discord'=>"**{$headline}**\n{$summary}\nüîó {$url}\n{$hashtags}",'twitter'=>"{$headline} {$url} {$hashtags}",'linkedin'=>"{$headline}\n{$summary}\nRead more: {$url} {$hashtags}",'facebook'=>"{$headline}\n{$summary}\n{$url} {$hashtags}",'email'=>['subject'=>$headline,'body'=>"{$summary}\n\nRead More: {$url}\n{$hashtags}",],];$this->marketingModel->storeGeneratedContent($story['id'],$platformPosts);$count++;}}private function logScrapeError($url,$error){log_message('error',"Scraping failed for URL: $url, Error: $error");}public function generateContentFromData($title,$content,$tags){$summary=$this->summarizeContent($content);return $title." - ".$summary." Tags: ".implode(', ',$tags);}public function generateContentFromScrapedData($scrapedData,$platform=null){if(empty($scrapedData)||!is_array($scrapedData)){log_message('error','‚ùå generateContentFromScrapedData() called with empty or invalid $scrapedData');return[];}$cleanedSummaries=[];foreach($scrapedData as $record){$rawContent=$record['content']?? '';$cleaned=$this->sanitizeRawEmailContent($rawContent);if(strlen($cleaned)<300||substr_count($cleaned,' ')<20){log_message('warning','[MyMIMarketing] Skipped record due to short or unstructured content (Title: '.($record['title']?? 'Untitled').')');continue;}try{$summaryData=$this->summarizeContent($cleaned);if(!is_array($summaryData)||empty($summaryData['summary'])){log_message('warning','‚ö†Ô∏è generateContentFromScrapedData(): Summary was null/empty for record title: '.($record['title']?? 'Untitled'));continue;}$headline=$this->generateHeadline($summaryData['summary']);$platformPosts=$this->generatePlatformContent($summaryData['summary'],$summaryData['tokens']??[]);$payload=['title'=>$record['title']?? $headline,'source'=>$record['url']?? 'unknown','summary'=>$summaryData['summary'],'keywords'=>$summaryData['tokens']??[],'headline'=>$headline,'platform_content'=>$platformPosts,'platform'=>$platform,'created_on'=>date("Y-m-d H:i:s"),];$this->marketingModel->storeGeneratedContent($record['id']?? null,$platformPosts);$cleanedSummaries[]=$payload;}catch(\Throwable $e){log_message('error','‚ùå Exception in generateContentFromScrapedData(): '.$e->getMessage());}}return $cleanedSummaries;}public function generateContentFromLargeText($content,$tags){if(empty($content)){log_message('error','Content is empty in generateContentFromLargeText.');return['summary'=>'','keywords'=>[],'platforms_content'=>[],];}$tokenizer=new WhitespaceTokenizer();$samples=[$tokenizer->tokenize($content)];log_message('debug','Tokenized samples: '.print_r($samples,true));if(empty($samples)||!isset($samples[0])||!is_array($samples[0])||empty($samples[0])){log_message('error','üö´ Empty or malformed document array before TF-IDF.');return['summary'=>'','keywords'=>[],'platforms_content'=>[],];}try{$tfidf=new TfIdfTransformer();$tfidf->fit($samples);$tfidf->transform($samples);log_message('debug','TfIdf transformation successful.');}catch(\Exception $e){log_message('error','TfIdfTransformer failed: '.$e->getMessage());return['summary'=>'','keywords'=>[],'platforms_content'=>[],];}$summary=$this->summarizeText($content);$keywords=$this->extractKeywords($content);$platforms_content=$this->generatePlatformContent($summary,$keywords);return['summary'=>$summary,'keywords'=>$keywords,'platforms_content'=>$platforms_content,];}public function generateCanvaVideo(){$scriptResponse=$this->generateVoiceoverScript();if(!$scriptResponse['status']==='success'){return $this->respond(['status'=>'error','message'=>'Voiceover script not found'],404);}$scriptText=$scriptResponse['script'];$canvaApiUrl="https://api.canva.com/v1/projects";$headers=['Authorization: Bearer YOUR_CANVA_API_KEY','Content-Type: application/json'];$payload=['title'=>'MyMI Trade Alerts Video','template'=>'YOUR_CANVA_TEMPLATE_ID','elements'=>['text'=>$scriptText,'voiceover'=>base_url('uploads/voiceover.mp3')]];$ch=curl_init($canvaApiUrl);curl_setopt($ch,CURLOPT_HTTPHEADER,$headers);curl_setopt($ch,CURLOPT_POST,true);curl_setopt($ch,CURLOPT_POSTFIELDS,json_encode($payload));curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);$response=curl_exec($ch);curl_close($ch);return $this->respond(['status'=>'success','message'=>'Video generated','video_url'=>json_decode($response)->video_url]);}public function generateEnhancedContent($voiceScript){$summary=$this->summarizeContent($voiceScript);$checkedContent=$this->spellCheckAndRefine($summary);$expandedContent=$this->contentGenerator($checkedContent);return['summary'=>$summary,'checkedContent'=>$checkedContent,'expandedContent'=>$expandedContent];}private function generatePrimaryContent($scrapedData){$content="";foreach($scrapedData as $data){$content.="Source: {$data['source']}\n";$content.="Title: {$data['title']}\n";$content.="Content: ".substr($data['content'],0,200)."...\n";$content.="Link: ".($data['url']?? 'N/A')."\n\n";}return $content;}public function generatePlatformContent($summary,$keywords,$mediaAssets=[]){$facebookContent="Facebook Post: ".$summary."\n\n"."Related: #".implode(' #',$keywords);$twitterContent="Twitter: ".substr($summary,0,280)."\n\n#".implode(' #',$keywords);$stocktwitsContent="StockTwits: ".substr($summary,0,250)."\n\n".implode(' ',$keywords);$discordContent="Discord: ".$summary."\n\nJoin the discussion! #".implode(' #',$keywords);$blogContent="Blog Post\n\n".$summary."\n\nKeywords: ".implode(', ',$keywords);$emailContent="Email Notification: ".$summary."\n\nRead more on our blog.";$browserNotificationContent="New Update: ".substr($summary,0,100)."... Click to learn more.";$tiktokScript=$this->generateTikTokScript($summary,$keywords,$mediaAssets);$youtubeScript=$this->generateYouTubeScript($summary,$keywords,$mediaAssets);return['Facebook'=>$facebookContent,'Twitter'=>$twitterContent,'StockTwits'=>$stocktwitsContent,'Discord'=>$discordContent,'Blog'=>$blogContent,'Email'=>$emailContent,'BrowserNotification'=>$browserNotificationContent,'TikTok'=>$tiktokScript,'YouTube'=>$youtubeScript];}public function generateSocialPost(array $summary):array{$text=$summary['summary']?? '';$keywords=$summary['keywords']??[];$hashtags=implode(' ',array_map(function($word){return '#'.ucfirst(trim($word));},array_slice($keywords,0,5)));return['twitter'=>substr("{$text} {$hashtags}",0,280),'facebook'=>"{$text}\n\n{$hashtags}",'linkedin'=>"{$text}\n\n#StayInformed {$hashtags}",'discord'=>"**News Summary:**\n{$text}\n\n{$hashtags}",];}private function generateSocialMediaContent($scrapedData){$facebookContent="Facebook: ";$twitterContent="Twitter: ";$linkedinContent="LinkedIn: ";foreach($scrapedData as $data){$facebookContent.=$data['title']." ".($data['url']?? '')."\n";$twitterContent.=$data['title']." ".($data['url']?? '')."\n";$linkedinContent.=$data['title']." ".($data['url']?? '')."\n";}return['Facebook'=>$facebookContent,'Twitter'=>$twitterContent,'LinkedIn'=>$linkedinContent,];}protected function generateSummary(array $story):string{return substr(strip_tags($story['email_body']?? ''),0,250).'...';}public function generateTikTokScript($summary,$keywords,$mediaAssets=[]){$hook="Did you know?";$cta="Follow us for more updates!";$mediaInclusion=!empty($mediaAssets)?"Include these images/videos: ".implode(", ",$mediaAssets):"";return"TikTok Video Script:\n1. Hook: \"{$hook}\"\n2. Summary: {$summary}\n3. Media: {$mediaInclusion}\n4. CTA: {$cta}";}public function generateYouTubeScript($summary,$keywords,$mediaAssets=[]){$hook="Breaking news in the world of finance...";$cta="Like, subscribe, and share for more updates!";$mediaInclusion=!empty($mediaAssets)?"Include these images/videos: ".implode(", ",$mediaAssets):"";return"YouTube Video Script:\n1. Hook: \"{$hook}\"\n2. Detailed Summary: {$summary}\n3. Media: {$mediaInclusion}\n4. CTA: {$cta}";}public function generateVoiceoverAudio($text){$client=new TextToSpeechClient();$input=new SynthesisInput();$input->setText($text);$voice=new VoiceSelectionParams();$voice->setLanguageCode('en-US');$voice->setSsmlGender('MALE');$audioConfig=new AudioConfig();$audioConfig->setAudioEncoding(AudioEncoding::MP3);$response=$client->synthesizeSpeech($input,$voice,$audioConfig);$audioContent=$response->getAudioContent();$filePath=WRITEPATH.'uploads/voiceover.mp3';file_put_contents($filePath,$audioContent);return base_url('uploads/voiceover.mp3');}public function generateVoiceoverScript(){$tradeAlerts=$this->alertsModel->getFilteredTradeAlerts(['start'=>date('Y-m-d 00:00:00'),'end'=>date('Y-m-d 23:59:59')])->get()->getResultArray();if(empty($tradeAlerts)){return $this->respond(['status'=>'error','message'=>'No trade alerts found for today.'],404);}$script="**Voiceover Script: MyMI Trade Alerts - Top Stock Movers**\n\n[INTRO]\n";$script.="Welcome to today‚Äôs MyMI Trade Alerts! We‚Äôre breaking down the hottest stocks in the market based on momentum, volume, and breakout potential. Let‚Äôs jump right in!\n\n";foreach($tradeAlerts as $alert){$script.="**[{$alert['ticker']} - {$alert['company']}]**\n";$script.="**Price:** \${$alert['price']}  |  **% Change:** {$alert['change']}%  |  **Volume:** {$alert['volume']}M\n";$script.="ÔøΩ 52-Week High: \${$alert['high']}  |  ÔøΩ 52-Week Low: \${$alert['low']}\n";$script.="Market Cap: {$alert['market_cap']}\n\n";}$script.="[OUTRO]\nThat‚Äôs it for today‚Äôs MyMI Trade Alerts! Don‚Äôt forget to like, subscribe, and stay tuned for more market insights. Drop your thoughts in the comments‚Äîwhat‚Äôs your top stock pick today? See you in the next update!\n";return $this->respond(['status'=>'success','script'=>$script]);}public function generateStockInformation($cuID){$MyMIInvestments=new MyMIInvestments();$investmentData=$MyMIInvestments->getInvestmentDashboard($cuID);$symbols=$this->getSymbolsByAssetType($investmentData['getSymbols']);$forecastData=[];$riskData=[];foreach($symbols as $type=>$symbolList){switch($type){case 'stocks':$forecastData['stocks']=$MyMIInvestments->performARIMAForecast($symbolList);$riskData['stocks']=$MyMIInvestments->generateRiskManagementTools($cuID,'stocks');break;case 'etfs':$forecastData['etfs']=$MyMIInvestments->performARIMAForecast($symbolList);$riskData['etfs']=$MyMIInvestments->generateRiskManagementTools($cuID,'etfs');break;case 'crypto':$forecastData['crypto']=$MyMIInvestments->performARIMAForecast($symbolList);$riskData['crypto']=$MyMIInvestments->generateRiskManagementTools($cuID,'crypto');break;}}$content=$this->generateContent($forecastData,$riskData);return $content;}private function getSymbolsByAssetType($symbols){$result=['stocks'=>[],'etfs'=>[],'crypto'=>[]];foreach($symbols as $symbol){if(preg_match('/^[A-Z]{1,5}$/',$symbol)){$result['stocks'][]=$symbol;}elseif(preg_match('/^[A-Z]{1,5}$/',$symbol)){$result['etfs'][]=$symbol;}else{$result['crypto'][]=$symbol;}}return $result;}private function generateContent($forecastData,$riskData){$content="";if(!empty($forecastData['stocks'])){$content.="### Stock Investment Forecast\n";foreach($forecastData['stocks']as $symbol=>$forecast){$content.="- **{$symbol}**: ".json_encode($forecast)."\n";}}if(!empty($forecastData['etfs'])){$content.="### ETF Investment Forecast\n";foreach($forecastData['etfs']as $symbol=>$forecast){$content.="- **{$symbol}**: ".json_encode($forecast)."\n";}}if(!empty($forecastData['crypto'])){$content.="### Crypto Investment Forecast\n";foreach($forecastData['crypto']as $symbol=>$forecast){$content.="- **{$symbol}**: ".json_encode($forecast)."\n";}}$content.="\n### Risk Management Insights\n";foreach($riskData as $type=>$riskMetrics){$content.="#### ".ucfirst($type)." Risks\n";foreach($riskMetrics as $riskMetric=>$details){$content.="- **{$riskMetric}**: ".json_encode($details)."\n";}}return $content;}public function getRecentPosts($limit=5){return $this->marketingModel->getRecentPosts($limit);}public function pullFinancialNews():void{$response=$this->client->get('https://www.marketaux.com/api/v1/news/all',['query'=>['api_token'=>getenv('marketaux.apiKey'),'language'=>'en','country'=>'us','published_after'=>date('Y-m-d\TH:i:s\Z',strtotime('-1 hour')),'limit'=>50,],]);$data=json_decode($response->getBody(),true);if(isset($data['data'])){foreach($data['data']as $story){$this->marketingModel->saveNews($story);}}}public function rankBufferCandidates(){$buffer=$this->marketingModel->fetchBufferPostsForScoring();foreach($buffer as $post){$keywords=$this->extractKeywords($post['summary']);$score=array_sum(array_column($keywords,'score'));$tagScore=min($score/10,10);$this->marketingModel->updateBufferItem($post['id'],['tag_score'=>$tagScore]);}}public function rankNewsArticles():void{$unrankedNews=$this->marketingModel->getUnrankedNews();foreach($unrankedNews as $news){$content=strtolower(($news['title']?? '').' '.($news['email_subject']?? '').' '.($news['email_body']?? ''));$words=str_word_count(strip_tags($content),1);$wordFreq=array_count_values($words);$filtered=array_filter($wordFreq,fn($freq,$word)=>strlen($word)>3&&$freq>1,ARRAY_FILTER_USE_BOTH);arsort($filtered);$score=array_sum(array_values($filtered));$topKeywords=array_slice(array_keys($filtered),0,5);$this->marketingModel->updateRankedNews($news['id'],$score,implode(',',$topKeywords));}}public function summarizeMultipleArticles(array $articles):string{$allContent='';foreach($articles as $article){$content=$article['content']?? '';$allContent.=strip_tags($content).' ';}if(empty(trim($allContent))){log_message('error','summarizeMultipleArticles() received empty content.');return 'No content available to summarize.';}$summaryData=$this->summarizeContent($allContent);return is_array($summaryData)&&isset($summaryData['summary'])?$summaryData['summary']:substr($allContent,0,300).'...';}} ?><?php namespace App\Models;use CodeIgniter\Model;use Phpml\FeatureExtraction\TfIdfTransformer;use Phpml\Tokenization\WhitespaceTokenizer;class MarketingModel extends Model{protected $table='bf_marketing_scraper';protected $primaryKey='id';protected $useAutoIncrement=true;protected $returnType='object';protected $useSoftDeletes=false;protected $allowedFields=['title','description','created_on','modified_on','status','type','day','time','activity','link','url','summary','content','email_identifier','email_date','email_sender','email_subject','email_body','email_attachments','keywords','scraped_at','links','images','videos','metadata','structured_data','sched_id','escalated','audience_type','stage','name','assigned_on','assigned_to','completed_on','scheduled_at','primary_content','secondary_content','html_content','voice_script','shared','shared_users','blog','in_app','email','discord','facebook','linkedin','telegram','twitter','website','promotional_links','facebook_message','linkedin_message','discord_message','stocktwits_message','tiktok_message','youtube_message','email_message','additional_info','image_paths'];protected $useTimestamps=true;protected $createdField='created_on';protected $updatedField='modified_on';public function addMarketingCampaign($campaignData){log_message('debug','MarketingModel L206 - $marketingData: '.(print_r($campaignData,true)));$dbData=['beta'=>$campaignData['beta'],'config_mode'=>$campaignData['config_mode'],'form_mode'=>$campaignData['form_mode'],'escalated'=>$campaignData['escalated'],'created_by'=>$campaignData['user_id'],'user_id'=>$campaignData['user_id'],'user_email'=>$campaignData['user_email'],'username'=>$campaignData['username'],'assigned_to'=>$campaignData['assigned_to'],'assigned_on'=>$campaignData['date'].' - '.$campaignData['time'],'name'=>$campaignData['campaign_name'],'promotional_links'=>$campaignData['promotionalLinks'],'overall_campaign_description'=>$campaignData['overall_campaign_description'],'voice_script'=>$campaignData['voice_script'],'facebook_message'=>$campaignData['facebookMessage'],'linkedin_message'=>$campaignData['linkedinMessage'],'discord_message'=>$campaignData['discordMessage'],'stocktwits_message'=>$campaignData['stocktwitsMessage'],'tiktok_message'=>$campaignData['tiktokMessage'],'youtube_message'=>$campaignData['youtubeMessage'],'email_message'=>$campaignData['emailMessage'],'additional_info'=>$campaignData['additionalInfo'],'hashtags'=>$campaignData['hashtags'],];log_message('debug','MarketingModel L206 - $marketingData: '.(print_r($dbData,true)));if($this->db->table('bf_marketing_campaigns')->insert($dbData)){log_message('info','Campaign created successfully.');return $this->getInsertID();}else{log_message('error','DB Insert Error: '.json_encode($this->errors()));return false;}}public function addMarketingSchedule($data){$data['zapier_webhook_url']=$data['zapier_webhook_url']?? null;$data['post_status']='pending';$this->db->table('bf_marketing_schedule')->insert($data);return $this->db->insertID();}public function addSubscriber($subscriberData){if($this->db->table('bf_users_subscribers')->insert($subscriberData)){log_message('info','Subscriber added successfully.');return true;}else{log_message('error','DB Insert Error: '.json_encode($this->errors()));return false;}}public function cleanHtmlEmailContent($raw):string{$raw=is_string($raw)?$raw:'';$decoded=quoted_printable_decode($raw);$decoded=is_string($decoded)?$decoded:'';$text=strip_tags($decoded);$text=preg_replace('/\s+/',' ',str_replace(["\r","\n","\t",'&nbsp;'],' ',$text));return trim(substr($text,0,5000));}public function copyMarketingCampaign($marketingData){unset($marketingData['id']);if($this->insert($marketingData)){log_message('info','Campaign copied successfully.');return $this->getInsertID();}else{log_message('error','DB Insert Error: '.json_encode($this->errors()));return false;}}public function countBlogs(){return $this->db->table('bf_marketing_blog_posts')->countAllResults();}public function countNewlyInsertedToday():int{return $this->where('DATE(scraped_at)',date('Y-m-d'))->countAllResults();}public function createSlug($title){$slug=url_title($title,'-',true);$existing=$this->db->table('bf_marketing_blog_posts')->where('slug',$slug)->countAllResults();return $existing?$slug.'-'.uniqid():$slug;}public function deleteMarketingCampaign($id){if($this->delete($id)){log_message('info','Campaign deleted successfully.');return true;}else{log_message('error','DB Delete Error: '.json_encode($this->errors()));return false;}}public function deleteSchedule($id){return $this->db->table('bf_marketing_schedule')->where('id',$id)->delete();}public function editMarketingCampaign($marketingData){if($this->update($marketingData['id'],$marketingData)){log_message('info','Campaign updated successfully.');return true;}else{log_message('error','DB Update Error: '.json_encode($this->errors()));return false;}}public function extractKeywords($text){if(empty($text)||strlen(trim($text))<50){return[];}$tokenizer=new WhitespaceTokenizer();$tokens=array_filter($tokenizer->tokenize($text));if(empty($tokens)){return[];}$documents=[$tokens];$tfidf=new TfIdfTransformer();try{$tfidf->transform($documents);}catch(\Exception $e){log_message('error','TfIdfTransformer failed: '.$e->getMessage());return[];}$keywordScores=[];foreach($documents[0]as $word=>$score){$keywordScores[$word]=$score;}arsort($keywordScores);return array_slice(array_keys($keywordScores),0,10);}public function fetchBufferPaginated($page=1,$limit=20){$offset=($page-1)*$limit;$builder=$this->db->table('bf_marketing_buffer')->where('status !=','promoted')->orderBy('tag_score','DESC')->limit($limit,$offset);$results=$builder->get()->getResultArray();$total=$this->db->table('bf_marketing_buffer')->where('status !=','promoted')->countAllResults();return['data'=>$results,'pagination'=>['page'=>$page,'pages'=>ceil($total/$limit),]];}public function fetchBufferPaginatedWithFilters(array $params=[]){$page=$params['page']?? 1;$limit=$params['limit']?? 20;$offset=($page-1)*$limit;$keyword=$params['keyword']?? null;$category=$params['category']?? null;$minTagScore=$params['min_tag_score']?? 0;$onlySuggested=$params['only_suggested']?? false;$builder=$this->db->table('bf_marketing_buffer')->where('status !=','promoted');if(!empty($keyword)){$builder->like('keyword',$keyword);}if(!empty($category)){$builder->where('category',$category);}if(!empty($minTagScore)){$builder->where('tag_score >=',$minTagScore);}if($onlySuggested){$builder->where('auto_suggest',1);}$totalQuery=clone $builder;$total=$totalQuery->countAllResults(false);$results=$builder->orderBy('tag_score','DESC')->limit($limit,$offset)->get()->getResultArray();return['data'=>$results,'pagination'=>['page'=>$page,'limit'=>$limit,'pages'=>ceil($total/$limit),'total'=>$total,],];}public function fetchBufferPostsForReview($limit=25){return $this->db->table('bf_marketing_buffer')->orderBy('created_on','DESC')->limit($limit)->get()->getResultArray();}public function getBufferItem($id){return $this->db->table('bf_marketing_buffer')->where('id',$id)->get()->getRowArray();}public function getPendingAutoSuggested($limit=5){return $this->db->table('bf_marketing_buffer')->where('status','pending')->where('auto_suggest',1)->orderBy('tfidf_score','DESC')->limit($limit)->get()->getResultArray();}public function getPendingScheduledPosts($currentTimestamp){return $this->db->table('bf_marketing_schedule')->where('post_time <=',$currentTimestamp)->where('post_status','pending')->get()->getResult();}public function getPendingScraperSummaries($limit=10){return $this->db->table('bf_marketing_scraper')->where('status',null)->orWhere('status','')->orderBy('created_on','DESC')->limit($limit)->get()->getResultArray();}public function getProcessedEmails($date=null){$builder=$this->select('email_identifier');if($date){$builder->where('DATE(email_date)',$date);}$results=$builder->get()->getResultArray();$identifiers=[];foreach($results as $row){if(!empty($row->email_identifier)){$identifiers[]=$row->email_identifier;}}return $identifiers;}public function findBufferItem($id){return $this->db->table('bf_marketing_buffer')->where('id',$id)->get()->getRowArray();}public function findFinalizedById($id){return $this->db->table('bf_marketing_scraper')->where('id',$id)->get()->getRowArray();}public function getActiveCampaigns(){$builder=$this->db->table('bf_marketing_campaigns');$num_rows=$builder->where('status',1)->countAllResults(false);$result=$builder->where('status',1)->get()->getResultArray();return['result'=>$result,'num_rows'=>$num_rows];}public function getActiveIdeas(){return $this->db->table('bf_marketing_ideas')->where('status !=','approved')->get()->getResultArray();}public function getActivePriorityCampaigns(){$builder=$this->db->table('bf_marketing_campaigns');$num_rows=$builder->where('status',1)->where('escalated',1)->countAllResults(false);$result=$builder->where('status',1)->where('escalated',1)->get()->getResultArray();return['result'=>$result,'num_rows'=>$num_rows];}public function getApprovedBufferWithoutSchedule(){return $this->db->table('bf_marketing_buffer')->where('status','approved')->where('scheduled_at IS NULL',null,false)->where('schedule_interval >',0)->orderBy('tag_score','DESC')->limit(10)->get()->getResultArray();}public function getApprovedLogos(){return $this->db->table('bf_company_logos')->get()->getResultArray();}public function getBlogPostBySlug($slug){return $this->db->table('bf_marketing_blog_posts')->where('slug',$slug)->get()->getRow();}public function getBlogPostDetails($id){return $this->find($id);}public function getBlogPosts(){return $this->where('type','Email/Newsletters')->limit(50)->get()->getResultArray();}public function getBlogs(){return $this->db->table('bf_marketing_blog_posts')->orderBy('created_on','DESC')->get()->getResult();}public function getBufferItems($limit=50){return $this->builder()->where('status','pending')->orderBy('score','DESC')->limit($limit)->get()->getResultArray();}public function getCampaignById($campaign_id){return $this->db->table('bf_marketing_campaigns')->where('id',$campaign_id)->get()->getResultArray();}public function getCampaignsBySchedId($accountid){return $this->db->table('bf_marketing_campaigns')->where('sched_id',$accountid)->get()->getResultArray();}public function getDailyLogsByDate($date){return $this->db->table('bf_marketing_scraper')->where('DATE(created_on)',$date)->get()->getResult();}public function getEmailRecordById($id){return $this->db->table('bf_marketing_temp_scraper')->where('id',$id)->get()->getRowArray();}public function getEmailByMessageId($messageId){return $this->db->table('bf_marketing_temp_scraper')->where('email_identifier',$messageId)->get()->getRowArray();}public function getEmailContentsForNewsletter(){return $this->where('include_newsletter',false)->limit(50)->get()->getResultArray();}public function getEmailsMissingTitleOrUrl($limit=20){return $this->db->table('bf_marketing_temp_scraper')->where('(title IS NULL OR title = "" OR url IS NULL OR url = "")',null,false)->orderBy('date_scraped','DESC')->limit($limit)->get()->getResultArray();}public function getEmailSummariesForReview(){return $this->where('status','In Review')->limit(50)->get()->getResultArray();}public function getExchangeTokenById($id){return $this->db->table('bf_exchanges_assets')->where('id',$id)->get()->getRowArray();}public function getExistingLogoBySymbol($symbol){return $this->db->table('bf_company_logos')->where('symbol',$symbol)->get()->getRow();}public function getFeatures(){return $this->db->table('bf_users_memberships')->where('active',1)->orderBy('feature_level','ASC')->orderBy('feature_name','ASC')->get()->getResultArray();}public function getGeneratedContent($postId){return $this->db->table('bf_marketing_campaigns')->where('sched_id',$postId)->get()->getRowArray();}public function getGeneratedPostsBySourceId($id){$row=$this->db->table('bf_marketing_scraper')->where('source_id',$id)->get()->getRowArray();if(!$row||empty($row['platforms']))return[];$decoded=json_decode($row['platforms'],true);if(!is_array($decoded))return[];return $decoded;}public function getLatestGeneratedSummaries($limit=25){return $this->db->table('bf_marketing_scraper')->orderBy('created_on','DESC')->limit($limit)->get()->getResultArray();}public function getLatestNewsletterDraft(){return $this->db->table('bf_marketing_newsletters')->orderBy('created_at','DESC')->first();}public function getLatestTempRecords($limit=5){return $this->db->table('bf_marketing_temp_scraper')->where('status','In Review')->orderBy('created_on','DESC')->limit($limit)->get()->getResultArray();}public function getLatestUnprocessedEmails($limit=10){return $this->db->table('bf_marketing_temp_scraper')->where('status','In Review')->orderBy('scraped_at','DESC')->limit($limit)->get()->getResultArray();}public function getMarketingBuffer($status='Pending'){return $this->builder()->where('status',$status)->orderBy('created_at','DESC')->get()->getResultArray();}public function getMarketingPageSeoByName($pageTitle){return $this->where('page_name',$pageTitle)->get()->getResultArray();}public function getMarketingTeam(){$result=$this->db->table('bf_management_positions')->where('department','Marketing')->get()->getResultArray();return $result;}public function getNewsArticles(){$result=$this->select('articles_json')->first();return json_decode($result->articles_json ?? '[]',true);}public function getNewEmails(){return $this->db->table('bf_marketing_raw_emails')->where('status','unprocessed')->get()->getResultArray();}public function getNewsPosts(){return $this->where('type','news_post')->limit(50)->get()->getResultArray();}public function getNextScheduledPost(){return $this->db->table('bf_marketing_buffer')->where('status','approved')->where('tag_score >=',7.0)->orderBy('tag_score','DESC')->limit(1)->get()->getRowArray();}public function getRecentPosts($limit=5){$results=$this->asObject()->select("id, title, category, created_at, blog_content")->orderBy('created_at','DESC')->limit($limit)->findAll();log_message('info','MarketingModel L437 - $result Array: '.(print_r($results,true)));foreach($results as $r){$r->short_description=substr(strip_tags($r->blog_content ?? 0),0,150);}return $results;}public function getRecentScrapes(){return $this->db->table('bf_marketing_temp_scraper')->orderBy('scraped_at','DESC')->limit(5)->get()->getResult();}public function getRecentSummaries($limit=5){return $this->db->table('bf_marketing_scraper')->select('id, title, summary, keywords, scraped_at')->where("CHAR_LENGTH(summary) >=",100)->where("summary LIKE",'% % % % % % % % % %')->orderBy('created_on','DESC')->limit($limit)->get()->getResultArray();}public function getRecentUnprocessedTempEmails($limit=5){return $this->db->table('bf_marketing_temp_scraper')->where('status','In Review')->orderBy('id','DESC')->limit($limit)->get()->getResultArray();}public function getScheduledBufferPosts($timestamp){return $this->db->table('bf_marketing_buffer')->where('status','approved')->where('scheduled_at <=',$timestamp)->orderBy('scheduled_at','ASC')->limit(3)->get()->getResultArray();}public function getScheduledCampaigns(){return $this->db->table('bf_marketing_newsletters')->where('status','scheduled')->where('scheduled_date <=',date('Y-m-d H:i:s'))->get()->getResultArray();}public function getScheduleByDay($day){return $this->db->table('bf_marketing_calendar')->where('day',ucfirst($day))->get()->getResultArray();}public function getScheduleById($id){return $this->db->table('bf_marketing_schedule')->where('id',$id)->get()->getRow();}public function getScrapesByDate($date){return $this->db->table('bf_marketing_temp_scraper')->where('DATE(scraped_at)',$date)->orderBy('scraped_at','DESC');if($limit){$builder->limit($limit);}return $builder->get()->getResultArray();}public function getScrapesByKeyword($keyword){return $this->db->table('bf_marketing_scraper')->like('summary',$keyword)->orLike('keywords',$keyword)->orderBy('created_on','DESC')->limit(10)->get()->getResultArray();}public function getTodaysNewsContent($limit=10){$builder=$this->db->table('bf_marketing_temp_scraper')->where('DATE(scraped_at)',date('Y-m-d'))->where('type !=','todays_story')->orderBy('scraped_at','DESC')->limit($limit);$query=$builder->get();$results=$query->getResultArray();if(empty($results)){log_message('info','No scraped content found for today.');}return $results;}public function getTodaysScrapedContent(){return $this->db->table('bf_marketing_temp_scraper')->where('DATE(scraped_at)',date('Y-m-d'))->orderBy('feature_score','DESC')->get()->getResultArray();}public function getTodaysStory(){return $this->db->table('bf_marketing_temp_scraper')->where('type','todays_story')->where('DATE(scraped_at)',date('Y-m-d'))->orderBy('scraped_at','DESC')->get()->getRowArray();}public function getTopBufferPosts($limit=5,$minTagScore=7.5){return $this->builder('bf_marketing_buffer')->where('status','approved')->where('tag_score >=',$minTagScore)->orderBy('tag_score','DESC')->limit($limit)->get()->getResultArray();}public function getTopStories($limit=10){return $this->db->table('bf_marketing_scraper')->where('status','pending')->where('title IS NOT NULL')->where('title !=','')->orderBy('feature_score','DESC')->limit($limit)->get()->getResultArray();}public function getTopTempRecords($limit=5){return $this->db->table('bf_marketing_temp_scraper')->where('title IS NOT NULL')->orderBy('created_at','desc')->limit($limit)->get()->getResultArray();}public function getUpcomingSchedule(){return $this->db->table('bf_marketing_schedule')->select('id, post_date, completed, GROUP_CONCAT(DISTINCT platform ORDER BY platform ASC SEPARATOR ", ") as platforms, MIN(content_subject) as subjects, MIN(content_description) as descriptions')->where('post_date >=',date('Y-m-d'))->groupBy('post_date')->orderBy('post_date','ASC')->get()->getResultArray();}public function getUpcomingEarnings(){$builder=$this->db->where('bf_investment_calendar')->where('date >=',date('Y-m-d'))->where('event_type','Earnings')->orderBy('date','ASC')->get()->getResultArray();log_message('debug','MarketingModel L211 - getUpcomingEvents $builder Array: '.(print_r($builder,true)));return $builder;}public function getValidUnprocessedEmails($limit=10){$builder=$this->db->table('bf_marketing_temp_scraper');$builder->where('processed',0);$builder->limit($limit*2);$query=$builder->get();$results=$query->getResultArray();$valid=[];foreach($results as $row){$id=$row['id'];if(empty($row['title'])){log_message('debug',"ü™ì Skipping record ID {$id} ‚Äî Missing title.");continue;}if(empty($row['content'])||strlen(strip_tags($row['content']))<100){log_message('debug',"ü™ì Skipping record ID {$id} ‚Äî Content empty or too short.");continue;}$textContent=strip_tags($row['content']);$htmlRatio=strlen($textContent)/strlen($row['content']?? '');if($htmlRatio<0.3){log_message('debug',"ü™ì Skipping record ID {$id} ‚Äî HTML-dominant content ({$htmlRatio}).");continue;}$valid[]=$row;if(count($valid)>=$limit){break;}}return $valid;}public function getValidUnprocessedEmailsFromToday($limit=10){return $this->db->table('bf_marketing_temp_scraper')->where('DATE(scraped_at)',date('Y-m-d'))->where('content IS NOT NULL',null,false)->where('title IS NOT NULL',null,false)->where('CHAR_LENGTH(content) >',250)->orderBy('id','DESC')->limit($limit)->get()->getResultArray();}public function incrementRetryCount($id){return $this->db->table('bf_marketing_schedule')->where('id',$id)->set('retry_count','retry_count + 1',false)->update(['last_attempt_at'=>date('Y-m-d H:i:s')]);}public function insertBufferItem(array $summary){$MyMIMarketing=new \App\Libraries\MyMIMarketing();$scoreData=$MyMIMarketing->getTopKeywordScores($summary['summary']);$threshold=getenv('MARKETING_TFIDF_THRESHOLD')?:7.5;$bufferRecord=['keyword'=>$scoreData['top_keyword']?? 'general','summary'=>$summary['summary'],'score'=>$scoreData['score']?? 0,'tag_score'=>$scoreData['tag_score']?? 0,'category'=>$scoreData['category']?? 'Uncategorized','status'=>'pending','tfidf_score'=>$scoreData['tfidf_score']?? 0,'auto_suggest'=>($scoreData['tfidf_score']?? 0)>=$threshold?1:0,'platforms'=>json_encode(['discord'=>true,'linkedin'=>true,'x'=>false,'email'=>false,]),'created_at'=>date('Y-m-d H:i:s'),];return $this->insert($bufferRecord);}public function insertFinalScraper(array $record,array $summary){$data=['source_id'=>$record['id'],'title'=>$record['title']?? '(No Title)','summary'=>$summary['summary']?? '','keywords'=>json_encode($summary['keywords']??[]),'platforms'=>json_encode($summary['posts']??[]),'status'=>'ready','created_on'=>date('Y-m-d H:i:s'),];return $this->db->table('bf_marketing_scraper')->insert($data);}public function insertNewsContent(array $newsItem,string $ticker){$data=['title'=>$newsItem['title']?? '','summary'=>$newsItem['summary']?? '','content'=>$newsItem['content']?? '','type'=>'financial_news','status'=>'Published','created_on'=>date('Y-m-d H:i:s'),'modified_on'=>date('Y-m-d H:i:s'),'scraped_at'=>date('Y-m-d H:i:s'),'keywords'=>json_encode($newsItem['keywords']??[]),'links'=>json_encode($newsItem['links']??[]),'audience_type'=>'investor','activity'=>$ticker,];return $this->db->table('bf_marketing_scraper')->insert($data);}public function insertTempScraper($data){return $this->db->table('bf_marketing_temp_scraper')->insert($data);}public function idleFetchEmails(){$config=config('NewsEmailServer');$connectionString="{$config->host}:{$config->port}/imap/{$config->encryption}";$inbox=@imap_open($connectionString,$config->username,$config->password);if(!$inbox){log_message('error','Cannot connect to email server: '.imap_last_error());return;}try{while(true){if(function_exists('imap_idle')){$status=imap_idle($inbox);}else{log_message('warning','üì≠ imap_idle not supported on this server. Falling back to polling.');sleep(30);continue;}$status=imap_idle($inbox);if($status){$emails=imap_search($inbox,'ALL');if($emails){foreach($emails as $email_number){$overview=imap_fetch_overview($inbox,$email_number,0)[0];$sender=$overview->from;$subject=$overview->subject;$body=imap_fetchbody($inbox,$email_number,1);$data=['status'=>'In Review','type'=>'Email/Newsletters','email_identifier'=>md5($subject.$sender.$overview->date),'email_date'=>date('Y-m-d H:i:s',strtotime($overview->date)),'email_sender'=>$sender,'email_subject'=>$subject,'email_body'=>$body,'created_on'=>date('Y-m-d H:i:s'),'modified_on'=>date('Y-m-d H:i:s'),];if($this->isEmailProcessed($data['email_identifier'])){log_message('debug','Email already processed: '.$data['email_identifier']);}else{$this->storeEmailContent($data);}}}else{log_message('debug','No new emails found or imap_search returned false');}}sleep(30);}}catch(\Exception $e){log_message('error','An exception occurred during email fetching: '.$e->getMessage());}finally{imap_close($inbox);}}public function isEmailProcessed($emailIdentifier){return $this->where('email_identifier',$emailIdentifier)->countAllResults()>0;}private function mapToContextualHashtags($keywords){return array_map(fn($keyword)=>'#'.preg_replace('/\s+/','',ucfirst($keyword)),$keywords);}public function markEmailsAsProcessed($ids=[]){if(!empty($ids)){return $this->db->table('bf_marketing_temp_scraper')->whereIn('id',$ids)->update(['status'=>'Processed']);}return false;}public function markTempRecordAsProcessed($id){return $this->db->table('bf_marketing_temp_scraper')->where('id',$id)->update(['status'=>'Processed','updated_at'=>date('Y-m-d H:i:s')]);}public function markTempScraperProcessed($id){$this->db->table('bf_marketing_temp_scraper')->where('id',$id)->update(['status'=>'Processed']);}public function processText($emailBody){$summary=$this->summarizeText($emailBody);$keywords=$this->extractKeywords($emailBody);$hashtags=$this->mapToContextualHashtags($keywords);if(empty($summary)||empty($hashtags)){log_message('error','Text processing failed');return false;}return $summary.' '.implode(' ',$hashtags);}public function saveApprovedLogo($symbol,$imageUrl){$symbol=strtoupper(trim($symbol));$data=['symbol'=>$symbol,'image_url'=>$imageUrl,'approved_at'=>date('Y-m-d H:i:s'),'updated_at'=>date('Y-m-d H:i:s'),];try{$existingLogo=$this->db->table('bf_company_logos')->where('symbol',$symbol)->get()->getRow();if($existingLogo){if($existingLogo->image_url!==$imageUrl){$this->db->table('bf_company_logos')->where('symbol',$symbol)->update($data);log_message('info',"Logo for symbol {$symbol} updated in bf_company_logos.");}else{log_message('info',"Logo for symbol {$symbol} already exists and is up to date.");}}else{$this->db->table('bf_company_logos')->insert($data);log_message('info',"Logo for symbol {$symbol} added to bf_company_logos.");}}catch(\Exception $e){log_message('error',"Failed to save or update logo for symbol {$symbol}: ".$e->getMessage());}}public function saveDailyLog($data){return $this->db->table('bf_marketing_scraper')->insert($data);}public function saveLogo($data){$symbol=strtoupper(trim($data['symbol']));$existing=$this->db->table('bf_company_logos')->where('symbol',$symbol)->get()->getRow();$data['symbol']=$symbol;$data['updated_at']=date('Y-m-d H:i:s');if($existing){$this->db->table('bf_company_logos')->where('symbol',$symbol)->update($data);log_message('info',"Logo for symbol {$symbol} updated in bf_company_logos.");}else{$data['created_at']=date('Y-m-d H:i:s');$this->db->table('bf_company_logos')->insert($data);log_message('info',"Logo for symbol {$symbol} added to bf_company_logos.");}}public function scheduleNewsletterCampaign($data){return $this->db->table('bf_marketing_newsletters')->insert($data);}public function storeContentAnalytics(array $data){return $this->db->table('bf_marketing_analysis')->insert($data);}public function storeEmail($data){return $this->db->table('bf_marketing_temp_scraper')->insert($data);}public function storeEmailContent($data){return $this->insert($data);}public function storeFinalMarketingContent($data){return $this->db->table('bf_marketing_scraper')->insert($data);}public function storeTodaysStory($title,$content){$data=['title'=>$title,'content'=>$content,'links'=>json_encode([]),'url'=>'','type'=>'todays_story','scraped_at'=>date('Y-m-d H:i:s'),'created_on'=>date('Y-m-d H:i:s'),'modified_on'=>date('Y-m-d H:i:s'),];return $this->db->table('bf_marketing_temp_scraper')->insert($data);}public function submitCampaignContent($data){if(isset($data['promotional_links'])&&is_array($data['promotional_links'])){$data['promotional_links']=json_encode($data['promotional_links']);}$data['status']=$data['status']?? 1;$data['stage']=$data['stage']?? 'draft';$data['created_on']=date('Y-m-d H:i:s');return $this->save($data);}public function storeNewsletterDraft($data){return $this->db->table('bf_marketing_newsletters')->insert($data);}public function storeNotification($data){return $this->db->table('bf_users_promotional_messages')->insert($data);}public function storeScrapedContent($data){return $this->db->table('bf_marketing_temp_scraper')->insert($data);}public function storeTempScrapedData($data){return $this->db->table('bf_marketing_temp_scraper')->insert($data);}public function summarizeText($text){if(empty($text)){return '';}$sentences=explode('.',$text);if(count($sentences)<=1){return substr($text,0,200);}$tokenizer=new WhitespaceTokenizer();$documents=array_map([$tokenizer,'tokenize'],$sentences);$documents=array_filter($documents);if(empty($documents)){return '';}$tfidf=new TfIdfTransformer();try{$tfidf->transform($documents);}catch(\Exception $e){log_message('error','TfIdfTransformer failed: '.$e->getMessage());return '';}$sentenceScores=[];foreach($documents as $index=>$document){$sentenceScores[$index]=array_sum($document);}arsort($sentenceScores);$numSentences=min(5,count($sentenceScores));$summarySentences=array_slice(array_keys($sentenceScores),0,$numSentences);return implode('. ',array_intersect_key($sentences,array_flip($summarySentences)));}public function updateBufferItem($id,$data){return $this->db->table('bf_marketing_buffer')->where('id',$id)->update($data);}public function updateBufferStatus($id,$status){return $this->db->table('bf_marketing_buffer')->where('id',$id)->update(['status'=>$status]);}public function updateCampaignStatus($id,$status){return $this->db->table('bf_marketing_newsletters')->where('id',$id)->update(['status'=>$status]);}public function updateEmailFields($id,$title,$url,$content=null){$data=['title'=>$title,'url'=>$url];if(!empty($content)){$data['content']=$content;}return $this->db->table('bf_marketing_temp_scraper')->where('id',$id)->update($data);}public function updateExchangeToken($id,$data){return $this->update($id,$data);}public function updateNotification($data){return $this->db->table('bf_users_promotional_messages')->update($data);}public function updateSchedule($id,$data){return $this->db->table('bf_marketing_schedule')->where('id',$id)->update($data);}public function updatePostStatus($id,$status){return $this->db->table('bf_marketing_schedule')->where('id',$id)->update(['post_status'=>$status,'last_attempt_at'=>date('Y-m-d H:i:s')]);}} ?><?php namespace App\Services;use App\Libraries\{BaseLoader,MyMIMarketing};use App\Models\{MarketingModel};use GuzzleHttp\Client;class MarketingService{use BaseLoader;protected $MyMIMarketing;protected $marketingModel;protected $httpClient;public function __construct(){$this->MyMIMarketing=new MyMIMarketing();$this->marketingModel=new MarketingModel();$this->httpClient=new Client(['timeout'=>5,'stream'=>true,'http_errors'=>false,'headers'=>['User-Agent'=>'MyMI Content Bot','Accept-Encoding'=>'gzip, deflate, br',]]);}public function distributeContent($platform,$message){switch($platform){case 'discord':return $this->sendToDiscordWebhook($message);case 'facebook':return $this->sendToZapier('facebook',$message);case 'linkedin':return $this->sendToZapier('linkedin',$message);default:return false;}}public function extractTopKeywords($summary){return $this->getMyMIMarketing()->extractKeywords($summary['summary']);}public function fetchUnprocessedEmailSummaries(){return $this->getMyMIMarketing()->getEmailSummariesForReview();}public function getEmailRecordById($id){return $this->marketingModel->getEmailRecordById($id);}public function getFeatures(){$getFeatures=$this->getMyMIMarketing()->getFeatures();return $getFeatures;}public function gatherKeywordBasedContent($keywords){$allContent=[];foreach($keywords as $keyword){$secData=$this->getMyMIMarketing()->scrapeGoogleSearch("SEC filings {$keyword}");$alphaVantageData=$this->getMyMIMarketing()->scrapeGoogleSearch("AlphaVantage {$keyword}");$googleData=$this->getMyMIMarketing()->scrapeGoogleSearch($keyword,$this->httpClient);$internalData=$this->getMyMIMarketing()->getScrapesByKeyword($keyword);$allContent[]=array_merge([$secData],[$alphaVantageData],[$googleData],$internalData);}return $allContent;}public function generateContentFromPost($title,$content,$tags){$summaryData=$this->getMyMIMarketing()->summarizeContent($content);if(empty($summaryData)||empty($summaryData['summary'])){log_message('error','generateContentFromPost() failed to generate summary.');return null;}return $this->getMyMIMarketing()->generatePlatformContent($summaryData['summary'],$tags);}public function generateFinalContentFromTemp(){$records=$this->marketingModel->getTopTempRecords(5);foreach($records as $record){if(empty($record['title'])||empty($record['content']))continue;$summary=$this->summarizeContent($record['content']);$socialMediaPost=$this->generateSocialPost($summary);$final=['title'=>$record['title'],'content'=>$summary,'post_text'=>$socialMediaPost,'source'=>'email','created_at'=>date('Y-m-d H:i:s'),];$this->marketingModel->insertFinalScraper($final);}}public function generatePlatformPosts($content){$summaryText=implode(" ",array_column($content,'content'));return $this->getMyMIMarketing()->generateContentFromLargeText($summaryText,[]);}public function getManagementTeam(){$getManagementTeam=$this->getMyMIMarketing()->getManagementTeam();return $getManagementTeam;}public function getMarketingData($accountid,$category,$platform){$data=[];if($category&&$accountid){$scrapedData=$this->getMyMIMarketing()->scrapeTokenContentByAccountId($accountid);if($scrapedData){$data['generatedData']=$this->getMyMIMarketing()->generateContentFromScrapedData($scrapedData,$platform);}else{$data['generatedData']=[];}}return $data;}public function getPromotionalBanners($userId){return $this->getMyMIMarketing()->fetchPromotionalBanners($userId);}public function getRecentGeneratedContent($limit=10){return $this->db->table('bf_marketing_scraper')->orderBy('created_on','DESC')->limit($limit)->get()->getResultArray();}public function regeneratePostsFromEmailId($id){$record=$this->getEmailRecordById($id);if(!$record||empty($record['content'])){log_message('error',"‚ùå Email record not found or empty for ID: $id");return null;}$processed=$this->getMyMIMarketing()->generateContentFromRaw($record);if($processed){$this->marketingModel->insertFinalScraper($record,$processed);$this->marketingModel->markEmailsAsProcessed([$id]);return $processed;}return null;}public function sanitizeAndSummarize($content){$cleanedBody=$this->marketingModel->cleanHtmlEmailContent($content);return $this->getMyMIMarketing()->summarizeContent($cleanedBody);}public function storeGeneratedPostsForDashboard($posts){$this->getMyMIMarketing()->storeGeneratedContent(['primary_content'=>$posts['summary'],'social_media_content'=>json_encode($posts['platforms_content']),'status'=>'Generated','created_on'=>date('Y-m-d H:i:s'),]);}protected function sendToDiscordWebhook($message){$webhook=getenv('DISCORD_WEBHOOK_URL');if(!$webhook)return false;$client=\Config\Services::curlrequest();$payload=['content'=>$message];$response=$client->post($webhook,['json'=>$payload]);return $response->getStatusCode()===204;}protected function sendToZapier($platform,$message){$zapierHooks=['facebook'=>getenv('ZAPIER_FACEBOOK_WEBHOOK'),'linkedin'=>getenv('ZAPIER_LINKEDIN_WEBHOOK'),];$hook=$zapierHooks[$platform]?? null;if(!$hook)return false;$client=\Config\Services::curlrequest();$payload=['message'=>$message,'platform'=>$platform];$response=$client->post($hook,['json'=>$payload]);return $response->getStatusCode()===200;}public function storeScrapedContent($content){foreach($content as $data){$this->getMyMIMarketing()->storeTempScrapedData(['title'=>$data['title'],'content'=>$data['content'],'scraped_at'=>date('Y-m-d H:i:s'),'type'=>'keyword_summary',]);}}} ?><?php namespace App\Modules\APIs\Controllers;use CodeIgniter\Controller;use App\Modules\APIs\Controllers\MarketingController;use App\Libraries\{BaseLoader,MyMIAlerts,MyMIMarketing};use App\Models\{AlertsModel,ExchangeModel,MarketingModel,ReferralModel,SupportModel,UserModel};use App\Services\{MarketingService};use CodeIgniter\API\ResponseTrait;class ManagementController extends UserController{use BaseLoader;use ResponseTrait;protected $alertManager;protected $MyMIMarketing;protected $marketingService;protected $alertsModel;protected $exchangeModel;protected $marketingModel;protected $userModel;protected $referralModel;protected $supportModel;public function __construct(){$this->alertManager=new MyMIAlerts();$this->MyMIMarketing=new MyMIMarketing();$this->alertsModel=new AlertsModel();$this->exchangeModel=new ExchangeModel();$this->marketingModel=new MarketingModel();$this->marketingService=new MarketingService();$this->referralModel=new ReferralModel();$this->supportModel=new SupportModel();$this->userModel=new UserModel();}public function runCRONTasks(){log_message('info','üõ†Ô∏è ManagementController::runCRONTasks() initiated.');$marketingController=new MarketingController();log_message('info','üìå Step 1: cronFetchAndGenerateNews()');try{$marketingController->cronFetchAndGenerateNews();}catch(\Throwable $e){log_message('error','‚ùå cronFetchAndGenerateNews failed: '.$e->getMessage());}log_message('info','üìå Step 3: generateDailyContentDigest()');try{$todayNews=$this->marketingModel->getTodaysScrapedContent();if(!empty($todayNews)){$marketingController->generateDailyContentDigest();}else{log_message('info','üõë Skipping summary generation ‚Äî no scraped news available today.');}}catch(\Throwable $e){log_message('error','‚ùå generateDailyContentDigest() failed: '.$e->getMessage());}log_message('info','üìå Step 4: cronFetchInbox()');try{$marketingController->cronFetchInbox();}catch(\Throwable $e){log_message('error','‚ùå cronFetchInbox() failed: '.$e->getMessage());}log_message('info','üìå Step 5: cronAnalyzeContent()');try{$marketingController->cronAnalyzeContent();}catch(\Throwable $e){log_message('error','‚ùå cronAnalyzeContent() failed: '.$e->getMessage());}log_message('info','üìå Step 6: reprocessIncompleteEmails()');try{$marketingController->runBackfillForTempEmails();}catch(\Throwable $e){log_message('error','‚ùå reprocessIncompleteEmails() failed: '.$e->getMessage());}log_message('info','‚úÖ ManagementController::runCRONTasks() completed.');}public function ajaxGetActiveUsers(){log_message('debug','üì• ajaxGetActiveUsers() called.');$request=service('request');$post=$request->getPost();log_message('debug','üì¶ Incoming POST: '.print_r($post,true));$start=$post['start']?? 0;$length=$post['length']?? 10;$search=$post['search']['value']?? '';$records=$this->userModel->getUsersByStatus(1,$search);$totalRecords=count($records);$records=array_slice($records,$start,$length);$data=[];foreach($records as $user){try{$actionView=view('ManagementModule\Views\Users\partials\action_buttons',['user'=>$user]);}catch(\Throwable $e){log_message('error','‚ùå Error rendering action_buttons view for user ID '.$user['id'].': '.$e->getMessage());$actionView='<span class="text-danger">View Error</span>';}$data[]=['id'=>'<a href="'.site_url('Management/Users/Profile/'.$user['username']).'">'.$user['id'].'</a>','type'=>$user['type'],'name'=>$user['first_name'].' '.$user['last_name'].' '.$user['name_suffix'],'email'=>'<a href="mailto:'.$user['email'].'">'.$user['email'].'</a>','location'=>$user['city'].', '.$user['state'],'referral_code'=>$user['referral_code'],'actions'=>$actionView,];}return $this->response->setJSON(['draw'=>intval($post['draw']?? 1),'recordsTotal'=>$totalRecords,'recordsFiltered'=>$totalRecords,'data'=>$data,]);}public function ajaxGetInactiveUsers(){log_message('debug','üì• ajaxGetInactiveUsers() called.');$request=service('request');$post=$request->getPost();log_message('debug','üì¶ Incoming POST: '.print_r($post,true));$start=$post['start']?? 0;$length=$post['length']?? 10;$search=$post['search']['value']?? '';$records=$this->userModel->getUsersByStatus(0,$search);$totalRecords=count($records);$records=array_slice($records,$start,$length);$data=[];foreach($records as $user){try{$actionView=view('ManagementModule\Views\Users\partials\action_buttons',['user'=>$user]);}catch(\Throwable $e){log_message('error','‚ùå Error rendering action_buttons view for user ID '.$user['id'].': '.$e->getMessage());$actionView='<span class="text-danger">View Error</span>';}$data[]=['id'=>'<a href="'.site_url('Management/Users/Profile/'.$user['username']).'">'.$user['id'].'</a>','type'=>$user['type'],'name'=>$user['first_name'].' '.$user['last_name'].' '.$user['name_suffix'],'email'=>'<a href="mailto:'.$user['email'].'">'.$user['email'].'</a>','location'=>$user['city'].', '.$user['state'],'referral_code'=>$user['referral_code'],'actions'=>$actionView,];}return $this->response->setJSON(['draw'=>intval($post['draw']?? 1),'recordsTotal'=>$totalRecords,'recordsFiltered'=>$totalRecords,'data'=>$data,]);}protected function arrayToXml(array $data,\SimpleXMLElement $xml){foreach($data as $key=>$value){is_array($value)?$this->arrayToXml($value,$xml->addChild($key)):$xml->addChild($key,htmlspecialchars($value));}return $xml;}public function checkForSpamUsers(){try{$MyMIUser=new \App\Libraries\MyMIUser();$spamAccounts=$MyMIUser->findPotentialSpamUsers();return $this->response->setJSON(['status'=>'success','message'=>count($spamAccounts).' spam accounts detected.','data'=>$spamAccounts]);}catch(\Throwable $e){log_message('error','‚ùå Error checking spam users: '.$e->getMessage());return $this->failServerError('Failed to check for spam accounts.');}}public function cronAnalyzeContent(){log_message('debug','üß† Starting content digest analysis...');$this->getMyMIMarketing()->generateFromTempScraper(5);log_message('debug','‚úÖ Content digest completed.');}public function cronFetchAndGenerateNews(){try{$this->getMyMIMarketing()->cronFetchAndGenerateNews();return $this->response->setJSON(['status'=>'success','message'=>'MarketAux news pulled, ranked, and content generated.']);}catch(\Throwable $e){return $this->response->setJSON(['status'=>'error','message'=>$e->getMessage()],500);}}public function cronFetchInbox(){log_message('debug','üì® Starting inbox scrape...');$this->getMyMIMarketing()->scrapeInboxAndStore();log_message('debug','‚úÖ Inbox scrape completed.');}public function cronFetchMarketingEmails(){log_message('info','CRON: Starting Marketing Email Fetch');$service=new MarketingService();$emailsFetched=$service->fetchAndStoreMarketingEmails();log_message('info','CRON: Fetched '.$emailsFetched.' marketing emails');return $this->respond(['status'=>'success','fetched'=>$emailsFetched]);}public function cronFetchAndStoreEmails(){try{$this->logMessage('üì• [CRON] Started cronFetchAndStoreEmails');$marketingService=$this->getMarketingService();$fetched=$marketingService->scrapeInboxAndStore();$this->logMessage("üì© [CRON] Fetched and stored {$fetched} emails into bf_marketing_temp_scraper");return $this->respond(['status'=>'success','stored'=>$fetched]);}catch(\Throwable $e){log_message('error','[CRON] Error in cronFetchAndStoreEmails: '.$e->getMessage());return $this->failServerError('Failed to fetch emails');}}public function distributeTodaysNewsContent(){$generated=$this->generateTodaysNewsSummary();$result=$this->getMyMIMarketing()->sendToZapier($generated['content']);return $this->response->setJSON(['status'=>'success','message'=>'Content distributed via Zapier.','zapier_result'=>$result]);}public function exportPostJson($id){$post=$this->marketingModel->getGeneratedPostById($id);if(!$post||empty($post['posts'])){return $this->failNotFound('Post not found.');}$posts=json_decode($post['posts'],true);$export=['title'=>$post['title'],'summary'=>$post['summary'],'cta'=>'Check it out at https://mymiwallet.com','keywords'=>explode(',',$post['keywords']?? ''),'platform_captions'=>$posts,];return $this->response->setHeader('Content-Type','application/json')->setHeader('Content-Disposition','attachment; filename="canva_post_'.$id.'.json"')->setJSON($export);}public function fetchAlphaVantageNewsForTradeAlerts(){$alerts=$this->alertsModel->getTradeAlertsWithCreatedFlag();log_message('info','üìà Processing '.count($alerts).' trade alerts.');foreach($alerts as $alert){try{log_message('info','üîç Fetching AlphaVantage news for: '.$alert['ticker']);$newsItems=$this->alertManager->fetchAlphaVantageNews($alert['ticker']);log_message('info','üì∞ '.count($newsItems).' news items fetched for '.$alert['ticker']);foreach($newsItems as $news){$this->marketingModel->insertNewsContent($news,$alert['ticker']);}}catch(\Throwable $e){log_message('error','‚ùå AlphaVantage fetch failed for '.$alert['ticker'].': '.$e->getMessage());}}return $this->response->setJSON(['status'=>'success','message'=>'Financial news processed for alerts.']);}public function fetchEmailsToTempScraper(){try{log_message('info','üì• Starting email scrape to bf_marketing_temp_scraper...');$this->getMyMIMarketing()->fetchAndStoreEmails('news');log_message('info','üì¨ Number of emails fetched: '.count($emails));return $this->response->setJSON(['status'=>'success','message'=>'Emails stored successfully.']);}catch(\Throwable $e){log_message('error','‚ùå fetchEmailsToTempScraper error: '.$e->getMessage());return $this->response->setJSON(['status'=>'error','message'=>$e->getMessage()],500);}}public function fetchNewsEmails(){log_message('info','üì• fetchNewsEmails - Started.');try{$this->getMyMIMarketing()->fetchAndStoreEmails('news');return $this->response->setJSON(['status'=>'success','message'=>'News emails fetched successfully.']);}catch(\Exception $e){log_message('error','‚ùå fetchNewsEmails - Error: '.$e->getMessage());return $this->response->setJSON(['status'=>'error','message'=>$e->getMessage()],500);}}public function forceFetchEmails(){try{$result=$this->alertManager->fetchAndStoreEmails();return $this->response->setJSON(['status'=>'success','message'=>'Emails fetched and processed successfully.']);}catch(\Exception $e){return $this->response->setJSON(['status'=>'error','message'=>'Error fetching emails: '.$e->getMessage()],500);}}public function generateContentDigestFromStored(){log_message('info','Marketing: Starting summary generation from stored marketing emails.');$model=new MarketingModel();$records=$model->getRecentUnprocessedTempEmails(5);$results=[];foreach($records as $record){if(empty($record['title'])||empty($record['content'])){log_message('debug','Skipped record due to missing title/content ID: '.$record['id']);continue;}try{$summary=$this->getMarketingService()->generateContentFromRaw($record['title'],$record['content']);$model->storeFinalMarketingContent(['source_id'=>$record['id'],'title'=>$record['title'],'summary'=>$summary,'created_at'=>date('Y-m-d H:i:s')]);$model->markTempRecordAsProcessed($record['id']);$results[]=$record['title'];}catch(\Throwable $e){log_message('error','Failed to process record ID '.$record['id'].': '.$e->getMessage());}}return $this->respond(['status'=>'complete','processed_titles'=>$results]);}public function generateContentFromScraper(){log_message('debug','üîÅ API::MarketingController::generateContentFromScraper called');try{$limit=$this->request->getGet('limit')?? 5;$records=[];$allRecords=$this->marketingModel->getValidUnprocessedEmails($limit);if(!is_array($allRecords)){log_message('error','‚ùå $allRecords is not an array or null. Cannot proceed.');return $this->respond(['status'=>'error','message'=>'Failed to fetch records.']);}foreach($allRecords as $record){$titleOk=!empty($record['title']);$contentOk=strlen(strip_tags($record['content']?? ''))>1000;if($titleOk&&$contentOk){$records[]=$record;if(count($records)>=$limit)break;}else{log_message('debug',"‚ö†Ô∏è Skipping invalid record ID {$record['id']} during prefilter (Title or content missing/too short).");$this->marketingModel->markEmailsAsProcessed([$record['id']]);}}if(empty($records)){return $this->respond(['status'=>'no_data','message'=>'No unprocessed records found.']);}$processedSummaries=[];foreach($records as $record){$content=$record['content']?? '';$title=$record['title']?? '';$recordId=$record['id']?? 0;if(empty(trim($content))||strlen($content)<1000){log_message('debug',"‚è≠Ô∏è Skipping record ID {$recordId} - content too short or empty.");continue;}if(empty(trim($title))){log_message('debug',"‚è≠Ô∏è Skipping record ID {$recordId} - missing title.");continue;}if(stripos($content,'<html')!==false&&substr_count($content,'<')>50){log_message('debug',"‚è≠Ô∏è Skipping record ID {$recordId} - content likely raw HTML.");continue;}try{$processed=$this->getMarketingService()->generateContentFromRaw($record);if(!is_array($processed)){log_message('debug',"‚ö†Ô∏è Skipped record ID {$recordId} - generateContentFromRaw() returned invalid structure.");continue;}$this->marketingModel->saveFinalizedMarketingContent($processed);$this->marketingModel->markEmailsAsProcessed([$recordId]);$processedSummaries[]=['id'=>$recordId,'title'=>$processed['headline']?? $title,'summary'=>$processed['summary']?? '','keywords'=>$processed['keywords']??[],];}catch(\Throwable $e){log_message('error',"‚ùå Failed to process record ID {$recordId}: {$e->getMessage()}");}}return $this->respond(['status'=>'success','message'=>count($processedSummaries).' records processed successfully.','data'=>$processedSummaries]);}catch(\Throwable $e){log_message('error','‚ùå API::generateContentFromScraper error - '.$e->getMessage());return $this->failServerError($e->getMessage());}}public function generateDailyContentDigest(){log_message('debug','üß† Start Memory Usage: '.memory_get_usage(true));@ini_set('memory_limit','768M');$limit=5;$summary=[];try{$records=$this->marketingModel->getValidUnprocessedEmails($limit);if(!is_array($records)||empty($records)){log_message('info','üö´ No valid records returned from getValidUnprocessedEmails().');return $this->response->setJSON(['status'=>'no_data','message'=>'No valid records to process.']);}foreach($records as $record){$recordId=$record['id']?? 0;$title=$record['title']?? '';$content=$record['content']?? '';$contentSize=strlen(strip_tags($content));if(empty(trim($title))||$contentSize<1000){log_message('debug',"‚ö†Ô∏è Skipping record ID {$recordId} ‚Äî title missing or content too short ({$contentSize} chars).");$this->marketingModel->markEmailsAsProcessed([$recordId]);continue;}if(stripos($content,'<html')!==false&&substr_count($content,'<')>50){log_message('debug',"‚è≠Ô∏è Skipping record ID {$recordId} ‚Äî likely raw HTML content.");$this->marketingModel->markEmailsAsProcessed([$recordId]);continue;}try{gc_collect_cycles();$processed=$this->getMarketingService()->generateContentFromRaw($record);if(!is_array($processed)){log_message('warning',"‚ö†Ô∏è Skipped record ID {$recordId} ‚Äî generateContentFromRaw() returned invalid result.");continue;}$this->marketingModel->saveFinalizedMarketingContent($processed);$this->marketingModel->markEmailsAsProcessed([$recordId]);$summary[]=['title'=>$processed['headline']?? 'Untitled','summary'=>$processed['summary']?? '','subtopics'=>$processed['subtopics']??[],'platform_posts'=>$processed['posts']??[],];}catch(\Throwable $e){log_message('error',"‚ùå Error processing record ID {$recordId}: {$e->getMessage()}");}}log_message('debug','üèÅ Peak Memory Usage: '.memory_get_peak_usage(true));return $this->response->setJSON(['status'=>'success','digest'=>$summary]);}catch(\Throwable $e){log_message('error','‚ùå generateDailyContentDigest fatal error: '.$e->getMessage());return $this->response->setJSON(['status'=>'error','message'=>$e->getMessage()],500);}}public function generateRankedMarketingContent(){$this->getMyMIMarketing()->generateRankedMarketingContent();return $this->response->setJSON(['status'=>'success','message'=>'Ranked content generated.']);}public function getBalanceSheet($symbol,$apikey){$url="https://www.alphavantage.co/query?function=BALANCE_SHEET&symbol=".urlencode($symbol)."&apikey=".$apikey;$json=file_get_contents($url);return json_decode($json,true);}public function getCashFlowStatement($symbol,$apikey){$url="https://www.alphavantage.co/query?function=CASH_FLOW&symbol=".urlencode($symbol)."&apikey=".$apikey;$json=file_get_contents($url);return json_decode($json,true);}public function getCompanyOverview($symbol,$apikey){$url="https://www.alphavantage.co/query?function=OVERVIEW&symbol=".urlencode($symbol)."&apikey=".$apikey;$json=file_get_contents($url);return json_decode($json,true);}public function getEarningsCalendar($apikey,$horizon='3month'){$url="https://www.alphavantage.co/query?function=EARNINGS_CALENDAR&horizon=".$horizon."&apikey=".$apikey;$csv=file_get_contents($url);$lines=explode("\n",trim($csv));$data=array_map('str_getcsv',$lines);return $data;}public function getFixedWindowAnalytics($symbols,$rangeStart,$rangeEnd,$calculations,$apikey){$url="https://alphavantageapi.co/timeseries/analytics?SYMBOLS=".urlencode($symbols);$url.="&RANGE=".$rangeStart."&RANGE=".$rangeEnd;$url.="&INTERVAL=DAILY&OHLC=close";$url.="&CALCULATIONS=".urlencode($calculations)."&apikey=".$apikey;$json=file_get_contents($url);return json_decode($json,true);}public function getIncomeStatement($symbol,$apikey){$url="https://www.alphavantage.co/query?function=INCOME_STATEMENT&symbol=".urlencode($symbol)."&apikey=".$apikey;$json=file_get_contents($url);return json_decode($json,true);}public function getInsiderTransactions($symbol,$apikey){$url="https://www.alphavantage.co/query?function=INSIDER_TRANSACTIONS&symbol=".urlencode($symbol)."&apikey=".$apikey;$json=file_get_contents($url);return json_decode($json,true);}public function getNewsSentiment($apikey,$tickers='',$topics='',$time_from='',$time_to='',$sort='LATEST',$limit=50){$url="https://www.alphavantage.co/query?function=NEWS_SENTIMENT";$url.="&tickers=".urlencode($tickers);$url.="&topics=".urlencode($topics);if($time_from)$url.="&time_from=".$time_from;if($time_to)$url.="&time_to=".$time_to;$url.="&sort=".$sort."&limit=".$limit."&apikey=".$apikey;$json=file_get_contents($url);return json_decode($json,true);}public function getSlidingWindowAnalytics($symbols,$range,$windowSize,$calculations,$apikey){$url="https://alphavantageapi.co/timeseries/running_analytics?SYMBOLS=".urlencode($symbols);$url.="&RANGE=".$range."&INTERVAL=DAILY&OHLC=close";$url.="&WINDOW_SIZE=".$windowSize;$url.="&CALCULATIONS=".urlencode($calculations)."&apikey=".$apikey;$json=file_get_contents($url);return json_decode($json,true);}public function generatePostsFromSummary($summaryId=null){try{$summary=$this->marketingModel->find($summaryId);if(!$summary){return $this->failNotFound('Summary not found.');}$decodedTitleRaw=$summary['title']?? '';$decodedSummaryRaw=$summary['summary']?? '';$decodedTitle=$this->getMyMIMarketing()->decodeMimeHeaderSafe($decodedTitleRaw);$decodedSummary=quoted_printable_decode($decodedSummaryRaw);$cleanedSummary=html_entity_decode(strip_tags($decodedSummary));$keywords=$this->MyMIMarketing->extractKeywords($cleanedSummary);$posts=$this->MyMIMarketing->generateSocialPosts($cleanedSummary,$keywords);$this->marketingModel->update($summaryId,['keywords'=>json_encode($keywords),'posts'=>json_encode($posts),]);return $this->respond(['status'=>'success','message'=>'Content generated and stored successfully.','original'=>$summary,'cleaned'=>['title'=>$decodedTitle,'summary'=>$cleanedSummary,'keywords'=>$keywords,'posts'=>$posts,],]);}catch(\Throwable $e){log_message('error','‚ùå generatePostsFromSummary() failed: '.$e->getMessage());return $this->failServerError('Error generating posts.');}}public function testTfIdfPipeline(){$samples=['Short unstructured','This is a valid test document with enough content and structure to process correctly.','     ','<html><body>Broken HTML without substance</body></html>','Here is another test input to validate TF-IDF scoring logic.',];foreach($samples as $i=>$text){$summary=$this->MyMIMarketing->summarizeText($text);$keywords=$this->MyMIMarketing->extractKeywords($text);$scorePreview=$this->MyMIMarketing->getTopKeywordScores($text,5);log_message('debug',"üß™ Test #{$i} | Summary: {$summary}");log_message('debug',"üß™ Test #{$i} | Keywords: ".implode(',',$keywords));log_message('debug',"üìä Test #{$i} | TF-IDF Scores: ".print_r($scorePreview,true));}return $this->respond(['status'=>'ok','message'=>'TF-IDF test pipeline ran successfully.']);}public function generateTodaysNewsSummary(){$todayNews=$this->marketingModel->getTodaysNewsContent();$summary=$this->getMyMIMarketing()->summarizeMultipleArticles($todayNews);$content=$this->getMyMIMarketing()->generateMarketingContent($summary);return $this->response->setJSON(['status'=>'success','summary'=>$summary,'content'=>$content]);}public function generateTodaysStory(){ini_set('memory_limit','1024M');try{log_message('info','üîç Starting email scrape for news@mymiwallet.com...');$this->getMyMIMarketing()->fetchAndStoreEmails('news');$today=date('Y-m-d');$scrapes=$this->marketingModel->getScrapesByDate($today,10);if(empty($scrapes)){log_message('info','No scraped emails found for today.');return $this->response->setJSON(['status'=>'error','message'=>'No emails found for today.'],404);}$summaries=[];foreach(array_chunk($scrapes,10)as $scrapeChunk){foreach($scrapeChunk as $scrape){$content=$scrape['email_body']?? $scrape['content']?? '';log_message('info','Content size: '.strlen($content));$cleanedBody=$this->marketingModel->cleanHtmlEmailContent($content);$summary=$this->getMyMIMarketing()->summarizeContent($cleanedBody);log_message('debug','Memory after summary: '.memory_get_usage(true));if(is_array($summary)){$summary=$summary['summary']?? implode('. ',array_map('strval',$summary));}$summaries[]=$summary;}}$combinedSummary=implode("\n\n",$summaries);if(strlen($combinedSummary)>500000){log_message('warning','Combined summary too long. Truncating...');$combinedSummary=substr($combinedSummary,0,500000);}$todayTitle="Today's Top Stories - ".date('F j, Y');$data=['title'=>$todayTitle,'content'=>$combinedSummary,'links'=>json_encode([]),'url'=>'','type'=>'todays_story','scraped_at'=>date('Y-m-d H:i:s'),'created_on'=>date('Y-m-d H:i:s'),'modified_on'=>date('Y-m-d H:i:s'),];$this->marketingModel->storeTempScrapedData($data);log_message('info','‚úÖ Today‚Äôs story generated and stored.');return $this->response->setJSON(['status'=>'success','message'=>'Today‚Äôs story generated and stored successfully!','title'=>$todayTitle,'summary'=>$combinedSummary]);}catch(\Throwable $e){log_message('error','‚ùå generateTodaysStory error: '.$e->getMessage());return $this->response->setJSON(['status'=>'error','message'=>$e->getMessage()],500);}}public function generateVoiceScriptManually(){try{log_message('info','üé§ generateVoiceScriptManually() triggered.');$script=$this->getMyMIMarketing()->generateVoiceoverScript();return $this->response->setJSON(['status'=>'success','script'=>$script]);}catch(\Throwable $e){log_message('error','‚ùå Error in generateVoiceScriptManually: '.$e->getMessage());return $this->response->setJSON(['status'=>'error','message'=>$e->getMessage()]);}}public function getAlerts(){log_message('debug','üîç getAlerts called');try{$alerts=$this->alertsModel->getAllTradeAlerts();log_message('debug','‚úÖ getAlerts retrieved '.count($alerts).' alerts.');return $this->response->setJSON($alerts);}catch(\Throwable $e){log_message('error','‚ùå getAlerts error: '.$e->getMessage());return $this->failServerError($e->getMessage());}}public function getAssets(){log_message('debug','üìä getAssets called');try{$assets=$this->exchangeModel->getManagementAssets();log_message('debug','‚úÖ getAssets retrieved '.count($assets).' assets.');return $this->response->setJSON($assets);}catch(\Throwable $e){log_message('error','‚ùå getAssets error: '.$e->getMessage());return $this->failServerError($e->getMessage());}}public function getNews(){log_message('debug','üì∞ getNews called');try{$news=$this->marketingModel->getNewsAlerts();log_message('debug','‚úÖ getNews retrieved '.count($news).' news records.');return $this->response->setJSON($news);}catch(\Throwable $e){log_message('error','‚ùå getNews error: '.$e->getMessage());return $this->failServerError($e->getMessage());}}public function getReferrals(){log_message('debug','üîç getReferrals called');try{$referrals=$this->referralModel->getAllReferrals();log_message('debug','‚úÖ getReferrals retrieved '.count($referrals).' referrals.');return $this->response->setJSON($referrals);}catch(\Throwable $e){log_message('error','‚ùå getReferrals error: '.$e->getMessage());return $this->failServerError($e->getMessage());}}public function getSupport(){log_message('debug','üßæ getSupport called');try{$support=$this->supportModel->getManagementSupport();log_message('debug','‚úÖ getSupport retrieved '.count($support).' support records.');return $this->response->setJSON($support);}catch(\Throwable $e){log_message('error','‚ùå getSupport error: '.$e->getMessage());return $this->failServerError($e->getMessage());}}public function getTopMovers($apikey){$url="https://www.alphavantage.co/query?function=TOP_GAINERS_LOSERS&apikey=".$apikey;$json=file_get_contents($url);return json_decode($json,true);}public function getUpcomingIPOs($apikey){$url="https://www.alphavantage.co/query?function=IPO_CALENDAR&apikey=".$apikey;$csv=file_get_contents($url);$lines=explode("\n",trim($csv));$data=array_map('str_getcsv',$lines);return $data;}public function getUsers(){log_message('debug','üîç getUsers called');}public function massResendActivationEmails(){$users=$this->userModel->getPendingActivationUsers();$activator=service('activator');$emailer=\Config\Services::email();$successCount=0;$failureCount=0;foreach($users as $user){$sent=$activator->send($user);if($sent){$successCount++;log_message('info',"Activation email sent to: {$user->email}");}else{$failureCount++;log_message('error',"Failed to send activation email to: {$user->email}");}}$summary="{$successCount} emails sent successfully, {$failureCount} failed.";return redirect()->to('/Management/Users')->with('message',$summary);}public function processAllTradeAlerts(){try{log_message('info','‚ö° Management API - processAllTradeAlerts triggered.');$this->alertManager->fetchAndStoreAlertsEmails();$this->alertManager->processTradeAlertsInBatches(50);$this->alertManager->updateAlerts();return $this->response->setJSON(['status'=>'success','message'=>'All trade alerts processed successfully.']);}catch(\Exception $e){log_message('error','‚ùå Management API - Error processing trade alerts: '.$e->getMessage());return $this->response->setJSON(['status'=>'error','message'=>$e->getMessage()],500);}}public function processAndGenerateMarketingContent(){$emails=$this->getMarketingService()->fetchUnprocessedEmailSummaries();if(!empty($emails)&&is_array($emails)){foreach($emails as $email){$cleanContent=$this->getMarketingService()->sanitizeAndSummarize($email['email_body']);$keywords=$this->getMyMIMarketing()->extractTopKeywords($cleanContent);$externalContent=$this->getMarketingService()->gatherKeywordBasedContent($keywords);$this->getMarketingService()->storeScrapedContent($externalContent);$generatedPosts=$this->getMarketingService()->generatePlatformPosts($externalContent);$this->getMarketingService()->storeGeneratedPostsForDashboard($generatedPosts);}}return redirect()->to('/Management/Marketing')->with('message','Content generation completed.');}public function processTempEmailsToScraper(){try{log_message('info','‚öôÔ∏è Starting content generation from bf_marketing_temp_scraper...');$tempEmails=$this->marketingModel->getRecentScrapes();foreach($tempEmails as $email){$cleanedBody=$this->marketingModel->cleanHtmlEmailContent($email->email_body);$summary=$this->getMyMIMarketing()->summarizeContent($cleanedBody);$keywords=$this->marketingModel->extractKeywords($email->email_body);$hashtags=$this->marketingModel->mapToContextualHashtags($keywords);$data=['title'=>$email->email_subject ?? 'Generated Content','summary'=>is_array($summary)?implode("\n",$summary):$summary,'content'=>$email->email_body,'tags'=>implode(',',$keywords),'type'=>'Email/Newsletters','status'=>'pending','created_on'=>date('Y-m-d H:i:s'),'author_information'=>$email->email_sender,];$this->marketingModel->saveDailyLog($data);}log_message('info','‚úÖ Finished processing and saving to bf_marketing_scraper.');return $this->response->setJSON(['status'=>'success','message'=>'Content generated and saved to bf_marketing_scraper.',]);}catch(\Throwable $e){log_message('error','‚ùå processTempEmailsToScraper error: '.$e->getMessage());return $this->response->setJSON(['status'=>'error','message'=>$e->getMessage()],500);}}public function reprocessIncompleteEmails(){try{$this->getMyMIMarketing()->reprocessIncompleteEmails();return $this->response->setJSON(['status'=>'success','message'=>'Backfilled incomplete emails.']);}catch(\Throwable $e){log_message('error','‚ùå reprocessIncompleteEmails error: '.$e->getMessage());return $this->failServerError('Failed to reprocess incomplete emails.');}}public function runCronManually(){$this->runCRONTasks();return $this->response->setJSON(['status'=>'success','message'=>'Manual CRON execution complete.']);}public function runDailyAlphaVantageDataPipeline(){$symbols=$this->alertsModel->getTopWatchlistSymbols();$apikey=getenv('ALPHA_VANTAGE_KEY');foreach($symbols as $symbol){$this->fetchAlphaVantageNewsForTradeAlerts($symbol['symbol'],$apikey);$this->getCompanyOverview($symbol['symbol'],$apikey);$this->getIncomeStatement($symbol['symbol'],$apikey);}return $this->response->setJSON(['status'=>'success','message'=>'Daily Alpha Vantage data pipeline completed.']);}public function sendToZapierManually(){$summary=$this->generateTodaysNewsSummary();$result=$this->getMyMIMarketing()->sendToZapier($summary['content']);return $this->response->setJSON(['status'=>'success','message'=>'Sent manually to Zapier.','result'=>$result]);}public function scrapeAndGenerateTodaysStoryFromInbox(){try{log_message('info','üì• Starting inbox scrape for news@mymiwallet.com...');$this->getMyMIMarketing()->fetchAndStoreEmails('news');$today=date('Y-m-d');$scrapes=$this->marketingModel->getScrapesByDate($today);if(empty($scrapes)){log_message('info','üì≠ No emails found for today.');return $this->response->setJSON(['status'=>'error','message'=>'No emails found for today.'],404);}$summaries=[];foreach($scrapes as $scrape){$cleanedBody=$this->marketingModel->cleanHtmlEmailContent($scrape['content']);$summary=$this->getMyMIMarketing()->summarizeContent($cleanedBody);if(is_array($summary)){$summary=$summary['summary']?? implode('. ',array_map('strval',$summary));}$summaries[]=$summary;}$combinedSummary=implode("\n\n",$summaries);if(strlen($combinedSummary)>500000){log_message('warning','Combined summary too long. Truncating...');$combinedSummary=substr($combinedSummary,0,500000);}$todayTitle="Today's News Highlights - ".date('F j, Y');$data=['title'=>$todayTitle,'content'=>$combinedSummary,'links'=>json_encode([]),'url'=>'','type'=>'todays_story','scraped_at'=>date('Y-m-d H:i:s'),'created_on'=>date('Y-m-d H:i:s'),'modified_on'=>date('Y-m-d H:i:s'),];$this->marketingModel->storeTempScrapedData($data);log_message('info','‚úÖ Today‚Äôs story generated and stored.');return $this->response->setJSON(['status'=>'success','message'=>'Today‚Äôs story generated and stored successfully!','title'=>$todayTitle,'summary'=>$combinedSummary]);}catch(\Throwable $e){log_message('error','‚ùå scrapeAndGenerateTodaysStoryFromInbox error: '.$e->getMessage());return $this->response->setJSON(['status'=>'error','message'=>$e->getMessage()],500);}}public function sharePost($id,$platform){try{$post=$this->marketingModel->getGeneratedPostById($id);if(!$post||empty($post['posts'])){return $this->failNotFound('Post not found or invalid.');}$posts=json_decode($post['posts'],true);$message=$posts[$platform]?? null;if(!$message){return $this->failValidationError("No formatted message found for platform: $platform");}$success=$this->getMarketingService()->distributeContent($platform,$message);if($success){return $this->respond(['status'=>'success','message'=>'Post shared.']);}else{return $this->failServerError('Failed to dispatch post.');}}catch(\Throwable $e){log_message('error',"[PostShare] Error: ".$e->getMessage());return $this->failServerError('An unexpected error occurred.');}}public function sendAllDiscordAlerts(){$alerts=$this->alertsModel->getAlertsWithNewTVChart();if(empty($alerts)){return $this->response->setJSON(['status'=>'error','message'=>'No new alerts to send.'],404);}foreach($alerts as $alert){$this->alertManager->sendDiscordNotification($alert);}return $this->response->setJSON(['status'=>'success','message'=>'All Discord notifications sent.']);}public function updateMarketDataForAlerts(){try{$this->alertManager->updateAlerts();return $this->response->setJSON(['status'=>'success','message'=>'Trade alerts updated with market data.']);}catch(\Exception $e){return $this->response->setJSON(['status'=>'error','message'=>'Failed to update market data: '.$e->getMessage()],500);}}} ?><?php $managementActionItems=$siteSettings->managementActionItems;$department=$uri->getSegment(2);$viewFileData=['managementActionItems'=>$managementActionItems,'targetUsers'=>$targetUsers ?? 0,'totalActiveUsers'=>$totalActiveUsers ?? 0,'totalActivePartners'=>$totalActivePartners ?? 0,'totalActiveCampaigns'=>$totalActiveCampaigns ??[],'getTasksByDepartment'=>$getTasksByDepartment ??[],'totalDepartmentTasks'=>$totalDepartmentTasks ??[],'totalPageSEOTasks'=>$totalPageSEOTasks ??[],'totalTransFees'=>$totalTransFees ?? 0,'totalLastTransFees'=>$totalLastTransFees ?? 0,'usersPercentage'=>$usersPercentage ?? 0,'getActiveCampaigns'=>$getActiveCampaigns ??[],'totalApprovedAssets'=>$totalApprovedAssets ?? 0,'totalPendingAssets'=>$totalPendingAssets ?? 0,'userGoals'=>$userGoals ??[],'newsUpdates'=>$newsUpdates ??[],'getBlogPosts'=>$getBlogPosts ??[],'recentMarketingPosts'=>$recentMarketingPosts ??[],'todaysStory'=>$todaysStory ??[],]; ?><div class="nk-block"><div class="row gy-gs"><div class="col-lg-12"><div class="nk-block-head-xs"><div class="nk-block-head-content"><h1 class="title nk-block-title">MyMI Management -<?=esc($department)?></h1><a href="<?=site_url('/Management')?>">‚Üê Back to Management Dashboard</a></div></div></div><div class="col-12 col-xxl-4"><?=view('ManagementModule\Views\Marketing\index\action_center_new',$viewFileData)?></div><div class="col-12 col-xxl-8"><?=view('ManagementModule\Views\Marketing\index\most_recent_content',$viewFileData)?></div><div class="col-12"><?php  ?></div><div class="col-12"><?php  ?></div><div class="col-12 col-xxl-6"><?=view('ManagementModule\Views\Marketing\resources\controlPanelBlock',$viewFileData)?><?php  ?></div><div class="col-12 col-xxl-6"><?=view('ManagementModule\Views\Marketing\resources\ctaRecommenderModule',$viewFileData)?></div><div class="col-12 col-xxl-12 px-2"><div class="generated-summaries"id="generatedSummariesBlock"><?=view('ManagementModule\Views\Marketing\resources\generatedSummaries',$viewFileData)?></div></div><div class="col-12 mt-3 col-xxl-12"><div class="card card-bordered"><div class="card-inner"><h5 class="title">üì∞ Recent Marketing Posts</h5><?php $validPosts=array_filter($recentMarketingPosts,fn($p)=>!empty($p->title));if(!empty($validPosts)): ?><ul class="list-group"><?php foreach($validPosts as $post): ?><li class="d-flex justify-content-between align-items-start flex-column list-group-item"><div class="w-100"><strong><?=esc($post->title?:'(Untitled Post)')?></strong><br><small class="text-muted"><?=date('M d, Y h:i A',strtotime($post->created_at))?></small><br><?php if(!empty($post->short_description)): ?><small class="text-secondary"><?=esc($post->short_description)?>...</small><?php else: ?><small class="text-secondary">No description available.</small><?php endif; ?></div><div class="mt-2"><button class="btn btn-primary btn-sm"onclick='dynamicModalLoader("Marketing","PreviewGeneratedPost","<?=$post->id?>")'>Preview</button></div></li><?php endforeach; ?></ul><?php else: ?><p>No posts with valid titles available yet. Click 'Generate' to create one!</p><?php endif; ?></div></div></div><div class="col-12 mt-3 col-xxl-4"><?=view('ManagementModule\Views\Marketing\index\exchange_action_center',$viewFileData)?></div><div class="col-12 mt-3 col-xxl-8"><?=view('ManagementModule\Views\Marketing\index\target_users',$viewFileData)?></div></div></div><script <?= $nonce['script'] ?? '' ?>></script><div class="nk-block"><div class="nk-block-head"><div class="d-flex justify-content-between align-items-center nk-block-head-content"><h4 class="nk-block-title">üì¢ Generated Marketing Summaries</h4><div><div class="d-flex justify-content-end mt-3"><label class="form-check form-switch ml-2"><input class="btn btn-lg form-check-input"id="liveModeToggle"type="checkbox"> <span class="form-check-label">Live Mode</span></label></div></div></div><p class="text-soft">This section shows finalized summaries ready for distribution across platforms.</p></div><div class="row"id="generatedSummariesBlock"><?php if(!empty($todaysStory)): ?><?php foreach($todaysStory as $summary): ?><div class="mb-4 col-lg-4 col-md-6"><div class="card h-100 shadow-sm"><div class="d-flex flex-column card-body"><h6 class="title mb-1"><?=esc($summary['title'])?></h6><p class="small mb-2 text-soft"><?=date('F j, Y g:i A',strtotime($summary['created_at']))?></p><div class="small mb-2"><?=esc($summary['summary'])?></div><?php if(!empty($summary['keywords'])): ?><div class="small mb-2 text-muted"><strong>#Tags:</strong><?php foreach(explode(',',$summary['keywords'])as $tag): ?><span class="badge bg-light me-1 text-dark">#<?=trim($tag)?></span><?php endforeach; ?></div><?php endif; ?><?php if(!empty($summary['cta'])): ?><div class="small mb-2 text-primary"><strong>üì£ CTA:</strong><?=esc($summary['cta'])?></div><?php endif; ?><a href="javascript:void(0);"class="btn btn-primary btn-sm mt-auto"onclick='dynamicModalLoader("/API/Management/PreviewGeneratedPost/<?=$summary['id']?>")'>üîç Preview Post</a></div></div></div><?php endforeach; ?><?php else: ?><div class="col-12"><div class="alert alert-warning">‚ö†Ô∏è No summaries available. Click "Generate Today‚Äôs Content" to begin.</div></div><?php endif; ?></div></div><script <?= $nonce['script'] ?? '' ?>>const liveToggle = document.getElementById('liveModeToggle');
app/Modules/chatgpt.txt:167:        updateStatus(`‚è≥ Approving #${id}...`);
app/Modules/chatgpt.txt:169:            const response = await fetch(`<?=site_url('API/Management/approveBufferItem/')?>${id}`, {
app/Modules/chatgpt.txt:179:            updateStatus(`‚ùå Error: ${err.message}`, true);
app/Modules/chatgpt.txt:202:        updateStatus(`‚è≥ Rejecting #${id}...`);
app/Modules/chatgpt.txt:204:            const response = await fetch(`<?=site_url('API/Management/rejectBufferItem/')?>${id}`, {
app/Modules/chatgpt.txt:214:            updateStatus(`‚ùå Error: ${err.message}`, true);
app/Modules/chatgpt.txt:227:            updateStatus(`‚úÖ ${data.message}`);
app/Modules/chatgpt.txt:228:            document.querySelector(`#bufferTableBody tr td:first-child:contains(${id})`).parentElement.remove();
app/Modules/chatgpt.txt:230:            updateStatus(`‚ùå ${data.message}`, true);
app/Modules/Management/Documents/Marketing/MarketingOpRunbook.md:3:**Goal:** Ship daily, platform-native content (free-first) using summaries from `bf_marketing_scraper`, render with `bf_marketing_social_templates`, queue to `bf_marketing_post_queue`, auto-distribute via CRON/Zapier/CI4.
app/Modules/Management/Documents/Marketing/MarketingOpRunbook.md:6:- Summaries: `bf_marketing_scraper` (cleaned, titled items only)
app/Modules/Management/Documents/Marketing/MarketingOpRunbook.md:7:- Templates: `bf_marketing_social_templates` (this repo seeds)
app/Modules/Management/Documents/Marketing/MarketingOpRunbook.md:8:- Queue: `bf_marketing_post_queue` (CRON publisher consumes)
app/Modules/Management/Documents/Marketing/MarketingOpRunbook.md:19:- `{headline}`, `{summary}`, `{insight}`, `{ticker}`, `{signal}`, `{one_liner}`, `{plan}`, `{risk}`, `{hook}`, `{beat1}`, `{beat2}`, `{beat3}`, `{overlay}`, `{script}`, `{cta_link}`, `{cta_spoken}`, `{hashtags}`
app/Modules/Management/Documents/Marketing/MarketingOpRunbook.md:25:- Platform limits respected (`max_length`)
app/Modules/Management/Documents/Marketing/MarketingOpRunbook.md:26:- **StockTwits**: `allow_links = 0` ‚áí strip links
app/Modules/Management/Documents/Marketing/MarketingOpRunbook.md:32:- Resolve template ‚Üí produce `payload_body` (+ optional `payload_media`)
app/Modules/Management/Documents/Marketing/MarketingOpRunbook.md:33:- Insert into `bf_marketing_post_queue` with `status='queued'` and reasonable `scheduled_at`
app/Modules/Management/Documents/Marketing/MarketingOpRunbook.md:37:- Publisher selects eligible rows: `status='queued' AND (scheduled_at IS NULL OR scheduled_at <= NOW())`
app/Modules/Management/Documents/Marketing/MarketingOpRunbook.md:38:- Attempts post; sets `posting`‚Üí`posted` or `failed` (with `error_message`)
app/Modules/Management/Documents/Marketing/MarketingOpRunbook.md:46:5. Open PR titled `marketing:auto-queue <date>`, attach migration logs
app/Modules/Management/Views/Users/index.php:281:        if (!confirm(`Are you sure you want to ban ${selectedIDs.length} users?`)) {
app/Modules/APIs/Controllers/ManagementController.php:1017:        // Step 1: Fetch raw email content (assume it's already in `bf_marketing_scraper`)
app/Modules/APIs/Controllers/ManagementController.php:1030:                // Step 5: Store content in `bf_marketing_temp_scraper`
app/Modules/APIs/Controllers/AlertsController.php:398:        $response = curl_exec($ch);
app/Modules/Management/Views/Marketing/Add.php:115:                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/Management/Views/Marketing/index/most_recent_content.php:53:            html += `<li><a class="dropdown-item" href="${link.href}" target="_blank">${link.text || 'Unnamed'}</a></li>`;
app/Modules/Management/Views/Marketing/index/most_recent_content.php:79:                        `<a href="${item.url}" target="_blank">Open</a>`,
app/Modules/Management/Views/Marketing/index/most_recent_content.php:90:        fetch(`<?= site_url('Management/Marketing/getScrapeDetails') ?>/${id}`)
app/Modules/Management/Views/Marketing/index/most_recent_content.php:109:        fetch(`<?= site_url('API/Marketing/generatePostsFromSummary') ?>/${id}`)
app/Modules/Management/Views/Marketing/index/most_recent_content.php:128:            fetch(`<?= site_url('Management/Marketing/deleteScrape') ?>/${id}`, { method: 'DELETE' })
app/Modules/Blog/Views/Earnings/TSLA/10192023.php:43:$response = curl_exec($ch);
app/Modules/Management/Views/Marketing/generatedPostsDashboard.php:38:    fetch(`/API/Management/getGeneratedPostsPaginated?page=${page}&limit=20`)
app/Modules/Management/Views/Marketing/generatedPostsDashboard.php:63:                `Page ${pagination.page} of ${pagination.pages}`;
app/Modules/Management/Views/Marketing/generatedPostsDashboard.php:76:    fetch(`/API/Management/sharePost/${id}/${platform}`)
app/Modules/Management/Views/Marketing/generatedPostsDashboard.php:88:    fetch(`/API/Management/updatePostSchedule/${id}`, {
app/Modules/Management/Views/Marketing/Edit.php:155:        const redirectURL = `<?php echo $redirectURL; ?>`;
app/Modules/Management/Views/Marketing/Drip/create.php:187:            textarea.value += `{{${tag}}}`;
app/Modules/Management/Views/Marketing/Drip/modals/generateCampaignStepContent.php:29:            fetch(`<?= site_url('API/Marketing/generateCampaignStepContent/') ?>${stepId}`, {
app/Modules/Management/Views/Marketing/Drip/modals/generateCampaignContent.php:29:            fetch(`<?= site_url('API/Marketing/generateCampaignContent/') ?>${campaignId}`, {
app/Modules/Management/Views/Marketing/EmailDetail.php:2:// Assume: $emailData = email row from `bf_marketing_temp_scraper` or `bf_marketing_scraper`
app/Modules/Management/Views/Marketing/Campaigns/View.php:465:    const displayEl = $(`#${field}_display`);
app/Modules/Management/Views/Marketing/Campaigns/View.php:466:    const inputEl = $(`#${field}_input`);
app/Modules/Management/Views/Marketing/Campaigns/View.php:467:    const saveBtn = $(`.save-btn[data-field="${field}"]`);
app/Modules/Management/Views/Marketing/Campaigns/View.php:468:    const cancelBtn = $(`.cancel-btn[data-field="${field}"]`);
app/Modules/Management/Views/Marketing/Campaigns/View.php:480:    $(`#${field}_display`).show();
app/Modules/Management/Views/Marketing/Campaigns/View.php:481:    $(`#${field}_input`).addClass('d-none');
app/Modules/Management/Views/Marketing/Campaigns/View.php:482:    $(`.edit-btn[data-field="${field}"]`).show();
app/Modules/Management/Views/Marketing/Campaigns/View.php:483:    $(`.save-btn[data-field="${field}"]`).addClass('d-none');
app/Modules/Management/Views/Marketing/Campaigns/View.php:484:    $(`.cancel-btn[data-field="${field}"]`).addClass('d-none');
app/Modules/Management/Views/Marketing/Campaigns/View.php:489:    const newText = $(`#${field}_input`).val().trim();
app/Modules/Management/Views/Marketing/Campaigns/View.php:506:                $(`#${field}_display`).text(newText).show();
app/Modules/Management/Views/Marketing/Campaigns/View.php:507:                $(`#${field}_input`).addClass('d-none');
app/Modules/Management/Views/Marketing/Campaigns/View.php:508:                $(`.edit-btn[data-field="${field}"]`).show();
app/Modules/Management/Views/Marketing/Campaigns/View.php:509:                $(`.save-btn[data-field="${field}"]`).addClass('d-none');
app/Modules/Management/Views/Marketing/Campaigns/View.php:510:                $(`.cancel-btn[data-field="${field}"]`).addClass('d-none');
app/Modules/Management/Views/Marketing/modals/insightPreview.php:129:    fetch(`/index.php/API/Marketing/getTopKeywordChart/<?= esc($summary['id']) ?>`)
app/Modules/Management/Views/Marketing/modals/insightPreview.php:163:    fetch(`/index.php/API/Marketing/generateThreadFromSummary/<?= esc($summary['id']) ?>`)
app/Modules/Management/Views/Marketing/modals/insightPreview.php:170:                    container.innerHTML += `<p><strong>Part ${i + 1}:</strong> ${tweet}</p>`;
app/Modules/Management/Views/Marketing/financialNews.php:128:                    console.error(`Error fetching logo for ${symbol}:`, data.error);
app/Modules/Management/Views/Marketing/financialNews.php:133:                console.error(`Error fetching logo for ${symbol}:`, error);
app/Modules/Management/Views/Marketing/financialNews.php:145:            const row = document.querySelector(`tr[data-symbol="${result.symbol}"]`);
app/Modules/Management/Views/Marketing/financialNews.php:149:                row.querySelector('td:nth-child(2)').innerHTML = `<img src="${result.image_url}" alt="Logo" style="width: 50px; height: auto;">`;
app/Modules/Management/Views/Marketing/financialNews.php:150:                row.querySelector('td:nth-child(3)').innerHTML = `<em class="icon ni ni-alert-circle text-warning"></em><span>Pending Approval</span>`;
app/Modules/Management/Views/Marketing/financialNews.php:153:                row.querySelector('td:nth-child(3)').innerHTML = `<em class="icon ni ni-cross-circle text-warning"></em><span>Not Found</span>`;
app/Modules/Management/Views/Marketing/financialNews.php:155:                row.querySelector('td:nth-child(3)').innerHTML = `<em class="icon ni ni-alert-circle text-danger"></em><span>Error</span>`;
app/Modules/Management/Views/Marketing/resources/standaloneScraper.php:50:                                    primaryTab.innerHTML = `<p>${data.data.content || 'No content available'}</p>`;
app/Modules/Management/Views/Marketing/resources/standaloneScraper.php:53:                                    socialMediaTab.innerHTML = `<p>${data.data.social_media_content || 'No social media content available'}</p>`;
app/Modules/Management/Views/Marketing/resources/standaloneScraper.php:56:                                    rawDataTab.innerHTML = `<pre>${JSON.stringify(data.data, null, 2)}</pre>`;
app/Modules/Management/Views/Marketing/resources/standaloneScraper.php:131:    contentCell.innerHTML = `<p>${truncateText(data.content || 'No content', 30)}</p>`;
app/Modules/Management/Views/Marketing/resources/standaloneScraper.php:142:            linksHtml += `<li><a class="dropdown-item" href="${link.href}" target="_blank">${link.text}</a></li>`;
app/Modules/Management/Views/Marketing/resources/standaloneScraper.php:152:    urlCell.innerHTML = `<a href="${data.url}" target="_blank">${data.url}</a>`;
app/Modules/Management/Views/Marketing/resources/standaloneScraper.php:178:                contentCell.innerHTML = `<p>${truncateText(scrape.content || 'No content', 30)}</p>`;
app/Modules/Management/Views/Marketing/resources/standaloneScraper.php:190:                        linksHtml += `<li><a class="dropdown-item" href="${link.href}" target="_blank">${link.text}</a></li>`;
app/Modules/Management/Views/Marketing/resources/standaloneScraper.php:200:                urlCell.innerHTML = `<a href="${scrape.url}" target="_blank">${scrape.url}</a>`;
app/Modules/Management/Views/Marketing/resources/standaloneAddSubscriberForm.php:56:                alert(data.message + (data.error ? `\n\nServer Response:\n${data.error}` : ''));
app/Modules/Management/Views/Marketing/resources/standaloneScraperForm.php:101:    fetch(`<?= site_url('Management/Marketing/generatePostsFromSummary') ?>/${id}`)
app/Modules/Management/Views/Marketing/resources/standaloneScraperForm.php:111:    fetch(`<?= site_url('Management/Marketing/getScrapeDetails') ?>/${id}`)
app/Modules/Management/Views/Marketing/resources/standaloneScraperForm.php:121:    fetch(`<?= site_url('Management/Marketing/deleteScrape') ?>/${id}`, {
app/Modules/Management/Views/Marketing/resources/timelineGroupedView.php:56:    fetch(`/index.php/API/Marketing/PreviewGeneratedPost/${summaryId}`)
app/Modules/Management/Views/Marketing/resources/timelineGroupedView.php:77:        fetch(`/index.php/API/Marketing/getTopKeywordChart/${summaryId}`)
app/Modules/Management/Views/Marketing/resources/generatedSummaries.php:419:                return `<span class="badge bg-light me-1 text-dark">#${tag}</span>`;
app/Modules/Management/Views/Marketing/resources/generatedSummaries.php:423:        hashtagsBlock.innerHTML = `<strong>#Tags:</strong> ${tagsHtml}`;
app/Modules/Management/Views/Marketing/resources/generatedSummaries.php:430:        ctaBlock.innerHTML = `<strong>üì£ CTA:</strong> ${summary.cta}`;
app/Modules/Management/Views/Marketing/resources/generatedSummaries.php:470:        .map(([word]) => `<span class="badge bg-info text-dark me-1">#${word}</span>`)
app/Modules/Management/Views/Marketing/resources/generatedSummaries.php:473:    trendingArea.innerHTML = `<strong>üìà Trending:</strong> ${topKeywords || 'No trending keywords yet'}`;
app/Modules/Management/Views/Marketing/resources/controlPanelBlock.php:147:        updateStatus(`‚è≥ Approving #${id}...`);
app/Modules/Management/Views/Marketing/resources/controlPanelBlock.php:149:            const response = await fetch(`<?= site_url('API/Management/approveBufferItem/') ?>${id}`, {
app/Modules/Management/Views/Marketing/resources/controlPanelBlock.php:160:            updateStatus(`‚ùå Error: ${err.message}`, true);
app/Modules/Management/Views/Marketing/resources/controlPanelBlock.php:177:                statusEl.textContent = `‚úÖ ${data.results.success} regenerated, ${data.results.skipped} skipped, ${data.results.errors} errors.`;
app/Modules/Management/Views/Marketing/resources/controlPanelBlock.php:209:        updateStatus(`‚è≥ Rejecting #${id}...`);
app/Modules/Management/Views/Marketing/resources/controlPanelBlock.php:211:            const response = await fetch(`<?= site_url('API/Management/rejectBufferItem/') ?>${id}`, {
app/Modules/Management/Views/Marketing/resources/controlPanelBlock.php:222:            updateStatus(`‚ùå Error: ${err.message}`, true);
app/Modules/Management/Views/Marketing/resources/controlPanelBlock.php:235:            updateStatus(`‚úÖ ${data.message}`);
app/Modules/Management/Views/Marketing/resources/controlPanelBlock.php:236:            document.querySelector(`#bufferTableBody tr td:first-child:contains(${id})`).parentElement.remove();
app/Modules/Management/Views/Marketing/resources/controlPanelBlock.php:238:            updateStatus(`‚ùå ${data.message}`, true);
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:87:    fetch(`/API/Management/fetchBufferPaginated?page=${page}&limit=20&only_suggested=${showOnlySuggested ? 1 : 0}`)
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:98:              `Page ${pagination.page} of ${pagination.pages}`;
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:105:    updateStatus(`‚è≥ Approving #${id}...`);
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:106:    fetch(`/API/Management/approveBufferItem/${id}`)
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:112:            updateStatus(`‚ùå Error: ${err.message}`, true);
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:123:            fetch(`/API/Management/updatePlatformToggle/${id}`, {
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:190:        const response = await fetch(`/API/Management/scheduleApprovedPost/${id}`, {
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:211:        updateStatus(`‚úÖ ${data.message}`);
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:212:        document.querySelector(`#bufferTableBody tr td:first-child:contains(${id})`).parentElement.remove();
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:214:        updateStatus(`‚ùå ${data.message}`, true);
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:230:    updateStatus(`‚è≥ Rejecting #${id}...`);
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:231:    fetch(`/API/Management/rejectBufferItem/${id}`)
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:237:            updateStatus(`‚ùå Error: ${err.message}`, true);
app/Modules/Management/Views/Marketing/resources/bufferDashboard.php:262:        fetch(`/API/Marketing/updateBufferScheduleInterval/${id}`, {
app/Modules/User/Views/Dashboard/Goals/Monthly/mobile_table.php:145:                                                        `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>` :
app/Modules/User/Views/Dashboard/Goals/Monthly/browser_table.php:199:                                                data[8] = `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>`;
app/Modules/User/Views/Dashboard/Goals/mobile_table.php:145:                                                        `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>` :
app/Modules/User/Views/Dashboard/Goals/Weekly/mobile_table.php:145:                                                        `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>` :
app/Modules/User/Views/Dashboard/Goals/Weekly/browser_table.php:199:                                                data[8] = `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>`;
app/Modules/User/Views/Dashboard/Goals/All/mobile_table.php:145:                                                        `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>` :
app/Modules/Management/Views/Marketing/Exchanges/includes/website.php:234:                        ${token.discord ? `<a href="${token.discord}" target="_blank"><em class="icon myfs-md bi bi-discord"></em></a>` : ''}
app/Modules/Management/Views/Marketing/Exchanges/includes/website.php:235:                        ${token.facebook ? `<a href="${token.facebook}" target="_blank"><em class="icon myfs-md ni ni-facebook-f"></em></a>` : ''}
app/Modules/Management/Views/Marketing/Exchanges/includes/website.php:236:                        ${token.telegram ? `<a href="${token.telegram}" target="_blank"><em class="icon myfs-md ni ni-telegram"></em></a>` : ''}
app/Modules/Management/Views/Marketing/Exchanges/includes/website.php:237:                        ${token.twitter ? `<a href="${token.twitter}" target="_blank"><em class="icon myfs-md ni ni-twitter"></em></a>` : ''}
app/Modules/User/Views/Dashboard/Goals/All/browser_table.php:199:                                                data[8] = `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>`;
app/Modules/User/Views/Dashboard/Goals/browser_table.php:199:                                                data[8] = `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>`;
app/Modules/User/Views/Dashboard/Goals/Daily/mobile_table.php:145:                                                        `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>` :
app/Modules/User/Views/Dashboard/index/transaction-modal-12112024.php:43:        const promoCode = $('#promo_code_input').val(); // Assume a promo code input field with ID `promo_code_input`
app/Modules/User/Views/Dashboard/index/transaction-modal-12112024.php:45:        const url = `<?= site_url('Dashboard/Transaction-Modal/') ?>${formtype}${endpoint}${accountid}${category}${platform}?promo_code=${promoCode}`;
app/Modules/User/Views/Dashboard/index/transaction-modal-12112024.php:66:                        script.src = `https://www.paypal.com/sdk/js?client-id=<?= $client_id; ?>&currency=USD&debug=true`;
app/Modules/User/Views/Dashboard/index/transaction-modal-02072025.php:43:        const url = `<?= site_url('Dashboard/Transaction-Modal/')?>${formtype}${endpoint}${accountid}${category}${platform}`;
app/Modules/User/Views/Dashboard/index/transaction-modal-02072025.php:64:                        script.src = `https://www.paypal.com/sdk/js?client-id=<?= $client_id; ?>&currency=USD&debug=true`; 
app/Modules/User/Views/Dashboard/index/transaction-modal.php:38:        let url = `<?= site_url('Dashboard/Transaction-Modal/')?>${formtype}${endpoint}${accountid}${category}${platform}`;
app/Modules/Management/Views/Marketing/dashboard.txt:948:        // Step 1: Fetch raw email content (assume it's already in `bf_marketing_scraper`)
app/Modules/Management/Views/Marketing/dashboard.txt:961:                // Step 5: Store content in `bf_marketing_temp_scraper`
app/Modules/Management/Views/Marketing/dashboard.txt:1853:        exec($command, $output, $status);
app/Modules/Management/Views/Marketing/dashboard.txt:1892:        // Store generated content in `bf_marketing_scraper` as automated logs
app/Modules/Management/Views/Marketing/dashboard.txt:2112:        // Store generated fallback content in `bf_marketing_scraper` for future reference
app/Modules/Management/Views/Marketing/dashboard.txt:4051:        curl_exec($ch);
app/Modules/Management/Views/Marketing/dashboard.txt:4253:        $response = curl_exec($ch);
app/Modules/Management/Views/Marketing/dashboard.txt:4874:        $response = curl_exec($ch);
app/Modules/Management/Views/Marketing/dashboard.txt:5349:        $response = curl_exec($ch);
app/Modules/Management/Views/Marketing/dashboard.txt:6015:        // Assuming `MyMIMarketing` has a method to retrieve banners based on userId.
app/Modules/Management/Views/Marketing/dashboard.txt:6691:                    linksHtml += `<li><a class="dropdown-item" href="${link.href}" target="_blank">${link.text}</a></li>`;
app/Modules/Management/Views/Marketing/dashboard.txt:6702:                `<a href="${data.url}" target="_blank">${data.url}</a>`,
app/Modules/Management/Views/Marketing/Schedule/Add.php:264:        const redirectURL = `<?php //echo $redirectURL; ?>`;
app/Modules/User/Views/Dashboard/modals/onboarding.php:32:        let url = `<?= site_url('Dashboard/Onboarding-Modal/')?>${formtype}${endpoint}${accountid}`;
app/Modules/User/Views/Auctions/item.php:184:                    row.innerHTML = `<span>Bidder #${bid.bidder_id}</span><span>${(bid.amount_cents / 100).toFixed(2)} MYMIGold</span>`;
app/Modules/Management/Views/API/BitcoinJS.php:22:        'description' => 'This function takes an array of inputs and an array of outputs and creates a new transaction. Each input should be an object with a `txid` and a `vout` property. Each output should be an object with an `address` and a `value` property.',
app/Modules/Management/Views/API/BitcoinJS.php:32:        'description' => 'This function takes a transaction and returns an array of its inputs. Each input is an object with a `txid` and a `vout` property.',
app/Modules/Management/Views/API/BitcoinJS.php:37:        'description' => 'This function takes a transaction and returns an array of its outputs. Each output is an object with an `address` and a `value` property.',
app/Modules/Management/Views/index.php:342:    //         $(`#${tableID}`).DataTable({
app/Modules/Management/Views/Email/campaigns.php:76:                                                            countdown<?= $campaign['id'] ?>.textContent = `${hours}h ${minutes}m ${seconds}s`;
app/Modules/Management/Views/Email/campaigns.php:132:    if (!confirm(`‚ö†Ô∏è Are you sure you want to delete ${selected.length} campaigns?`)) return;
app/Modules/Management/Views/Email/campaigns.php:135:        await fetch(`<?= site_url('API/Email/deleteCampaign') ?>/${campaignId}`, {
app/Modules/Management/Views/Email/campaigns.php:152:        await fetch(`<?= site_url('API/Email/scheduleCampaignApi') ?>/${campaignId}`, {
app/Modules/Management/Views/Email/campaigns.php:173:        await fetch(`<?= site_url('API/Email/scheduleCampaignApi') ?>/${campaignId}`, {
app/Modules/Management/Views/Email/campaigns.php:189:    const res = await fetch(`<?= site_url('API/Email/cloneCampaign/') ?>${campaignId}`);
app/Modules/Management/Views/Email/modals/cloneCampaign.php:24:    const response = await fetch(`<?= site_url('API/Email/cloneCampaign/') ?>${encodeURIComponent(campaignId)}`);
app/Modules/Management/Views/Email/modals/createDraftCampaign.php:41:    const response = await fetch(`<?= site_url('API/Email/createDraftCampaign') ?>`, {
app/Modules/Management/Views/Email/modals/editCampaign.php:35:    const response = await fetch(`<?= site_url('API/Email/updateCampaign') ?>/${id}`, {
app/Modules/User/Views/Investments/tradeTracker-working-12082024.php:120:        $('#trade-tracker-table thead tr').append(`<th>${columnName}</th>`); // Add header
app/Modules/Management/Views/Email/modals/sendCampaign.php:37:    const response = await fetch(`<?= site_url('API/Email/createDraftCampaign') ?>`, {
app/Modules/Management/Views/Email/resources/controlPanelBlock.php:54:    const response = await fetch(`<?= site_url('API/Email/cloneCampaign/') ?>${campaignId}`);
app/Modules/Management/Views/Email/resources/controlPanelBlock.php:68:    const response = await fetch(`<?= site_url('API/Email/createDraftCampaign') ?>`, {
app/Modules/Management/Views/Email/resources/controlPanelBlock.php:125:    dynamicModalLoader('Schedule Campaign', `<?= site_url('Management/Email/scheduleCampaignModal/') ?>${id}`, 'modal-md');
app/Modules/Management/Views/Email/campaign_dashboard.php:59:        const response = await fetch(`<?= site_url('API/Email/fetchTagAnalytics') ?>`);
app/Modules/Management/Views/Email/campaign_dashboard.php:68:                li.textContent = `${tag} ‚Äî ${count} campaigns`;
app/Modules/Management/Views/Email/campaign_dashboard.php:82:        const res = await fetch(`<?= site_url('API/Email/getCampaignStats') ?>/${campaignId}`);
app/Modules/User/Views/Investments/Add/user_fields.php:182:        console.error(`Failed to attach event listener for ${event}: ${error}`);
app/Modules/User/Views/Investments/Add/user_fields.php:184:        alert(`Failed to attach event listener for ${event}`);
app/Modules/User/Views/Investments/Add/user_fields.php:224:    let optionHTML = options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
app/Modules/User/Views/Investments/Add/user_fields.php:243:            walletOptions += `<option value="${wallet.id}">${wallet.nickname}</option>`;
app/Modules/User/Views/Investments/Add/user_fields.php:265:        extraAttrStr += ` ${attr}="${extraAttributes[attr]}"`;
app/Modules/User/Views/Investments/Add/user_fields.php:269:        let optionTags = options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
app/Modules/User/Views/Investments/Add/user_fields.php:329:                options += `<option value="${symbol.value}">${symbol.text}</option>`;
app/Modules/User/Views/Investments/Add/user_fields.php:357:                    $('#wallet').append(`<option value="${data.walletId}" selected>${newWalletName}</option>`).selectpicker('refresh');
app/Modules/User/Views/Investments/Add/user_fields.php:546:        let apiURL = `${baseUrl}${selectedType}/${symbol}`;
app/Modules/User/Views/Investments/Add/user_fields.php:550:            throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:182:            console.error(`Failed to attach event listener for ${event}: ${error}`);
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:184:            alert(`Failed to attach event listener for ${event}`);
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:225:        let optionHTML = options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:244:                walletOptions += `<option value="${wallet.id}">${wallet.nickname}</option>`;
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:266:            extraAttrStr += ` ${attr}="${extraAttributes[attr]}"`;
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:270:            let optionTags = options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:486:            if (selectPicker.find(`option[value="${inputVal}"]`).length === 0 && inputVal !== '') {
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:490:                selectPicker.prepend(`<option class="dynamic-option" value="${inputVal}">${inputVal}</option>`).selectpicker('refresh');
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:560:            const fullUrl = `${baseUrl}${selectedType}`;
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:563:                throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:571:                    options += `<option value="${symbol}">${symbol}</option>`;
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:578:            console.log(`Failed to fetch symbols: ${error}`);
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:591:            let apiURL = `${baseUrl}${selectedType}/${symbol}`;
app/Modules/User/Views/Investments/Add/user_fields-04042024.php:595:                throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/User/Views/Investments/Add/form.php:137:                url: `${baseUrl}${selectedType}`,
app/Modules/User/Views/Investments/Add/form.php:143:                            symbols += `<option value="${match["1. symbol"]}">${match["1. symbol"]} - ${match["2. name"]}</option>`;
app/Modules/User/Views/Investments/Add/form.php:147:                    if (query) symbols += `<option value="${query}">${query} - Add New</option>`;
app/Modules/User/Views/Investments/Add/form.php:168:        //     let apiURL = `${baseUrl}${selectedType}/${symbol}`;
app/Modules/User/Views/Investments/Add/form.php:171:        //         if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/User/Views/Investments/Add/form.php:184:                let apiURL = `${baseUrl}${selectedType}/${symbol}`;
app/Modules/User/Views/Investments/Add/form.php:188:                    throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/User/Views/Investments/Add/user_fields-09162023.php:219:        let optionHTML = options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
app/Modules/User/Views/Investments/Add/user_fields-09162023.php:238:                walletOptions += `<option value="${wallet.id}">${wallet.nickname}</option>`;
app/Modules/User/Views/Investments/Add/user_fields-09162023.php:260:            extraAttrStr += ` ${attr}="${extraAttributes[attr]}"`;
app/Modules/User/Views/Investments/Add/user_fields-09162023.php:264:            let optionTags = options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
app/Modules/User/Views/Investments/Add/user_fields-09162023.php:537:            const response = await fetch(`getSymbolsByTradeType/${selectedType}`);
app/Modules/User/Views/Investments/Add/user_fields-09162023.php:539:                throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/User/Views/Investments/Add/user_fields-09162023.php:548:                    options += `<option value="${symbol}" data-tokens="${symbol}">${symbol}</option>`;
app/Modules/User/Views/Investments/Add/user_fields-09162023.php:572:        let apiURL = `${baseUrl}${selectedType}/${symbol}`;
app/Modules/User/Views/Investments/Add/user_fields-09162023.php:684:    //     let apiURL = `/API/${apiFunction}/${selectedType}/${symbol}`;
app/Modules/User/Views/Investments/Add/user_fields_orig.php:190:            console.error(`Failed to attach event listener for ${event}: ${error}`);
app/Modules/User/Views/Investments/Add/user_fields_orig.php:192:            alert(`Failed to attach event listener for ${event}`);
app/Modules/User/Views/Investments/Add/user_fields_orig.php:233:        let optionHTML = options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
app/Modules/User/Views/Investments/Add/user_fields_orig.php:252:                walletOptions += `<option value="${wallet.id}">${wallet.nickname}</option>`;
app/Modules/User/Views/Investments/Add/user_fields_orig.php:274:            extraAttrStr += ` ${attr}="${extraAttributes[attr]}"`;
app/Modules/User/Views/Investments/Add/user_fields_orig.php:278:            let optionTags = options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
app/Modules/User/Views/Investments/Add/user_fields_orig.php:557:            const fullUrl = `${baseUrl}${selectedType}`;
app/Modules/User/Views/Investments/Add/user_fields_orig.php:560:                throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/User/Views/Investments/Add/user_fields_orig.php:569:                    options += `<option value="${symbol}" data-tokens="${symbol}">${symbol}</option>`;
app/Modules/User/Views/Investments/Add/user_fields_orig.php:596:            let apiURL = `${baseUrl}${selectedType}/${symbol}`;
app/Modules/User/Views/Investments/Add/user_fields_orig.php:600:                throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/User/Views/Investments/Add/user_fields-new.php:219:        let optionHTML = options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
app/Modules/User/Views/Investments/Add/user_fields-new.php:238:                walletOptions += `<option value="${wallet.id}">${wallet.nickname}</option>`;
app/Modules/User/Views/Investments/Add/user_fields-new.php:260:            extraAttrStr += ` ${attr}="${extraAttributes[attr]}"`;
app/Modules/User/Views/Investments/Add/user_fields-new.php:264:            let optionTags = options.map(opt => `<option value="${opt}">${opt}</option>`).join('');
app/Modules/User/Views/Investments/Add/user_fields-new.php:549:            const response = await fetch(`getSymbolsByTradeType/${selectedType}`);
app/Modules/User/Views/Investments/Add/user_fields-new.php:551:                throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/User/Views/Investments/Add/user_fields-new.php:559:                    options += `<option value="${symbol}" data-tokens="${symbol}">${symbol}</option>`;
app/Modules/User/Views/Investments/Add/user_fields-new.php:580:        let apiURL = `/fetchRealTimeData/${selectedType}/${symbol}`;
app/Modules/User/Views/Investments/Add/user_fields-new.php:616:    //     let apiURL = `/fetchRealTimeData/${selectedType}/${symbol}`;
app/Modules/User/Views/Investments/Add/user_fields-new.php:710:    //     let apiURL = `/API/${apiFunction}/${selectedType}/${symbol}`;
app/Modules/User/Views/Investments/Add-12012024.php:104:            url: `${baseUrl}${selectedType}`,
app/Modules/User/Views/Investments/Add-12012024.php:110:                        symbols += `<option value="${match["1. symbol"]}">${match["1. symbol"]} - ${match["2. name"]}</option>`;
app/Modules/User/Views/Investments/Add-12012024.php:114:                if (query) symbols += `<option value="${query}">${query} - Add New</option>`;
app/Modules/User/Views/Investments/Add-12012024.php:135:        let apiURL = `${baseUrl}${selectedType}/${symbol}`;
app/Modules/User/Views/Investments/Add-12012024.php:138:            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/User/Views/Investments/Add.php:160:                url: `${baseUrl}/${selectedType}`,
app/Modules/User/Views/Investments/Add.php:189:            const selectedOption = $(this).find(`option[value="${selectedSymbol}"]`);
app/Modules/User/Views/Investments/Add.php:219:        let apiURL = `${baseUrl}/${selectedType}/${symbol}`;
app/Modules/User/Views/Investments/Add.php:222:            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/User/Views/Investments/Add.php:285:                        alert(`${formData.symbol} added to Watchlist!`);
app/Modules/User/Views/Investments/Add.php:287:                        alert(`Investment for ${formData.symbol} added successfully!`);
app/Modules/User/Views/Investments/Services.php:573:            console.error(`Error fetching from API: ${error}`);
app/Modules/User/Views/Investments/Services.php:594:            console.error(`Unsupported or missing configuration for trade type: ${category}`);
app/Modules/User/Views/Investments/Services.php:613:        const cacheKey = `currentPrice:${symbol}`;
app/Modules/User/Views/Investments/Services.php:618:        const url = `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${symbol}&interval=5min&apikey=70BOHXX3E6JX9H88`;
app/Modules/User/Views/Investments/Services.php:638:            const monthYear = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/Services.php:647:        console.error(`Error initializing investment chart: ${error}`);
app/Modules/User/Views/Investments/Services.php:649:        sendRealTimeAlert(`Error initializing investment chart: ${error}`);
app/Modules/User/Views/Investments/Services.php:656:        console.log(`Sending real-time alert: ${message}`);
app/Modules/User/Views/Investments/Services.php:661:    const date = new Date(`${monthYearStr}-01`);
app/Modules/User/Views/Investments/Services.php:665:    return `${month} '${year}`;
app/Modules/User/Views/Investments/Services.php:685:                console.warn(`Skipping item at index ${index} because it is null or undefined.`);
app/Modules/User/Views/Investments/Services.php:690:                console.warn(`Skipping item at index ${index} because 'symbol' is missing or invalid.`);
app/Modules/User/Views/Investments/Services.php:695:                console.warn(`Skipping item at index ${index} because 'tradeType' is missing or invalid.`);
app/Modules/User/Views/Investments/Services.php:700:                console.warn(`Skipping item at index ${index} because 'shares' is missing or invalid.`);
app/Modules/User/Views/Investments/Services.php:705:                console.warn(`Skipping item at index ${index} because 'category' is missing or invalid.`);
app/Modules/User/Views/Investments/Services.php:713:            const monthYear = `${closeDate.getFullYear()}-${String(closeDate.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/Services.php:775:            console.error(`Error fetching from API: ${error}`);
app/Modules/User/Views/Investments/Services.php:787:            console.error(`Unsupported or missing configuration for trade type: ${category}`);
app/Modules/User/Views/Investments/Services.php:798:        const cacheKey = `currentPrice:${symbol}`;
app/Modules/User/Views/Investments/Services.php:803:        const url = `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${symbol}&interval=5min&apikey=YOUR_API_KEY`;
app/Modules/User/Views/Investments/Services.php:822:            const monthYear = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/Services.php:867:    initInvestmentChart().catch(error => console.error(`Error initializing investment chart: ${error}`));
app/Modules/User/Views/Investments/index/Month_to_Month.php:76:            const monthYear = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index/Month_to_Month.php:89:            console.error(`Error parsing JSON from selector ${selector}:`, error);
app/Modules/User/Views/Investments/index/Month_to_Month.php:125:                console.warn(`Skipping unsupported trade type: ${item.category}`);
app/Modules/User/Views/Investments/index/Month_to_Month.php:130:            const monthYear = `${closeDate.getFullYear()}-${String(closeDate.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index/Month_to_Month.php:143:                const date = new Date(`${monthYear}-01`);
app/Modules/User/Views/Investments/index/Month_to_Month.php:183:        console.error(`Error initializing investment chart: ${error}`);
app/Modules/User/Views/Investments/index/Performance_Overview.php:249:            console.error(`Error fetching from API: ${error}`);
app/Modules/User/Views/Investments/index/Performance_Overview.php:270:            console.error(`Unsupported or missing configuration for trade type: ${category}`);
app/Modules/User/Views/Investments/index/Performance_Overview.php:289:        const cacheKey = `currentPrice:${symbol}`;
app/Modules/User/Views/Investments/index/Performance_Overview.php:294:        const url = `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${symbol}&interval=5min&apikey=70BOHXX3E6JX9H88`;
app/Modules/User/Views/Investments/index/Performance_Overview.php:314:            const monthYear = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index/Performance_Overview.php:323:        console.error(`Error initializing investment chart: ${error}`);
app/Modules/User/Views/Investments/index/Performance_Overview.php:325:        sendRealTimeAlert(`Error initializing investment chart: ${error}`);
app/Modules/User/Views/Investments/index/Performance_Overview.php:332:        console.log(`Sending real-time alert: ${message}`);
app/Modules/User/Views/Investments/index/Performance_Overview.php:337:    const date = new Date(`${monthYearStr}-01`);
app/Modules/User/Views/Investments/index/Performance_Overview.php:341:    return `${month} '${year}`;
app/Modules/User/Views/Investments/index/Performance_Overview.php:361:                console.warn(`Skipping item at index ${index} because it is null or undefined.`);
app/Modules/User/Views/Investments/index/Performance_Overview.php:366:                console.warn(`Skipping item at index ${index} because 'symbol' is missing or invalid.`);
app/Modules/User/Views/Investments/index/Performance_Overview.php:371:                console.warn(`Skipping item at index ${index} because 'tradeType' is missing or invalid.`);
app/Modules/User/Views/Investments/index/Performance_Overview.php:376:                console.warn(`Skipping item at index ${index} because 'shares' is missing or invalid.`);
app/Modules/User/Views/Investments/index/Performance_Overview.php:381:                console.warn(`Skipping item at index ${index} because 'category' is missing or invalid.`);
app/Modules/User/Views/Investments/index/Performance_Overview.php:389:            const monthYear = `${closeDate.getFullYear()}-${String(closeDate.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index/Insights-test.php:182:        let apiURL = `${baseUrl}${userID}`;
app/Modules/User/Views/Investments/index/Insights-test.php:218:            const assetRow = document.querySelector(`#watchlistTableBody .asset-${asset.id}`);
app/Modules/User/Views/Investments/index/Insights-test.php:237:            const tradeRow = document.querySelector(`#activeTradesTableBody .trade-${trade.id}`);
app/Modules/User/Views/Investments/index/Insights.php:192:        let apiURL = `${baseUrl}${userID}`;
app/Modules/User/Views/Investments/index/Insights.php:232:            const assetRow = document.querySelector(`#watchlistTableBody .asset-${asset.id}`);
app/Modules/User/Views/Investments/index/Insights.php:251:            const tradeRow = document.querySelector(`#activeTradesTableBody .trade-${trade.id}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:220:        console.error(`Error fetching from API: ${error}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:241:        console.error(`Unsupported or missing configuration for trade type: ${category}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:260:    const cacheKey = `currentPrice:${symbol}`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:265:    const url = `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${symbol}&interval=5min&apikey=70BOHXX3E6JX9H88`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:285:        const monthYear = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:294:    console.error(`Error initializing investment chart: ${error}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:296:    sendRealTimeAlert(`Error initializing investment chart: ${error}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:303:    console.log(`Sending real-time alert: ${message}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:308:  const date = new Date(`${monthYearStr}-01`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:312:  return `${month} '${year}`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:332:            console.warn(`Skipping item at index ${index} because it is null or undefined.`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:337:            console.warn(`Skipping item at index ${index} because 'symbol' is missing or invalid.`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:342:            console.warn(`Skipping item at index ${index} because 'tradeType' is missing or invalid.`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:347:            console.warn(`Skipping item at index ${index} because 'shares' is missing or invalid.`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:352:            console.warn(`Skipping item at index ${index} because 'category' is missing or invalid.`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:360:        const monthYear = `${closeDate.getFullYear()}-${String(closeDate.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:412://         console.error(`Error fetching from API: ${error}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:419://     const cacheKey = `currentPrice:${symbol}`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:424://     const url = `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${symbol}&interval=5min&apikey=70BOHXX3E6JX9H88`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:446://         const monthYear = `${closeDate.getFullYear()}-${String(closeDate.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:474://     console.error(`Error initializing investment chart: ${error}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:485:    //     return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:495:    //     labels.push(`${months[currentMonth]} ${currentYear}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:514:    //         console.log(`Fetching from API: ${url}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:519:    //         console.log(`API Response: ${textResponse}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:530:    //             console.log(`Parsed Data: ${a}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:540:    //         console.log(`Fetching live updates for ${symbol} of category ${category}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:543:    //         if (cache.has(`currentPrice:${symbol}`)) {
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:544:    //             console.log(`Cache hit for ${symbol}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:545:    //             return cache.get(`currentPrice:${symbol}`) * shares;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:549:    //         const url = `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${symbol}&interval=5min&apikey=${apiKey}`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:553:    //             console.log(`API Response for ${symbol}:`, apiResponse);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:557:    //             console.log(`Caching current price for ${symbol}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:558:    //             cache.set(`currentPrice:${symbol}`, currentPrice);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:562:    //             console.log(`Removing ${symbol} from cache`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:563:    //             cache.delete(`currentPrice:${symbol}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:568:    //             console.error(`Error fetching live updates for ${symbol}:`, error);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:601:    //                 console.log(`Net gains for ${investment.symbol}: ${netGains}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:617:    //                 console.log(`Net gains for ${investment.symbol}: ${netGains}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:736:    // return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:741:    // console.log(`Fetching from API: ${url}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:746:    // console.log(`API Response: ${textResponse}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:757:    //     console.log(`Parsed Data: ${a}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:767:    // console.log(`Fetching live updates for ${symbol} of category ${category}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:770:    // if (cache.has(`currentPrice:${symbol}`)) {
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:771:    //     console.log(`Cache hit for ${symbol}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:772:    //     return cache.get(`currentPrice:${symbol}`) * shares;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:776:    // const url = `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${symbol}&interval=5min&apikey=${apiKey}`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:783:    //     console.log(`Caching current price for ${symbol}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:784:    //     cache.set(`currentPrice:${symbol}`, currentPrice);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:788:    //     console.log(`Removing ${symbol} from cache`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:789:    //     cache.delete(`currentPrice:${symbol}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:794:    //     console.error(`Error fetching live updates for ${symbol}:`, error);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:821:    //     console.log(`Net gains for ${investment.symbol}: ${netGains}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:908:    //     console.log(`Fetching live updates for ${e} of category ${n}`);  // Changed 'type' to 'category'
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:910:    //     let r, s = localStorage.getItem(`currentPrice:${e}`), o, i;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:959:    //     i = `https://www.alphavantage.co/query?function=${o}&symbol=${e}&interval=5min&apikey=70BOHXX3E6JX9H88`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:973:    //             localStorage.setItem(`currentPrice:${e}`, r);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:974:    //             setTimeout(() => localStorage.removeItem(`currentPrice:${e}`), 60000);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:976:    //             console.error(`Error fetching live updates for ${e}:`, N);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:987:    //         console.error(`Error updating wallet for ${e.symbol}:`, t);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1066:    //     let currentPrice, cachedPrice = localStorage.getItem(`currentPrice:${symbol}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1115:    //     apiUrl = `https://www.alphavantage.co/query?function=${apiFunction}&symbol=${symbol}&interval=5min&apikey=YOUR_SERVER_SIDE_API_KEY`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1132:    //             localStorage.setItem(`currentPrice:${symbol}`, currentPrice);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1133:    //             setTimeout(() => localStorage.removeItem(`currentPrice:${symbol}`), 60000);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1135:    //             console.error(`Error fetching live updates for ${symbol}:`, err);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1146:    //         console.error(`Error updating wallet for ${wallet.symbol}: ${error}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1213:    //     let r = `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${e}&interval=5min&apikey=${apiKey}`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1214:    //     let n, s = localStorage.getItem(`currentPrice:${e}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1215:    //     // let r = `<?php echo site_url('API/fetchRealTimeData/'); ?>${a}/${e}`;
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1244:    //             localStorage.setItem(`currentPrice:${e}`, n);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1245:    //             setTimeout(() => localStorage.removeItem(`currentPrice:${e}`), 60000);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1247:    //             console.error(`Error fetching live updates for ${e}:`, l);  // Existing error log
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1258:    //         console.error(`Error updating wallet for ${record.symbol}: ${error}`);
app/Modules/User/Views/Investments/index/Performance_Overview-09282023.php:1365:            let monthYear = `${dateParts[0]}-${dateParts[1]}`;
app/Modules/Management/Views/Web_Design/Content_Creator/Sophtron/Sophtron_PHP.php:36:// $response 					= curl_exec($curl);
app/Modules/Management/Views/Web_Design/Content_Creator/Codat.php:67:$result = curl_exec($ch);
app/Modules/Management/Views/Web_Design/Content_Creator/Plaid/Integration.php:40:$result                         = curl_exec($ch);
app/Modules/Management/Views/Web_Design/Content_Creator/Plaid/Integration.php:92:                    throw new TypeError(`Expected a JSON response, but got ${contentType || 'unknown content type'}`);
app/Modules/Management/Views/Web_Design/Content_Creator/Plaid/Integration.php:97:                        throw new Error(`Server error: ${errorData.message || 'Unknown error'}`);
app/Modules/Management/Views/Web_Design/Content_Creator/Plaid/Integration.php:132:                        throw new TypeError(`Expected a JSON response, but got ${contentType || 'unknown content type'}`);
app/Modules/Management/Views/Web_Design/Content_Creator/Plaid/Integration.php:137:                            throw new Error(`Server error: ${errorData.message || 'Unknown error'}`);
app/Modules/Management/Views/Web_Design/Content_Creator/Sophtron_Integration.php:24:    config.headers.Authorization = `Bearer ${sophtronApiKey}`;
app/Modules/Management/Views/Web_Design/Content_Creator/Sophtron_Integration.php:56:// $response = curl_exec($curl);
app/Modules/Management/Views/Web_Design/Content_Creator/Sophtron_Integration.php:80:// $response = curl_exec($curl);
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:38:CodeIgniter provides a `CI_Controller` that is meant to be used as the basis for all of your own controllers. It handles the behind-the-scenes work of assigning class vars and the Loader so that you can access them. Bonfire extends this concept and provides 4 additional Controllers that can be used as base classes throughout your project. This helps you to keep from repeating code any more than necessary by providing a central place for any site-wide code to sit. For example, it makes a user object available that can be accessed from any controller, library, or view to know details about the current user. You can use it to set a custom theme for all of your public pages. And much more.
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:40:Each controller is stored in its own file in the `application/libraries` folder and the file is named the same as the class name. This allows the provided autoloader to easily find your base classes.
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:42:The `MY_Controller` file is currently not used by Bonfire and is left alone so that you can use it for your own needs.
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:52:All of the custom controllers extend from the `Base_Controller`.  This class extends the MX_Controller which gives you all of the power of WireDesign‚Äôs [HMVC](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home) available to all of your classes.  That allows for a different way of working, but also a very powerful one, and one that is not necessary to use.
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:64:* `$previous_page` and `$requested_page` class vars that help you know where you came from. These are auto-populated for you.
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:65:* `$current_user` class var that, if logged in, will contain all of the information from the users table, as well as a link to the user\'s avatar. This same information is automatically made available to the view files that are rendered with the [Template](layouts_and_views) class.
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:67:* Gets the `activity model` loaded and ready.
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:68:* Loads the `application language` file.
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:69:* If the child class sets `$requires_authentication` to TRUE, will ensure that the user is logged in, set the `$current_user` variable, and ensure that the user\'s chosen language is set.
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:74:The `Front_Controller` is intended to be used as the base for any public-facing controllers.  As such, anything that needs to be done for the front-end can be done here.
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:105:The following class variables are available to you from any controller that extends from `Base_Controller` or one of it\'s child classes.
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:108: If a user is logged in, there basic information will be stored in the `$current_user` class variable. This is also made available within views as `$current_user`. If the user is not logged in, the value will be `NULL`.
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:111:Will store the uri of the previous page, if that page was a page within your application. This is set during the `post_controller` hook and will filter out any pages in the `$ignore_pages` class variable of the `App_hooks` file.  
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:116:The page that the web server thinks you were requesting. Set during the `pre_controller` hook, it will attempt to determine the page that the user was requesting, while filtering out the `$ignore_pages` uris so that we don\'t get things like images, etc. 
app/Modules/Management/Views/Web_Design/Content_Creator/Budgeting/Paid_Status_Update.php:123:If set to TRUE, the Base_Controller will load up the authentication class, ensure that the user is logged in via `$this->auth->restrict()` and handle setting up the current user for access in the controller. 
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:144:                    return `<span class="row-id">${data}</span>`;
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:167:                ${letters.map((letter) => `<th>${letter}</th>`).join("")}
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:215:            const reference = `${columnLetter}${rowId}`;
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:266:                return `<input type="text" class="form-control formula-input" value="${inputValue}" placeholder="Enter value or formula">`;
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:271:        $('#trade-tracker-table thead tr:last-child').children().last().before(`<th>${columnName}</th>`);
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:288:                        return `<span class="row-id">${data}</span>`;
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:305:        console.log(`Column "${columnName}" added successfully.`);
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:353:                const valueInput = `<input type="text" class="form-control bordered formula-input" value="${inputValue}" placeholder="Enter value or formula">`;
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:354:                return `<div class="dual-input">${formulaDropdown} ${valueInput}</div>`;
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:365:        $('#trade-tracker-table thead tr:last-child').children().last().before(`<th>${columnName}</th>`);
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:382:                        return `<span class="row-id">${data}</span>`;
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:399:        console.log(`Column "${columnName}" added successfully.`);
app/Modules/User/Views/Investments/tradeTracker-full-functionality.php:443:            user_id: <?= $cuID ?>, // Assuming the backend sets `cuID` dynamically
app/Modules/User/Views/Investments/index-12022024.php:327://         console.error(`Error fetching from API: ${error}`);
app/Modules/User/Views/Investments/index-12022024.php:337://         console.error(`Unsupported or missing configuration for trade type: ${category}`);
app/Modules/User/Views/Investments/index-12022024.php:350://     const cacheKey = `currentPrice:${symbol}`;
app/Modules/User/Views/Investments/index-12022024.php:355://     const url = `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${symbol}&interval=5min&apikey=70BOHXX3E6JX9H88`;
app/Modules/User/Views/Investments/index-12022024.php:373://         const monthYear = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index-12022024.php:381://     const date = new Date(`${monthYearStr}-01`);
app/Modules/User/Views/Investments/index-12022024.php:385://     return `${month} '${year}`;
app/Modules/User/Views/Investments/index-12022024.php:403://             console.warn(`Skipping item at index ${index} because it is null or undefined.`);
app/Modules/User/Views/Investments/index-12022024.php:408://             console.warn(`Skipping item at index ${index} because 'symbol' is missing or invalid.`);
app/Modules/User/Views/Investments/index-12022024.php:413://             console.warn(`Skipping item at index ${index} because 'tradeType' is missing or invalid.`);
app/Modules/User/Views/Investments/index-12022024.php:418://             console.warn(`Skipping item at index ${index} because 'shares' is missing or invalid.`);
app/Modules/User/Views/Investments/index-12022024.php:423://             console.warn(`Skipping item at index ${index} because 'category' is missing or invalid.`);
app/Modules/User/Views/Investments/index-12022024.php:431://         const monthYear = `${closeDate.getFullYear()}-${String(closeDate.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index-12022024.php:435://             console.warn(`Skipping item at index ${index} because config is missing or invalid.`);
app/Modules/User/Views/Investments/index-12022024.php:480://     console.error(`Error initializing investment chart: ${error}`);
app/Modules/User/Views/Investments/index-12022024.php:482://     sendRealTimeAlert(`Error initializing investment chart: ${error}`);
app/Modules/User/Views/Investments/index-12022024.php:489://     console.log(`Sending real-time alert: ${message}`);
app/Modules/Management/Views/Web_Design/Content_Creator/FLinks/Flinks_API.php:51:    $response 					                    = curl_exec($curl);
app/Modules/Management/Views/Web_Design/Content_Creator/FLinks/Flinks_API.php:73:    $refresh_response 				                = curl_exec($refresh_curl);
app/Modules/Management/Views/Web_Design/Content_Creator/FLinks/Flinks_API.php:91:    $account_response 				                = curl_exec($account_curl);
app/Modules/Management/Views/Web_Design/Content_Creator/FLinks/Flinks_API.php:155:            $order_response 			            = curl_exec($order_curl);
app/Modules/User/Views/Investments/index.php:271:            const monthYear = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index.php:284:            console.error(`Error parsing JSON from selector ${selector}:`, error);
app/Modules/User/Views/Investments/index.php:320:                console.warn(`Skipping unsupported trade type: ${item.category}`);
app/Modules/User/Views/Investments/index.php:325:            const monthYear = `${closeDate.getFullYear()}-${String(closeDate.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index.php:338:                const date = new Date(`${monthYear}-01`);
app/Modules/User/Views/Investments/index.php:378:        console.error(`Error initializing investment chart: ${error}`);
app/Modules/Management/Views/Web_Design/Content_Creator/Codat/Get_Companies.php:24:$response = curl_exec($curl);
app/Modules/Management/Views/Web_Design/Content_Creator/Codat/Create_Company.php:23:$result = curl_exec($ch);
app/Modules/User/Views/Investments/index copy.php:548:            console.error(`Error fetching from API: ${error}`);
app/Modules/User/Views/Investments/index copy.php:569:            console.error(`Unsupported or missing configuration for trade type: ${category}`);
app/Modules/User/Views/Investments/index copy.php:588:        const cacheKey = `currentPrice:${symbol}`;
app/Modules/User/Views/Investments/index copy.php:593:        const url = `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${symbol}&interval=5min&apikey=70BOHXX3E6JX9H88`;
app/Modules/User/Views/Investments/index copy.php:613:            const monthYear = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index copy.php:622:        console.error(`Error initializing investment chart: ${error}`);
app/Modules/User/Views/Investments/index copy.php:624:        sendRealTimeAlert(`Error initializing investment chart: ${error}`);
app/Modules/User/Views/Investments/index copy.php:631:        console.log(`Sending real-time alert: ${message}`);
app/Modules/User/Views/Investments/index copy.php:636:    const date = new Date(`${monthYearStr}-01`);
app/Modules/User/Views/Investments/index copy.php:640:    return `${month} '${year}`;
app/Modules/User/Views/Investments/index copy.php:660:                console.warn(`Skipping item at index ${index} because it is null or undefined.`);
app/Modules/User/Views/Investments/index copy.php:665:                console.warn(`Skipping item at index ${index} because 'symbol' is missing or invalid.`);
app/Modules/User/Views/Investments/index copy.php:670:                console.warn(`Skipping item at index ${index} because 'tradeType' is missing or invalid.`);
app/Modules/User/Views/Investments/index copy.php:675:                console.warn(`Skipping item at index ${index} because 'shares' is missing or invalid.`);
app/Modules/User/Views/Investments/index copy.php:680:                console.warn(`Skipping item at index ${index} because 'category' is missing or invalid.`);
app/Modules/User/Views/Investments/index copy.php:688:            const monthYear = `${closeDate.getFullYear()}-${String(closeDate.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index copy.php:750:            console.error(`Error fetching from API: ${error}`);
app/Modules/User/Views/Investments/index copy.php:762:            console.error(`Unsupported or missing configuration for trade type: ${category}`);
app/Modules/User/Views/Investments/index copy.php:773:        const cacheKey = `currentPrice:${symbol}`;
app/Modules/User/Views/Investments/index copy.php:778:        const url = `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${symbol}&interval=5min&apikey=YOUR_API_KEY`;
app/Modules/User/Views/Investments/index copy.php:797:            const monthYear = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, "0")}`;
app/Modules/User/Views/Investments/index copy.php:842:    initInvestmentChart().catch(error => console.error(`Error initializing investment chart: ${error}`));
app/Modules/Management/Views/Web_Design/Content_Creator/Management/Users/Update_Users.php:28:    //     $result = curl_exec($ch);
app/Modules/Management/Views/Web_Design/Content_Creator/Management/Users/Update_Users.php:70:                        // $result = curl_exec($ch);
app/Modules/Management/Views/Web_Design/Content_Creator/Management/Update_Users.php:28:    //     $result = curl_exec($ch);
app/Modules/Management/Views/Web_Design/Content_Creator/Management/Update_Users.php:70:                        // $result = curl_exec($ch);
app/Modules/User/Views/Investments/resources/strategizer.php:136:            url: `/investments/strategies/${id}`,
app/Modules/User/Views/Investments/resources/strategizer.php:149:        $.get(`/investments/strategies/${id}`, function(data) {
app/Modules/User/Views/Investments/resources/strategizer.php:159:            url: `/investments/strategies/${id}`,
app/Modules/User/Views/Investments/resources/strategizer.php:178:            url: `/investments/goals/${id}`,
app/Modules/User/Views/Investments/resources/strategizer.php:191:        $.get(`/investments/goals/${id}`, function(data) {
app/Modules/User/Views/Investments/resources/strategizer.php:202:            url: `/investments/goals/${id}`,
app/Modules/User/Views/Investments/tradeTracker.php:138:                return `<input type="text" class="form-control symbol-input" placeholder="--Enter Symbol--" value="${data || ''}">`;
app/Modules/User/Views/Investments/tradeTracker.php:225:            $(this).html(`<input type="text" class="form-control" value="${value}">`).addClass('editing');
app/Modules/User/Views/Investments/tradeTracker.php:358:                    const row = document.querySelector(`tr[data-symbol="${symbol}"]`);
app/Modules/User/Views/Investments/tradeTracker.php:366:                statusBox.innerText = `‚úÖ Updated ${Object.keys(updated).length} tickers.`;
app/Modules/User/Views/Investments/tradeTracker.php:400:                    return `<input type="text" class="form-control symbol-input" value="${data || ''}" placeholder="Symbol">`;
app/Modules/User/Views/Investments/tradeTracker.php:427:                    return `<button class="btn btn-info show-summary">üìã</button>`;
app/Modules/User/Views/Investments/tradeTracker.php:435:                    return `<button class="btn btn-sm btn-success save-row">Save</button>`;
app/Modules/User/Views/Investments/tradeTracker.php:550:                console.log(`AI Summary for ${symbol}:`, res.summary);
app/Modules/User/Views/Investments/tradeTracker.php:621:        const tvLink = `https://www.tradingview.com/symbols/${exchange}-${symbol}/financials-overview/`;
app/Modules/User/Views/Investments/tradeTracker.php:622:        const tosLink = `https://trade.thinkorswim.com/trade?symbol=${symbol}`;
app/Modules/User/Views/Account/sessions.php:31:        const res = await fetch(`/Account/sessions/revoke/${sid}`, {
app/Modules/Management/Views/Projects/index/most_recent_content.php:84:                    linksHtml += `<li><a class="dropdown-item" href="${link.href}" target="_blank">${link.text}</a></li>`;
app/Modules/Management/Views/Projects/index/most_recent_content.php:95:                `<a href="${data.url}" target="_blank">${data.url}</a>`,
app/Modules/User/Views/Wallets/Delete.php:42:            confirmDeleteButton.setAttribute('href', `/index.php/Wallets/Delete/${accountType}/${walletId}`);
app/Modules/Management/Views/Alerts/index.php:460:                        return `<span class="text-muted">${data} (No Exchange)</span>`;
app/Modules/Management/Views/Alerts/index.php:489:                    return data ? `$${parseFloat(data).toFixed(2)}` : '<span class="text-muted">N/A</span>';
app/Modules/Management/Views/Alerts/index.php:496:                render: (data) => data ? `$${parseFloat(data).toFixed(2)}` : 'N/A'
app/Modules/Management/Views/Alerts/index.php:512:                        return `<span class="text-muted">${sign}$${delta}</span> <span class="${colorClass}">(${sign}${percent}%)</span>`;
app/Modules/Management/Views/Alerts/index.php:522:                render: (data) => data ? `$${parseFloat(data).toFixed(2)}` : 'N/A'
app/Modules/Management/Views/Alerts/index.php:529:                render: (data) => data ? `$${parseFloat(data).toFixed(2)}` : 'N/A'
app/Modules/Management/Views/Alerts/index.php:536:                render: (data) => data ? `${data}%` : 'N/A'
app/Modules/Management/Views/Alerts/index.php:593:                    return `<span class="badge ${isUp ? 'bg-success' : 'bg-danger'}">${data}/4 ${isUp ? '‚Üë' : '‚Üì'}</span>`;
app/Modules/Management/Views/Alerts/index.php:607:                        const tvLink = `https://www.tradingview.com/symbols/${row.exchange}-${row.ticker}/`;
app/Modules/Management/Views/Alerts/index.php:725:        const isCurrentlyHidden = !mainTable.column(`${columnNames[0]}:name`).visible();
app/Modules/Management/Views/Alerts/index.php:745:                    const col = dt.column(`${name}:name`);
app/Modules/Management/Views/Alerts/index.php:764:                        $editBtn.html(`<i class="icon ni ni-edit"></i> Edit`).attr('data-id', id);
app/Modules/Management/Views/Alerts/index.php:767:                        $manageBtn.html(`<i class="icon ni ni-chat"></i> Manage`).attr('data-id', manId);
app/Modules/Management/Views/Alerts/index.php:770:                        $deleteBtn.html(`<i class="icon ni ni-trash"></i> Hide`).attr('data-id', delId);
app/Modules/Management/Views/Alerts/index.php:824:                console.log(`Processed trade alert batch offset: ${currentOffset}`);
app/Modules/Management/Views/Alerts/index.php:1066:                        row.find('td.price-cell').text(`$${prices[ticker].toFixed(2)}`);
app/Modules/Management/Views/Alerts/modals/manageTradeAlert.php:176:        const display = $(`#${field}_display`);
app/Modules/Management/Views/Alerts/modals/manageTradeAlert.php:177:        const input = $(`#${field}_input`);
app/Modules/Management/Views/Alerts/modals/manageTradeAlert.php:178:        const saveBtn = $(`.save-btn[data-field="${field}"]`);
app/Modules/Management/Views/Alerts/modals/manageTradeAlert.php:179:        const cancelBtn = $(`.cancel-btn[data-field="${field}"]`);
app/Modules/Management/Views/Alerts/modals/manageTradeAlert.php:191:        $(`#${field}_display`).show();
app/Modules/Management/Views/Alerts/modals/manageTradeAlert.php:192:        $(`#${field}_input`).addClass('d-none');
app/Modules/Management/Views/Alerts/modals/manageTradeAlert.php:193:        $(`.edit-btn[data-field="${field}"]`).show();
app/Modules/Management/Views/Alerts/modals/manageTradeAlert.php:194:        $(`.save-btn[data-field="${field}"]`).addClass('d-none');
app/Modules/Management/Views/Alerts/modals/manageTradeAlert.php:195:        $(`.cancel-btn[data-field="${field}"]`).addClass('d-none');
app/Modules/Management/Views/Alerts/modals/manageTradeAlert.php:200:        const content = $(`#${targetId}`).text().trim();
app/Modules/Management/Views/Alerts/modals/viewTradeChart.php:300:                        $("#tradingview_chart").html(`<img src="/public/assets/images/Charts/${response.file_name}" width="100%" height="600px" />`);
app/Modules/Management/Views/Alerts/modals/createTradeAlert.php:508:            $('#tradingViewLink').attr('href', `https://www.tradingview.com/symbols/${exchange}-${symbol}/`);
app/Modules/Management/Views/Alerts/modals/createTradeAlert.php:509:            $('#thinkorSwimLink').attr('href', `https://trade.thinkorswim.com/trade?symbol=${symbol}`);
app/Modules/Management/Views/Alerts/modals/createTradeAlert.php:525:            $('#target_price_display').val(`$${target}`);
app/Modules/Management/Views/Alerts/modals/createTradeAlert.php:526:            $('#locked_profit_stop_display').val(`$${target}`);
app/Modules/Management/Views/Alerts/modals/createTradeAlert.php:582:                html += `<div class="alert alert-warning"><strong>${tf.toUpperCase()}:</strong> ${values.error}</div>`;
app/Modules/Management/Views/Alerts/modals/createTradeAlert.php:642:            url: `<?= site_url('API/Alerts/getFullMetrics') ?>`,
app/Modules/User/Views/Wallets/Link_Account/TD-Ameritrade-07202022.php:23:$response 					                    = curl_exec($curl);
app/Modules/User/Views/Wallets/Link_Account/TD-Ameritrade-07202022.php:43:$refresh_response 				                = curl_exec($refresh_curl);
app/Modules/User/Views/Wallets/Link_Account/TD-Ameritrade-07202022.php:60:$account_response 				                = curl_exec($account_curl);
app/Modules/User/Views/Wallets/Link_Account/TD-Ameritrade-07202022.php:116:        $order_response 			            = curl_exec($order_curl);
app/Modules/Management/Views/Alerts/resources/advisorMedia.php:91:                    status.html(`<span class="text-success">‚úÖ Media package ready.</span>`);
app/Modules/Management/Views/Alerts/resources/advisorMedia.php:93:                    status.html(`<span class="text-danger">‚ùå Failed to generate advisor media.</span>`);
app/Modules/Management/Views/Alerts/resources/advisorMedia.php:99:                status.html(`<span class="text-danger">‚ùå Error: ${xhr.responseText}</span>`);
app/Modules/User/Views/Wallets/Link_Account/TD-Ameritrade.php:23:$response 					                    = curl_exec($curl);
app/Modules/User/Views/Wallets/Link_Account/TD-Ameritrade.php:43:$refresh_response 				                = curl_exec($refresh_curl);
app/Modules/User/Views/Wallets/Link_Account/TD-Ameritrade.php:60:$account_response 				                = curl_exec($account_curl);
app/Modules/User/Views/Wallets/Link_Account/TD-Ameritrade.php:118:        $order_response 			            = curl_exec($order_curl);
app/Modules/User/Views/Wallets/Link_Account/TD-Ameritrade-B.php:23:$response 					                    = curl_exec($curl);
app/Modules/User/Views/Wallets/Link_Account/TD-Ameritrade-B.php:43:$refresh_response 				                = curl_exec($refresh_curl);
app/Modules/User/Views/Wallets/Link_Account/TD-Ameritrade-B.php:62:// $account_response 				                = curl_exec($account_curl);
app/Modules/User/Views/Wallets/Link_Account/TD-Ameritrade-B.php:118://         $order_response 			            = curl_exec($order_curl);
app/Modules/User/Views/Wallets/Add.php:209:                    throw new Error(`HTTP error! status: ${response.status}`);
app/Modules/Management/Controllers/AlertsController.php:214:            exec('php ' . FCPATH . 'spark trade:processAlerts > /dev/null 2>/dev/null &');
app/Modules/Management/Controllers/AlertsController.php:274:    //         exec('php ' . FCPATH . 'spark trade:processAlerts > /dev/null 2>/dev/null &');
app/Modules/Management/Controllers/AlertsController.php:437:            exec('php ' . FCPATH . 'spark trade:processAlerts > /dev/null 2>/dev/null &');
app/Modules/User/Views/Wallets/Link_Account (Original)/TD-Ameritrade.php:23:$response 					                    = curl_exec($curl);
app/Modules/User/Views/Wallets/Link_Account (Original)/TD-Ameritrade.php:43:$refresh_response 				                = curl_exec($refresh_curl);
app/Modules/User/Views/Wallets/Link_Account (Original)/TD-Ameritrade.php:60:$account_response 				                = curl_exec($account_curl);
app/Modules/User/Views/Wallets/Link_Account (Original)/TD-Ameritrade.php:116:        $order_response 			            = curl_exec($order_curl);
app/Modules/User/Views/Wallets/Details.orig.php:283:                                                $response = curl_exec($curl);
app/Modules/User/Views/Wallets/Details.orig.php:438:                                                $response = curl_exec($curl);
app/Modules/User/Views/Wallets/index.php:114:      btn.setAttribute('href', `/index.php/Wallets/Delete/${accountType}/${walletId}`);
app/Modules/Management/Controllers/MarketingController.php:216:        // üîó Inject buttons that use `posts` field to generate platform messages
app/Modules/Management/Controllers/MarketingController.php:217:        // (Handled in the view using `dynamicModalLoader()`)
app/Modules/Management/Controllers/MarketingController.php:956:        exec($command, $output, $status);
app/Modules/Management/Controllers/MarketingController.php:995:        // Store generated content in `bf_marketing_scraper` as automated logs
app/Modules/Management/Controllers/MarketingController.php:1232:        // Store generated fallback content in `bf_marketing_scraper` for future reference
app/Models/DripCampaignModel.php:37:            $exists = $this->db->query("SHOW COLUMNS FROM `bf_email_drip_email_tracking` LIKE '$field'")->getResult();
app/Models/DripCampaignModel.php:41:                $this->db->query("ALTER TABLE `bf_email_drip_email_tracking` ADD COLUMN `$field` $type");
app/Modules/User/Views/Wallets/Coin_Swap.php:166:        return fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${cryptoType.toLowerCase()}&vs_currencies=usd`)
app/Modules/User/Views/Wallets/Coin_Swap.php:172:        return fetch(`https://min-api.cryptocompare.com/data/price?fsym=${cryptoType}&tsyms=USD`)
app/Modules/User/Views/Wallets/Coin_Swap.php:179:        return fetch(`https://rest.coinapi.io/v1/exchangerate/${cryptoType}/USD`, {
app/Modules/User/Views/Wallets/index copy.php:180:$result                         = curl_exec($ch);
app/Modules/User/Views/Wallets/index copy.php:291:            confirmDeleteButton.setAttribute('href', `/index.php/Wallets/Delete/${accountType}/${walletId}`);
app/Models/PlaidModel.php:185:        $response = curl_exec($curl);
app/Models/PlaidModel.php:203:        $response = curl_exec($ch);
app/Models/PlaidModel.php:231:        $response = curl_exec($ch);
app/Modules/User/Views/Wallets/Purchase.php:151:        return fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${cryptoType.toLowerCase()}&vs_currencies=usd`)
app/Modules/User/Views/Wallets/Purchase.php:157:        return fetch(`https://min-api.cryptocompare.com/data/price?fsym=${cryptoType}&tsyms=USD`)
app/Modules/User/Views/Wallets/Purchase.php:164:        return fetch(`https://rest.coinapi.io/v1/exchangerate/${cryptoType}/USD`, {
app/Modules/User/Views/Wallets/Details/wallets.php:197:                                        $response = curl_exec($curl);
app/Models/AlertsModel.php:649:        $response = curl_exec($ch);
app/Models/AlertsModel.php:2538:        // Ensure `submitted_date` and `time` are always updated
app/Models/AlertsModel.php:2542:        // Ensure `alert_created` is marked as `1`
app/Models/AlertsModel.php:2545:        // Ensure `alert_count` is incremented by `1`
app/Models/AlertsModel.php:2551:        // Ensure `trade_type` is stored correctly in `type` column
app/Models/AlertsModel.php:2749:        $existingMessage = $this->db->table('bf_investment_alert_history')->where('symbol', $tradeAlert['ticker']) // If `symbol` is the correct column
app/Modules/User/Views/Wallets/types/wallets_block.php:405:    return neg ? `-$${v}` : `$${v}`;
app/Modules/User/Views/Wallets/types/wallets_block.php:515:    const existing = wrap.querySelector(`[data-wallet-id="${targetId}"]`);
app/Modules/User/Views/Wallets/types/wallets_block.php:596:    const node = wrap.querySelector(`[data-wallet-id="${id}"]`);
app/Modules/User/Views/Wallets/types/wallets_block.php:605:    if (!window.confirm(`Delete ${name}? This will mark it deleted.`)) return;
app/Modules/User/Views/Wallets/types/wallets_block.php:688:    section.querySelectorAll(`#link-button-${DOM}, #link-button-card-${DOM}`)
app/Modules/User/Views/Budget/Account_Overview/monthly_overview.php:149:                console.error(`Error parsing JSON from selector ${selector}:`, error);
app/Modules/User/Views/Budget/Account_Overview/monthly_overview.php:167:            labels.push(showYears ? `${MONTHS[currentMonth - 1]} ${currentYear}` : MONTHS[currentMonth - 1]);
app/Modules/User/Views/Budget/Account_Overview/monthly_overview.php:220:        const activeElement = document.querySelector(`${selector} .option.active`);
app/Modules/User/Views/Budget/Account_Overview/monthly_overview.php:258:        const options = document.querySelectorAll(`${selector} .option`);
app/Modules/User/Views/Budget/Recurring_Account/Schedule.php:146:                                        $recordAccountType = $record['accountType'] ?? 'N/A'; // Correctly access `accountType`
app/Modules/User/Views/Budget/Recurring_Account/Schedule.php:147:                                        $recordSourceType = $record['accountSourceType'] ?? 'N/A'; // Correctly access `accountSourceType`
app/Models/InvestmentModel.php:525:     * ‚úÖ Check If Ticker Exists in `bf_investment_tickers`
app/Models/InvestmentModel.php:1185:        // Replace `symbol` with the correct column name for the asset/ticker
app/Modules/User/Views/Budget/index.06012024.php:465:            myNames.push(`${element} ${currentYear}`);
app/Modules/User/Views/Budget/index.06012024.php:482:                if(result.has(`${cleanElement.year}${cleanElement.month}`)){
app/Modules/User/Views/Budget/index.06012024.php:483:                    let currentTotal = parseFloat(result.get(`${cleanElement.year}${cleanElement.month}`));
app/Modules/User/Views/Budget/index.06012024.php:485:                    result.set(`${cleanElement.year}${cleanElement.month}`, currentTotal.toFixed(2));
app/Modules/User/Views/Budget/index.06012024.php:487:                    result.set(`${cleanElement.year}${cleanElement.month}`, parseFloat(cleanElement.net_amount).toFixed(2));
app/Modules/User/Views/Budget/Add.php:350:                        location.href = `<?php echo site_url('/Budget/Recurring-Account/Schedule/'); ?>${accountID}`;
app/Modules/User/Views/Budget/Add.php:352:                        location.href = `<?php echo site_url('/Budget'); ?>`;
app/Modules/User/Views/Budget/index.orig.php:646:        myNames.push(`${element} ${currentYear}`);
app/Modules/User/Views/Budget/index.orig.php:678:        if(result.has(`${cleanElement.year}${cleanElement.month}`)){
app/Modules/User/Views/Budget/index.orig.php:679:            let currentTotal = parseFloat(result.get(`${cleanElement.year}${cleanElement.month}`));
app/Modules/User/Views/Budget/index.orig.php:681:            result.set(`${cleanElement.year}${cleanElement.month}`, currentTotal.toFixed(2));
app/Modules/User/Views/Budget/index.orig.php:683:            result.set(`${cleanElement.year}${cleanElement.month}`, parseFloat(cleanElement.net_amount).toFixed(2));
app/Modules/User/Views/Budget/index/historical_table.orig.php:252:                    data[8] = `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>`;
app/Modules/User/Views/Budget/index/overview_chart.php:225:                console.log(`‚úÖ Loaded ${key}:`, state[key]);
app/Modules/User/Views/Budget/index/overview_chart.php:227:                console.error(`‚ùå Failed to load ${key}`, json);
app/Modules/User/Views/Budget/index/overview_chart.php:230:            console.error(`‚ö†Ô∏è Error fetching ${key}:`, err);
app/Modules/User/Views/Budget/index/overview_chart.php:261:            labels.push(showYears ? `${MONTHS[currentMonth - 1]} ${currentYear}` : MONTHS[currentMonth - 1]);
app/Modules/User/Views/Budget/index/overview_chart.php:315:        const activeElement = document.querySelector(`${selector} .option.active`);
app/Modules/User/Views/Budget/index/overview_chart.php:361:                        callback: (value) => `$${value.toLocaleString()}`
app/Modules/User/Views/Budget/index/overview_chart.php:394:        const options = document.querySelectorAll(`${selector} .option`);
app/Modules/User/Views/Budget/index/overview_chart.php:436:                console.error(`Error parsing JSON from selector ${selector}:`, error);
app/Modules/User/Views/Budget/index/overview_chart.php:454:            labels.push(showYears ? `${MONTHS[currentMonth - 1]} ${currentYear}` : MONTHS[currentMonth - 1]);
app/Modules/User/Views/Budget/index/overview_chart.php:507:        const activeElement = document.querySelector(`${selector} .option.active`);
app/Modules/User/Views/Budget/index/overview_chart.php:541:                        callback: (value) => `$${value.toLocaleString()}`
app/Modules/User/Views/Budget/index/overview_chart.php:568:        const options = document.querySelectorAll(`${selector} .option`);
app/Models/SolanaModel.php:600:        $result = curl_exec($ch);
app/Modules/User/Views/Budget/index/historical_table.11152024.php:252:                    data[8] = `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>`;
app/Modules/User/Views/Budget/index/mobile_table.11152024.php:145:                                                        `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>` :
app/Modules/User/Views/Budget/index/active_table-09212025.php:172:                    data[8] = `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>`;
app/Modules/User/Views/Budget/index/browser_table.11152024.php:229:                                                data[8] = `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>`;
app/Modules/User/Views/Budget/index/historical_table.php:116:                    ? `<span style="color: red;">${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(subtotal)}</span>`
app/_archive/psr4_quarantine/app/Libraries/MyMIDexScreener06132024.php:145:        $response = curl_exec($ch);
app/_archive/psr4_quarantine/app/Libraries/MyMIMarketing-06162025.php:1178:        curl_exec($ch);
app/_archive/psr4_quarantine/app/Libraries/MyMIMarketing-06162025.php:1417:        $response = curl_exec($ch);
app/_archive/psr4_quarantine/app/Libraries/MyMIMarketing-06162025.php:3385:        $response = curl_exec($ch);
app/_archive/psr4_quarantine/app/Libraries/MyMIMarketing-06162025.php:4216:        $response = curl_exec($ch);
app/Modules/User/Views/Budget/index.09122025.php:274:                window.location.href = `<?=site_url('Budget/Search/')?>${encodeURIComponent(val)}`;
app/Modules/User/Views/Budget/index.09122025.php:355:            labels.push(showYears ? `${MONTHS[currentMonth - 1]} ${currentYear}` : MONTHS[currentMonth - 1]);
app/Modules/User/Views/Budget/index.09122025.php:505:                        callback: (value) => `$${value.toLocaleString()}`
app/_archive/psr4_quarantine/app/Libraries/MyMIInvestments.09112024.php:201:                $output = shell_exec($command);
app/_archive/psr4_quarantine/app/Libraries/MyMIInvestments.09112024.php:390:                $output = shell_exec($command);
app/_archive/psr4_quarantine/app/Libraries/MyMIInvestments.11112024.php:355:                $output = shell_exec($command);
app/_archive/psr4_quarantine/app/Libraries/MyMIInvestments.11112024.php:548:                $output = shell_exec($command);
app/Modules/User/Views/Budget/test.ts:30:        myNames.push(`${element} ${currentYear}`);
app/Modules/User/Views/Budget/test.ts:63:            if (result.has(`${cleanElement.year}${cleanElement.month}`)) {
app/Modules/User/Views/Budget/test.ts:64:                result.set(`${cleanElement.year}${cleanElement.month}`, result.get(`${cleanElement.year}${cleanElement.month}`) + parseFloat(cleanElement.gross_amount));
app/Modules/User/Views/Budget/test.ts:66:                result.set(`${cleanElement.year}${cleanElement.month}`, +parseFloat(cleanElement.gross_amount));
app/_archive/psr4_quarantine/app/Libraries/MyMIMarketing-05122025.php:878:        curl_exec($ch);
app/_archive/psr4_quarantine/app/Libraries/MyMIMarketing-05122025.php:1094:        $response = curl_exec($ch);
app/_archive/psr4_quarantine/app/Libraries/MyMIMarketing-05122025.php:2645:        $response = curl_exec($ch);
app/_archive/psr4_quarantine/app/Libraries/MyMIMarketing-05122025.php:3268:        $response = curl_exec($ch);
app/Modules/User/Views/Budget/Copy.php:222:                        location.href = `<?php echo site_url('/Budget/Recurring-Account/Schedule/'); ?>${accountID}`;
app/Modules/User/Views/Budget/Copy.php:224:                        location.href = `<?php echo site_url('/Budget'); ?>`;
app/Modules/User/Views/Calculator/form.php:88:                    result = eval(`${num1}${displayValue}${num2}`);
app/Modules/User/Views/Calculator/form.php:128:                document.getElementById('result').innerText = `Result: ${result.toFixed(2)}`;
app/_archive/psr4_quarantine/app/Modules/APIs/Controllers/AlertsController-06162025.php:282:        $response = curl_exec($ch);
app/_archive/psr4_quarantine/app/Modules/APIs/Controllers/AlertsController-06162025.php:821:            ->select('id, created_on, ticker, price, details, tv_chart, alert_created'); // ‚úÖ Include `alert_created`
app/_archive/psr4_quarantine/app/Modules/APIs/Controllers/AlertsController-06162025.php:823:        // ‚úÖ Apply `alert_created` Filter for Correct Table
app/_archive/psr4_quarantine/app/Modules/APIs/Controllers/AlertsController-06162025.php:835:        // ‚úÖ Handle Pagination (`-1` for All)
app/Modules/User/Views/Referral_Program/Create.php:114:        const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(referralLink)}&quote=${encodeURIComponent('Join me at MyMI Wallet and enjoy amazing financial tools!')}`;
app/Modules/User/Views/Referral_Program/Create.php:119:        const url = `https://twitter.com/intent/tweet?url=${encodeURIComponent(referralLink)}&text=${encodeURIComponent('Join me at MyMI Wallet for amazing financial tools!')}`;
app/Modules/User/Views/Referral_Program/Create.php:124:        const url = `https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(referralLink)}&title=${encodeURIComponent('Join MyMI Wallet')}&summary=${encodeURIComponent('Join me at MyMI Wallet and enjoy amazing financial tools!')}`;
app/Modules/User/Views/Referral_Program/index.php:202:            labels.push(`${MONTHS[(currentMonth - 1) % 12]} ${currentYear}`);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Marketing/News/Listing-Table.orig.php:75:    //                 return `<button onclick="summarizeArticle(${data})">Summarize</button>`;
app/_archive/psr4_quarantine/app/Modules/Management/Views/Marketing/Blog/Listing-Table.orig.php:206:    //                 return `<button onclick="summarizeArticle(${data})">Summarize</button>`;
app/_archive/psr4_quarantine/app/Modules/Management/Views/Marketing/index.04192025.php:525:        updateStatus(`‚è≥ Approving #${id}...`);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Marketing/index.04192025.php:527:            const response = await fetch(`<?= site_url('API/Management/approveBufferItem/') ?>${id}`, {
app/_archive/psr4_quarantine/app/Modules/Management/Views/Marketing/index.04192025.php:537:            updateStatus(`‚ùå Error: ${err.message}`, true);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Marketing/index.04192025.php:560:        updateStatus(`‚è≥ Rejecting #${id}...`);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Marketing/index.04192025.php:562:            const response = await fetch(`<?= site_url('API/Management/rejectBufferItem/') ?>${id}`, {
app/_archive/psr4_quarantine/app/Modules/Management/Views/Marketing/index.04192025.php:572:            updateStatus(`‚ùå Error: ${err.message}`, true);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Marketing/index.04192025.php:585:            updateStatus(`‚úÖ ${data.message}`);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Marketing/index.04192025.php:586:            document.querySelector(`#bufferTableBody tr td:first-child:contains(${id})`).parentElement.remove();
app/_archive/psr4_quarantine/app/Modules/Management/Views/Marketing/index.04192025.php:588:            updateStatus(`‚ùå ${data.message}`, true);
app/Modules/User/Views/Budget_Orig/index.php:646:        myNames.push(`${element} ${currentYear}`);
app/Modules/User/Views/Budget_Orig/index.php:678:        if(result.has(`${cleanElement.year}${cleanElement.month}`)){
app/Modules/User/Views/Budget_Orig/index.php:679:            let currentTotal = parseFloat(result.get(`${cleanElement.year}${cleanElement.month}`));
app/Modules/User/Views/Budget_Orig/index.php:681:            result.set(`${cleanElement.year}${cleanElement.month}`, currentTotal.toFixed(2));
app/Modules/User/Views/Budget_Orig/index.php:683:            result.set(`${cleanElement.year}${cleanElement.month}`, parseFloat(cleanElement.net_amount).toFixed(2));
app/_archive/psr4_quarantine/app/Modules/Management/Views/Alerts/modals/createTradeAlert-06282024.php:398:                alert(`‚ùó Required field missing: ${selector.replace('#', '').replace('_', ' ').toUpperCase()}`);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Alerts/modals/createTradeAlert-06282024.php:460:                        const $el = $(`#${key}`);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Alerts/modals/createTradeAlert-06282024.php:556:            $('#target_price_display').val(`$${targetPrice}`);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Alerts/modals/createTradeAlert-06282024.php:557:            $('#locked_profit_stop_display').val(`$${targetPrice}`);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Alerts/modals/createTradeAlert-06282024.php:592:        const currentSymbolKey = `${exchange}-${symbol}`;
app/_archive/psr4_quarantine/app/Modules/Management/Views/Alerts/modals/createTradeAlert-06282024.php:818:            $('#tradingViewLink').attr('href', `https://www.tradingview.com/symbols/${exchange}-${symbol}/`);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Alerts/modals/createTradeAlert-06282024.php:819:            $('#thinkorSwimLink').attr('href', `https://trade.thinkorswim.com/trade?symbol=${symbol}`);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Alerts/modals/createTradeAlert-06282024.php:875:            const selector = `[name="${field}"]`;
app/_archive/psr4_quarantine/app/Modules/Management/Views/Alerts/modals/createTradeAlert-06162025.php:350:            $('#tradingViewLink').attr('href', `https://www.tradingview.com/symbols/${exchange}-${symbol}/financials-overview/`);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Alerts/modals/createTradeAlert-06162025.php:351:            $('#thinkorSwimLink').attr('href', `https://trade.thinkorswim.com/trade?symbol=${symbol}`);
app/_archive/psr4_quarantine/app/Modules/Management/Views/Alerts/modals/createTradeAlert-06162025.php:372:        const currentSymbolKey = `${exchange}-${symbol}`;
app/Modules/User/Views/Projects/index/project_chart-working.php:96:                            callback: value => `$${value.toLocaleString()}`,
app/Modules/User/Views/Projects/index/project_chart-working.php:118:            const label = `${d.toLocaleString('default', { month: 'short' })} ${d.getFullYear()}`;
app/Modules/User/Views/Projects/index/project_chart-working.php:123:            const dataKey = `${year}-${month.toString().padStart(2, '0')}`;
app/Modules/User/Views/Projects/index/project_chart.php:71:            const label = `${date.toLocaleString('default', { month: 'short' })} ${date.getFullYear()}`;
app/Modules/User/Views/Projects/index/project_chart.php:72:            const key = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;
app/Modules/User/Views/Projects/index/project_chart.php:129:                            callback: value => `$${value.toLocaleString()}`,
app/Modules/User/Views/Projects/index/most_recent_content.php:84:                    linksHtml += `<li><a class="dropdown-item" href="${link.href}" target="_blank">${link.text}</a></li>`;
app/Modules/User/Views/Projects/index/most_recent_content.php:95:                `<a href="${data.url}" target="_blank">${data.url}</a>`,
app/_archive/psr4_quarantine/app/Modules/Management/Controllers/MarketingController.11202024.php:604:        exec($command, $output, $status);
app/_archive/psr4_quarantine/app/Models/WalletModel.orig.php:139:        $builder->select('trans_type, SUM(amount) as total_amount'); // Fix: changed `amount` alias
app/_archive/psr4_quarantine/app/Models/WalletModel.orig.php:266:    public function deleteCryptoWallet($walletId) // !! FIX THIS: Make it turn the `status` to `1`, not delete the record from the database so the user can reactivate the wallet if they wish (recover)
app/_archive/psr4_quarantine/app/Models/WalletModel.orig.php:442:    // using the `$this->db->table('table_name')->insert($data)` or `->update($data)` methods for CI4.
app/Modules/User/Views/Alerts/index.php:7:$alerts = $alerts ?? []; // Alerts fetched from `AlertsController.php`
app/Modules/User/Views/Alerts/index.php:215:                        return `<span class="text-muted">${data} (No Exchange)</span>`;
app/Modules/User/Views/Alerts/index.php:244:                    return data ? `$${parseFloat(data).toFixed(2)}` : '<span class="text-muted">N/A</span>';
app/Modules/User/Views/Alerts/index.php:251:                render: (data) => data ? `$${parseFloat(data).toFixed(2)}` : 'N/A'
app/Modules/User/Views/Alerts/index.php:267:                        return `<span class="text-muted">${sign}$${delta}</span> <span class="${colorClass}">(${sign}${percent}%)</span>`;
app/Modules/User/Views/Alerts/index.php:277:                render: (data) => data ? `$${parseFloat(data).toFixed(2)}` : 'N/A'
app/Modules/User/Views/Alerts/index.php:284:                render: (data) => data ? `$${parseFloat(data).toFixed(2)}` : 'N/A'
app/Modules/User/Views/Alerts/index.php:291:                render: (data) => data ? `${data}%` : 'N/A'
app/Modules/User/Views/Alerts/index.php:348:                    return `<span class="badge ${isUp ? 'bg-success' : 'bg-danger'}">${data}/4 ${isUp ? '‚Üë' : '‚Üì'}</span>`;
app/Modules/User/Views/Alerts/index.php:362:                        const tvLink = `https://www.tradingview.com/symbols/${row.exchange}-${row.ticker}/`;
app/Modules/User/Views/Alerts/index.php:456:        const isCurrentlyHidden = !mainTable.column(`${columnNames[0]}:name`).visible();
app/Modules/User/Views/Alerts/index.php:476:                    const col = dt.column(`${name}:name`);
app/Modules/User/Views/Alerts/index.php:493:                        $editBtn.html(`<i class="icon ni ni-edit"></i> Edit`).attr('data-id', id);
app/Modules/User/Views/Alerts/index.php:496:                        $deleteBtn.html(`<i class="icon ni ni-trash"></i> Hide`).attr('data-id', delId);
app/Modules/User/Views/Alerts/index.php:550:                console.log(`Processed trade alert batch offset: ${currentOffset}`);
app/Modules/User/Views/Alerts/index.php:697:                        row.find('td.price-cell').text(`$${prices[ticker].toFixed(2)}`);
app/Modules/User/Views/Alerts/resources/overview_chart.php:183:                console.error(`Error parsing JSON from selector ${selector}:`, error);
app/Modules/User/Views/Alerts/resources/overview_chart.php:211:            labels.push(showYears ? `${MONTHS[currentMonth - 1]} ${currentYear}` : MONTHS[currentMonth - 1]);
app/Modules/User/Views/Alerts/resources/overview_chart.php:267:        const activeElement = document.querySelector(`${selector} .option.active`);
app/Modules/User/Views/Alerts/resources/overview_chart.php:313:                        callback: (value) => `$${value.toLocaleString()}`
app/Modules/User/Views/Alerts/resources/overview_chart.php:350:        const options = document.querySelectorAll(`${selector} .option`);
app/Modules/User/Views/Alerts/resources/overview_chart.php:392:                console.error(`Error parsing JSON from selector ${selector}:`, error);
app/Modules/User/Views/Alerts/resources/overview_chart.php:410:            labels.push(showYears ? `${MONTHS[currentMonth - 1]} ${currentYear}` : MONTHS[currentMonth - 1]);
app/Modules/User/Views/Alerts/resources/overview_chart.php:463:        const activeElement = document.querySelector(`${selector} .option.active`);
app/Modules/User/Views/Alerts/resources/overview_chart.php:497:                        callback: (value) => `$${value.toLocaleString()}`
app/Modules/User/Views/Alerts/resources/overview_chart.php:524:        const options = document.querySelectorAll(`${selector} .option`);
app/Config/App.php.bak.20251003-123223:178:     * `ContentSecurityPolicy.php` file. Controllers can always add to those
app/Config/App.php.bak.20251003-123223:236:     * Default expires timestamp for cookies. Setting this to `0` will mean the
app/Config/App.php.bak.20251003-123223:237:     * cookie will not have the `Expires` attribute and will behave as a session
app/Config/App.php.bak.20251003-123223:258:     * Set to `.your-domain.com` for site-wide cookies.
app/Config/App.php.bak.20251003-123223:292:     * - `Cookie::SAMESITE_NONE`
app/Config/App.php.bak.20251003-123223:293:     * - `Cookie::SAMESITE_LAX`
app/Config/App.php.bak.20251003-123223:294:     * - `Cookie::SAMESITE_STRICT`
app/Config/App.php.bak.20251003-123223:296:     * Defaults to `Lax` for compatibility with modern browsers. Setting `''`
app/Config/App.php.bak.20251003-123223:297:     * (empty string) means default SameSite attribute set by browsers (`Lax`)
app/Config/App.php.bak.20251003-123223:298:     * will be set on cookies. If set to `None`, `$secure` must also be set.
app/Config/App.php.bak.20251003-123223:310:     * not URL encoded using `rawurlencode()`.
app/Config/App.php.bak.20251003-123223:312:     * If this is set to `true`, cookie names should be compliant of RFC 2616's
app/Config/Cookie.php:24:     * Default expires timestamp for cookies. Setting this to `0` will mean the
app/Config/Cookie.php:25:     * cookie will not have the `Expires` attribute and will behave as a session
app/Config/Cookie.php:46:     * Set to `.your-domain.com` for site-wide cookies.
app/Config/Cookie.php:81:     * - `Cookie::SAMESITE_NONE`
app/Config/Cookie.php:82:     * - `Cookie::SAMESITE_LAX`
app/Config/Cookie.php:83:     * - `Cookie::SAMESITE_STRICT`
app/Config/Cookie.php:85:     * Defaults to `Lax` for compatibility with modern browsers. Setting `''`
app/Config/Cookie.php:86:     * (empty string) means default SameSite attribute set by browsers (`Lax`)
app/Config/Cookie.php:87:     * will be set on cookies. If set to `None`, `$secure` must also be set.
app/Config/Cookie.php:100:     * not URL encoded using `rawurlencode()`.
app/Config/Cookie.php:102:     * If this is set to `true`, cookie names should be compliant of RFC 2616's
app/Config/DocTypes.php:38:     * Whether to remove the solidus (`/`) character for void HTML elements (e.g. `<input>`)
app/Config/DocTypes.php:42:     *    `true` - to be HTML5 compatible
app/Config/DocTypes.php:43:     *    `false` - to be XHTML compatible
app/Modules/User/Controllers/SupportController.php:301:        curl_exec($curl);
app/Config/Paths.php:72:     * default this is in `app/Views`. This value
app/Config/Paths.php:73:     * is used when no value is provided to `Services::renderer()`.
app/Config/App.php.bak.20251003-131504:178:     * `ContentSecurityPolicy.php` file. Controllers can always add to those
app/Config/App.php.bak.20251003-131504:236:     * Default expires timestamp for cookies. Setting this to `0` will mean the
app/Config/App.php.bak.20251003-131504:237:     * cookie will not have the `Expires` attribute and will behave as a session
app/Config/App.php.bak.20251003-131504:258:     * Set to `.your-domain.com` for site-wide cookies.
app/Config/App.php.bak.20251003-131504:292:     * - `Cookie::SAMESITE_NONE`
app/Config/App.php.bak.20251003-131504:293:     * - `Cookie::SAMESITE_LAX`
app/Config/App.php.bak.20251003-131504:294:     * - `Cookie::SAMESITE_STRICT`
app/Config/App.php.bak.20251003-131504:296:     * Defaults to `Lax` for compatibility with modern browsers. Setting `''`
app/Config/App.php.bak.20251003-131504:297:     * (empty string) means default SameSite attribute set by browsers (`Lax`)
app/Config/App.php.bak.20251003-131504:298:     * will be set on cookies. If set to `None`, `$secure` must also be set.
app/Config/App.php.bak.20251003-131504:310:     * not URL encoded using `rawurlencode()`.
app/Config/App.php.bak.20251003-131504:312:     * If this is set to `true`, cookie names should be compliant of RFC 2616's
app/Modules/User/Controllers/InvestmentsController.php:388:        $this->commonData(); // Ensure this is correctly defined to set `$this->data`
app/Modules/User/Controllers/InvestmentsController.php:661:        // Decode custom fields from `json_user_fields`
app/Modules/User/Controllers/InvestmentsController.php:699:        // Ensure the `id` is used to update an existing record
app/Config/Exceptions.php:73:     * If `$logDeprecations` is set to `true`, this sets the log level
app/Config/Exceptions.php:77:     * The related `Config\Logger::$threshold` should be adjusted, if needed,
app/Config/Toolbar.php:22: * `CI_DEBUG` is true, since if it's not, there's not much to display anyway.
app/Config/Toolbar.php:66:     * `$maxHistory` sets a limit on the number of past requests that are stored,
app/Config/Toolbar.php:92:     * `$maxQueries` defines the maximum amount of queries that will be stored.
app/Config/Generators.php:19:     * curly braces `{...}`. These placeholders are used internally by the
app/Config/Security.php:103:     * Defaults to `Lax` as recommended in this link:
app/Config/Security.php:107:     * @deprecated `Config\Cookie` $samesite property is used.
app/Config/Email.php:30:     * The mail sending protocol: `mail`, `sendmail`, `smtp`.
app/Config/Email.php:36:     * This is only used if `$protocol` is set to `sendmail`.
app/Config/Email.php:60:     * - Use `465` for SSL connections (implicit SSL).
app/Config/Email.php:61:     * - Use `587` for TLS connections (explicit STARTTLS).
app/Config/Email.php:73:     * - `true`: Keeps the connection open for multiple email sends.
app/Config/Email.php:74:     * - `false`: Closes the connection after sending each email.
app/Config/Email.php:80:     * - Use `''` (empty string) for **port 465** (implicit SSL).
app/Config/Email.php:81:     * - Use `'tls'` for **port 587** (STARTTLS).
app/Config/Email.php:97:     * - `text`: Plain text emails.
app/Config/Email.php:98:     * - `html`: HTML-formatted emails.
app/Config/Email.php:110:     * - `true`: Ensures email addresses are valid before sending.
app/Config/Email.php:111:     * - `false`: Sends emails regardless of validity.
app/Config/Email.php:117:     * - `1`: Highest priority.
app/Config/Email.php:118:     * - `3`: Normal priority.
app/Config/Email.php:119:     * - `5`: Lowest priority.
app/Config/Email.php:125:     * Use `"\r\n"` to comply with RFC 822 email standards.
app/Config/Email.php:131:     * Use `"\r\n"` to comply with RFC 822 email standards.
app/Config/Email.php:143:     * This is only used if `$BCCBatchMode` is `true`.
app/Config/App.php:181:     * `ContentSecurityPolicy.php` file. Controllers can always add to those
app/Config/App.php:239:     * Default expires timestamp for cookies. Setting this to `0` will mean the
app/Config/App.php:240:     * cookie will not have the `Expires` attribute and will behave as a session
app/Config/App.php:261:     * Set to `.your-domain.com` for site-wide cookies.
app/Config/App.php:295:     * - `Cookie::SAMESITE_NONE`
app/Config/App.php:296:     * - `Cookie::SAMESITE_LAX`
app/Config/App.php:297:     * - `Cookie::SAMESITE_STRICT`
app/Config/App.php:299:     * Defaults to `Lax` for compatibility with modern browsers. Setting `''`
app/Config/App.php:300:     * (empty string) means default SameSite attribute set by browsers (`Lax`)
app/Config/App.php:301:     * will be set on cookies. If set to `None`, `$secure` must also be set.
app/Config/App.php:313:     * not URL encoded using `rawurlencode()`.
app/Config/App.php:315:     * If this is set to `true`, cookie names should be compliant of RFC 2616's
app/Config/Auth.php:112:     * The `NothingPersonalValidator` prevents personal information from
app/Config/Auth.php:117:     * first and/or last names. `$personalFields` is where you can add
app/Config/Honeypot.php:32:     * If you enabled CSP, you can remove `class="d-none"`.
app/Config/Format.php:71:     * @deprecated This is an alias of `\CodeIgniter\Format\Format::getFormatter`. Use that instead.
app/Config/App.php.bak_proxy:178:     * `ContentSecurityPolicy.php` file. Controllers can always add to those
app/Config/App.php.bak_proxy:236:     * Default expires timestamp for cookies. Setting this to `0` will mean the
app/Config/App.php.bak_proxy:237:     * cookie will not have the `Expires` attribute and will behave as a session
app/Config/App.php.bak_proxy:258:     * Set to `.your-domain.com` for site-wide cookies.
app/Config/App.php.bak_proxy:292:     * - `Cookie::SAMESITE_NONE`
app/Config/App.php.bak_proxy:293:     * - `Cookie::SAMESITE_LAX`
app/Config/App.php.bak_proxy:294:     * - `Cookie::SAMESITE_STRICT`
app/Config/App.php.bak_proxy:296:     * Defaults to `Lax` for compatibility with modern browsers. Setting `''`
app/Config/App.php.bak_proxy:297:     * (empty string) means default SameSite attribute set by browsers (`Lax`)
app/Config/App.php.bak_proxy:298:     * will be set on cookies. If set to `None`, `$secure` must also be set.
app/Config/App.php.bak_proxy:310:     * not URL encoded using `rawurlencode()`.
app/Config/App.php.bak_proxy:312:     * If this is set to `true`, cookie names should be compliant of RFC 2616's
app/Config/Kint.php:16: * We use Kint's `RichRenderer` and `CLIRenderer`. This area contains options
app/Config/Session.php:17:     * - `CodeIgniter\Session\Handlers\FileHandler`
app/Config/Session.php:18:     * - `CodeIgniter\Session\Handlers\DatabaseHandler`
app/Config/Session.php:19:     * - `CodeIgniter\Session\Handlers\MemcachedHandler`
app/Config/Session.php:20:     * - `CodeIgniter\Session\Handlers\RedisHandler`
app/ThirdParty/Resources/database_tables.php:1:`auth_activation_attempts`.`id`, `auth_activation_attempts`.`ip_address`, `auth_activation_attempts`.`user_agent`, `auth_activation_attempts`.`token`, `auth_activation_attempts`.`created_at`, `auth_groups`.`id`, `auth_groups`.`name`, `auth_groups`.`description`, `auth_groups_permissions`.`group_id`, `auth_groups_permissions`.`permission_id`, `auth_groups_users`.`id`, `auth_groups_users`.`user_id`, `auth_groups_users`.`group`, `auth_groups_users`.`created_at`, `auth_identities`.`id`, `auth_identities`.`user_id`, `auth_identities`.`type`, `auth_identities`.`name`, `auth_identities`.`secret`, `auth_identities`.`secret2`, `auth_identities`.`expires`, `auth_identities`.`extra`, `auth_identities`.`force_reset`, `auth_identities`.`last_used_at`, `auth_identities`.`created_at`, `auth_identities`.`updated_at`, `auth_logins`.`id`, `auth_logins`.`ip_address`, `auth_logins`.`user_agent`, `auth_logins`.`id_type`, `auth_logins`.`identifier`, `auth_logins`.`user_id`, `auth_logins`.`email`, `auth_logins`.`date`, `auth_logins`.`success`, `auth_permissions`.`id`, `auth_permissions`.`name`, `auth_permissions`.`description`, `auth_permissions_users`.`id`, `auth_permissions_users`.`user_id`, `auth_permissions_users`.`permission`, `auth_permissions_users`.`created_at`, `auth_remember_tokens`.`id`, `auth_remember_tokens`.`selector`, `auth_remember_tokens`.`hashedValidator`, `auth_remember_tokens`.`user_id`, `auth_remember_tokens`.`expires`, `auth_remember_tokens`.`created_at`, `auth_remember_tokens`.`updated_at`, `auth_reset_attempts`.`id`, `auth_reset_attempts`.`email`, `auth_reset_attempts`.`ip_address`, `auth_reset_attempts`.`user_agent`, `auth_reset_attempts`.`token`, `auth_reset_attempts`.`created_at`, `auth_token_logins`.`id`, `auth_token_logins`.`ip_address`, `auth_token_logins`.`user_agent`, `auth_token_logins`.`id_type`, `auth_token_logins`.`identifier`, `auth_token_logins`.`user_id`, `auth_token_logins`.`date`, `auth_token_logins`.`success`, `auth_tokens`.`id`, `auth_tokens`.`selector`, `auth_tokens`.`hashedValidator`, `auth_tokens`.`user_id`, `auth_tokens`.`expires`, `auth_users_permissions`.`user_id`, `auth_users_permissions`.`permission_id`, `bf_act_logger`.`id`, `bf_act_logger`.`created_on`, `bf_act_logger`.`created_by`, `bf_act_logger`.`beta`, `bf_act_logger`.`type`, `bf_act_logger`.`type_id`, `bf_act_logger`.`controller`, `bf_act_logger`.`method`, `bf_act_logger`.`url`, `bf_act_logger`.`full_url`, `bf_act_logger`.`token`, `bf_act_logger`.`comment`, `bf_act_logger`.`suspicious_flag`, `bf_auth_groups_users`.`id`, `bf_auth_groups_users`.`user_id`, `bf_auth_groups_users`.`group`, `bf_auth_groups_users`.`created_at`, `bf_auth_identities`.`id`, `bf_auth_identities`.`user_id`, `bf_auth_identities`.`type`, `bf_auth_identities`.`name`, `bf_auth_identities`.`secret`, `bf_auth_identities`.`secret2`, `bf_auth_identities`.`expires`, `bf_auth_identities`.`extra`, `bf_auth_identities`.`force_reset`, `bf_auth_identities`.`last_used_at`, `bf_auth_identities`.`created_at`, `bf_auth_identities`.`updated_at`, `bf_auth_logins`.`id`, `bf_auth_logins`.`ip_address`, `bf_auth_logins`.`user_agent`, `bf_auth_logins`.`id_type`, `bf_auth_logins`.`identifier`, `bf_auth_logins`.`user_id`, `bf_auth_logins`.`date`, `bf_auth_logins`.`success`, `bf_auth_permissions_users`.`id`, `bf_auth_permissions_users`.`user_id`, `bf_auth_permissions_users`.`permission`, `bf_auth_permissions_users`.`created_at`, `bf_auth_remember_tokens`.`id`, `bf_auth_remember_tokens`.`selector`, `bf_auth_remember_tokens`.`hashedValidator`, `bf_auth_remember_tokens`.`user_id`, `bf_auth_remember_tokens`.`expires`, `bf_auth_remember_tokens`.`created_at`, `bf_auth_remember_tokens`.`updated_at`, `bf_auth_token_logins`.`id`, `bf_auth_token_logins`.`ip_address`, `bf_auth_token_logins`.`user_agent`, `bf_auth_token_logins`.`id_type`, `bf_auth_token_logins`.`identifier`, `bf_auth_token_logins`.`user_id`, `bf_auth_token_logins`.`date`, `bf_auth_token_logins`.`success`, `bf_compliance_audits`.`id`, `bf_compliance_audits`.`check_date`, `bf_compliance_audits`.`check_details`, `bf_compliance_audits`.`actions_taken`, `bf_compliance_audits`.`regulatory_body`, `bf_compliance_audits`.`communication_log`, `bf_compliance_audits`.`created_at`, `bf_compliance_audits`.`updated_at`, `bf_email_campaigns`.`id`, `bf_email_campaigns`.`title`, `bf_email_campaigns`.`subject`, `bf_email_campaigns`.`body`, `bf_email_campaigns`.`recipient_group`, `bf_email_campaigns`.`created_at`, `bf_email_campaigns`.`status`, `bf_emails_campaigns`.`id`, `bf_emails_campaigns`.`title`, `bf_emails_campaigns`.`content`, `bf_emails_campaigns`.`scheduled_at`, `bf_emails_campaigns`.`created_at`, `bf_exchanges`.`id`, `bf_exchanges`.`status`, `bf_exchanges`.`alt_cur`, `bf_exchanges`.`int_cur`, `bf_exchanges`.`api_url`, `bf_exchanges`.`datetime`, `bf_exchanges`.`creator`, `bf_exchanges`.`market_pair`, `bf_exchanges`.`market`, `bf_exchanges`.`description`, `bf_exchanges`.`total_coins`, `bf_exchanges`.`coins_available`, `bf_exchanges`.`total_volume`, `bf_exchanges`.`initial_value`, `bf_exchanges`.`current_value`, `bf_exchanges`.`coin_value`, `bf_exchanges`.`gas_fee`, `bf_exchanges`.`trans_percent`, `bf_exchanges`.`trans_fee`, `bf_exchanges`.`image_icon`, `bf_exchanges`.`icon`, `bf_exchanges_assets`.`id`, `bf_exchanges_assets`.`active`, `bf_exchanges_assets`.`status`, `bf_exchanges_assets`.`unix_timestamp`, `bf_exchanges_assets`.`date`, `bf_exchanges_assets`.`time`, `bf_exchanges_assets`.`partner`, `bf_exchanges_assets`.`user_id`, `bf_exchanges_assets`.`user_email`, `bf_exchanges_assets`.`first_name`, `bf_exchanges_assets`.`middle_name`, `bf_exchanges_assets`.`last_name`, `bf_exchanges_assets`.`name_suffix`, `bf_exchanges_assets`.`phone`, `bf_exchanges_assets`.`company_name`, `bf_exchanges_assets`.`address`, `bf_exchanges_assets`.`city`, `bf_exchanges_assets`.`state`, `bf_exchanges_assets`.`country`, `bf_exchanges_assets`.`zipcode`, `bf_exchanges_assets`.`is_tradable`, `bf_exchanges_assets`.`listing_type`, `bf_exchanges_assets`.`blockchain_id`, `bf_exchanges_assets`.`blockchain`, `bf_exchanges_assets`.`blockchain_name`, `bf_exchanges_assets`.`dex_id`, `bf_exchanges_assets`.`dex_url`, `bf_exchanges_assets`.`dex_pair`, `bf_exchanges_assets`.`dex_swap_name`, `bf_exchanges_assets`.`dex_swap_symbol`, `bf_exchanges_assets`.`dex_swap_address`, `bf_exchanges_assets`.`symbol`, `bf_exchanges_assets`.`coin_name`, `bf_exchanges_assets`.`coin_address`, `bf_exchanges_assets`.`coin_quantity`, `bf_exchanges_assets`.`coin_value`, `bf_exchanges_assets`.`initial_value`, `bf_exchanges_assets`.`market_cap`, `bf_exchanges_assets`.`volume`, `bf_exchanges_assets`.`volume_array`, `bf_exchanges_assets`.`price_change`, `bf_exchanges_assets`.`liquidity`, `bf_exchanges_assets`.`fdv`, `bf_exchanges_assets`.`purpose`, `bf_exchanges_assets`.`description`, `bf_exchanges_assets`.`coin_file`, `bf_exchanges_assets`.`coin_logo`, `bf_exchanges_assets`.`coin_links`, `bf_exchanges_assets`.`decimals`, `bf_exchanges_assets`.`performance`, `bf_exchanges_assets`.`coin_redistribution_count`, `bf_exchanges_assets`.`coin_redistribution_percentage`, `bf_exchanges_assets`.`amount_of_new_coins_redistributed`, `bf_exchanges_assets`.`total_summary_of_existing_coins_new_coins`, `bf_exchanges_assets`.`amount_of_coins_available_for_sale`, `bf_exchanges_assets`.`current_coin_value`, `bf_exchanges_assets`.`amount_of_coins_purchased`, `bf_exchanges_assets`.`cost_of_amount_of_coins_purchased`, `bf_exchanges_assets`.`new_market_cap`, `bf_exchanges_assets`.`new_coin_value`, `bf_exchanges_assets`.`initial_coins_available`, `bf_exchanges_assets`.`coins_remaining`, `bf_exchanges_assets`.`coins_purchased`, `bf_exchanges_assets`.`gas_fee`, `bf_exchanges_assets`.`trans_percentage_fee`, `bf_exchanges_assets`.`sales_tax_fee`, `bf_exchanges_assets`.`gas_fee_costs`, `bf_exchanges_assets`.`trans_percentage_costs`, `bf_exchanges_assets`.`sales_tax_fee_cost`, `bf_exchanges_assets`.`collected_fees`, `bf_exchanges_assets`.`collected_fees_cost`, `bf_exchanges_assets`.`fee_profits`, `bf_exchanges_assets`.`user_total_transaction_cost`, `bf_exchanges_assets`.`blog`, `bf_exchanges_assets`.`coingeckoID`, `bf_exchanges_assets`.`coinmarketcap`, `bf_exchanges_assets`.`discord`, `bf_exchanges_assets`.`discord_active`, `bf_exchanges_assets`.`facebook`, `bf_exchanges_assets`.`facebook_active`, `bf_exchanges_assets`.`instagram`, `bf_exchanges_assets`.`instagram_active`, `bf_exchanges_assets`.`medium`, `bf_exchanges_assets`.`medium_active`, `bf_exchanges_assets`.`reddit`, `bf_exchanges_assets`.`reddit_active`, `bf_exchanges_assets`.`telegram`, `bf_exchanges_assets`.`telegram_active`, `bf_exchanges_assets`.`twitter`, `bf_exchanges_assets`.`twitter_active`, `bf_exchanges_assets`.`website`, `bf_exchanges_assets`.`website_active`, `bf_exchanges_assets`.`tags`, `bf_exchanges_assets_ledger`.`id`, `bf_exchanges_assets_ledger`.`beta`, `bf_exchanges_assets_ledger`.`active`, `bf_exchanges_assets_ledger`.`status`, `bf_exchanges_assets_ledger`.`deleted`, `bf_exchanges_assets_ledger`.`created_on`, `bf_exchanges_assets_ledger`.`completed_on`, `bf_exchanges_assets_ledger`.`user_id`, `bf_exchanges_assets_ledger`.`from_token`, `bf_exchanges_assets_ledger`.`to_token`, `bf_exchanges_assets_ledger`.`amount`, `bf_exchanges_assets_ledger`.`fees`, `bf_exchanges_assets_ledger`.`transaction_result`, `bf_exchanges_assets_ledger`.`suspicious`, `bf_exchanges_assets_ledger`.`suspicious_reason`, `bf_exchanges_assets_ledger`.`reported`, `bf_exchanges_assets_ledger`.`reported_at`, `bf_exchanges_assets_ledger`.`reported_by`, `bf_exchanges_assets_ledger`.`kyc_status`, `bf_exchanges_listing_request`.`id`, `bf_exchanges_listing_request`.`status`, `bf_exchanges_listing_request`.`unix_timestamp`, `bf_exchanges_listing_request`.`date`, `bf_exchanges_listing_request`.`time`, `bf_exchanges_listing_request`.`partner`, `bf_exchanges_listing_request`.`user_id`, `bf_exchanges_listing_request`.`user_email`, `bf_exchanges_listing_request`.`first_name`, `bf_exchanges_listing_request`.`middle_name`, `bf_exchanges_listing_request`.`last_name`, `bf_exchanges_listing_request`.`name_suffix`, `bf_exchanges_listing_request`.`phone`, `bf_exchanges_listing_request`.`company_name`, `bf_exchanges_listing_request`.`address`, `bf_exchanges_listing_request`.`city`, `bf_exchanges_listing_request`.`state`, `bf_exchanges_listing_request`.`country`, `bf_exchanges_listing_request`.`zipcode`, `bf_exchanges_listing_request`.`listing_type`, `bf_exchanges_listing_request`.`blockchain_id`, `bf_exchanges_listing_request`.`blockchain`, `bf_exchanges_listing_request`.`blockchain_name`, `bf_exchanges_listing_request`.`symbol`, `bf_exchanges_listing_request`.`coin_name`, `bf_exchanges_listing_request`.`coin_quantity`, `bf_exchanges_listing_request`.`coin_value`, `bf_exchanges_listing_request`.`purpose`, `bf_exchanges_listing_request`.`description`, `bf_exchanges_listing_request`.`coin_file`, `bf_exchanges_listing_request`.`coin_logo`, `bf_exchanges_listing_request`.`coin_links`, `bf_exchanges_orders`.`id`, `bf_exchanges_orders`.`active`, `bf_exchanges_orders`.`status`, `bf_exchanges_orders`.`unix_timestamp`, `bf_exchanges_orders`.`current_date`, `bf_exchanges_orders`.`month`, `bf_exchanges_orders`.`day`, `bf_exchanges_orders`.`year`, `bf_exchanges_orders`.`time`, `bf_exchanges_orders`.`trade_type`, `bf_exchanges_orders`.`beta`, `bf_exchanges_orders`.`user_id`, `bf_exchanges_orders`.`user_email`, `bf_exchanges_orders`.`trading_account`, `bf_exchanges_orders`.`wallet_id`, `bf_exchanges_orders`.`market_pair`, `bf_exchanges_orders`.`market`, `bf_exchanges_orders`.`initial_value`, `bf_exchanges_orders`.`available_coins`, `bf_exchanges_orders`.`amount`, `bf_exchanges_orders`.`remaining_amount`, `bf_exchanges_orders`.`minimum_purchase`, `bf_exchanges_orders`.`total`, `bf_exchanges_orders`.`remaining_coins`, `bf_exchanges_orders`.`gas_fee`, `bf_exchanges_orders`.`user_gas_fee`, `bf_exchanges_orders`.`trans_percent`, `bf_exchanges_orders`.`user_trans_percent`, `bf_exchanges_orders`.`trans_fee`, `bf_exchanges_orders`.`user_trans_fees`, `bf_exchanges_orders`.`fees`, `bf_exchanges_orders`.`total_cost`, `bf_exchanges_orders`.`current_value`, `bf_exchanges_orders`.`new_availability`, `bf_exchanges_orders`.`initial_coin_value`, `bf_exchanges_orders`.`new_coin_value`, `bf_financial_goals`.`id`, `bf_financial_goals`.`user_id`, `bf_financial_goals`.`goal_name`, `bf_financial_goals`.`goal_type`, `bf_financial_goals`.`target_amount`, `bf_financial_goals`.`current_amount`, `bf_financial_goals`.`due_date`, `bf_financial_goals`.`created_on`, `bf_financial_goals`.`modified_on`, `bf_ftp_file_data`.`id`, `bf_ftp_file_data`.`filename`, `bf_ftp_file_data`.`data`, `bf_investment_economic_data`.`id`, `bf_investment_economic_data`.`title`, `bf_investment_economic_data`.`notes`, `bf_investment_economic_data`.`realtime_start`, `bf_investment_economic_data`.`realtime_end`, `bf_investment_economic_data`.`observation_start`, `bf_investment_economic_data`.`observation_end`, `bf_investment_economic_data`.`frequency`, `bf_investment_economic_data`.`units`, `bf_investment_economic_data`.`seasonal_adjustment`, `bf_investment_economic_data`.`last_updated`, `bf_investment_economic_data`.`popularity`, `bf_investment_economic_data`.`series_id`, `bf_investment_economic_data`.`frequency_short`, `bf_investment_economic_data`.`units_short`, `bf_investment_economic_data`.`seasonal_adjustment_short`, `bf_investment_economic_data`.`filter_variable`, `bf_investment_economic_data`.`filter_value`, `bf_investment_economic_data`.`order_by`, `bf_investment_economic_data`.`sort_order`, `bf_investment_economic_data`.`count`, `bf_investment_economic_data`.`offset`, `bf_investment_economic_data`.`content_limit`, `bf_investment_economic_data`.`geographical_info`, `bf_investment_economic_data`.`source_link`, `bf_investment_economic_data`.`category`, `bf_investment_economic_data`.`full_content`, `bf_investment_economic_data`.`summarized_content`, `bf_investment_scraper`.`id`, `bf_investment_scraper`.`status`, `bf_investment_scraper`.`type`, `bf_investment_scraper`.`url`, `bf_investment_scraper`.`title`, `bf_investment_scraper`.`summary`, `bf_investment_scraper`.`content`, `bf_investment_scraper`.`email_identifier`, `bf_investment_scraper`.`email_date`, `bf_investment_scraper`.`email_sender`, `bf_investment_scraper`.`email_subject`, `bf_investment_scraper`.`email_body`, `bf_investment_scraper`.`email_attachments`, `bf_investment_scraper`.`keywords`, `bf_investment_scraper`.`scraped_at`, `bf_investment_scraper`.`created_on`, `bf_investment_scraper`.`modified_on`, `bf_investment_scraper`.`links`, `bf_investment_scraper`.`images`, `bf_investment_scraper`.`videos`, `bf_investment_scraper`.`metadata`, `bf_investment_scraper`.`structured_data`, `bf_investment_scraper`.`additional_html_elements`, `bf_investment_scraper`.`page_performance_data`, `bf_investment_scraper`.`network_requests`, `bf_investment_scraper`.`user_interaction_points`, `bf_investment_scraper`.`accessibility_information`, `bf_investment_scraper`.`page_relationships`, `bf_investment_scraper`.`seo_elements`, `bf_investment_scraper`.`social_media_links`, `bf_investment_scraper`.`comments_user_generated_content`, `bf_investment_scraper`.`contact_information`, `bf_investment_scraper`.`legal_information`, `bf_investment_scraper`.`breadcrumbs`, `bf_investment_scraper`.`date_time`, `bf_investment_scraper`.`author_information`, `bf_investment_scraper`.`ratings_reviews`, `bf_investment_scraper`.`price_information`, `bf_investment_scraper`.`location_data`, `bf_investment_scraper`.`language_locale`, `bf_investment_scraper`.`mobile_responsiveness`, `bf_investment_scraper`.`security_information`, `bf_investment_scraper`.`technology_stack`, `bf_investment_scraper`.`server_information`, `bf_investment_scraper`.`caching_information`, `bf_investment_scraper`.`content_type`, `bf_investment_scraper`.`character_set`, `bf_investment_scraper`.`rss_atom_feeds`, `bf_investment_scraper`.`pagination`, `bf_investment_scraper`.`custom_data`, `bf_investment_scraper`.`error_handling`, `bf_investment_scraper`.`historical_changes`, `bf_investment_scraper`.`user_reviews_ratings`, `bf_investment_scraper`.`inventory_levels`, `bf_investment_scraper`.`shipping_information`, `bf_investment_scraper`.`bots_crawlers_information`, `bf_investment_scraper`.`affiliate_links`, `bf_investment_scraper`.`advertisements`, `bf_investment_scraper`.`cookie_notices`, `bf_investment_scraper`.`popups_modals`, `bf_investment_scraper`.`browser_specific_data`, `bf_investment_scraper`.`geolocation_specific_content`, `bf_investment_scraper`.`ab_testing_variations`, `bf_investment_scraper`.`user_agent_specific_content`, `bf_investment_scraper`.`screen_size_specific_content`, `bf_investment_scraper`.`device_specific_content`, `bf_investment_scraper`.`browser_extension_data`, `bf_investment_scraper`.`custom_scripts_analytics`, `bf_investment_stock_listing`.`id`, `bf_investment_stock_listing`.`symbol`, `bf_investment_stock_listing`.`company_name`, `bf_investment_stock_listing`.`market_cap`, `bf_investment_stock_listing`.`sector`, `bf_investment_stock_listing`.`industry`, `bf_investment_stock_listing`.`created_on`, `bf_investment_strategies`.`id`, `bf_investment_strategies`.`user_id`, `bf_investment_strategies`.`strategy_name`, `bf_investment_strategies`.`description`, `bf_investment_strategies`.`created_on`, `bf_investment_strategies`.`modified_on`, `bf_investment_tickers`.`id`, `bf_investment_tickers`.`symbol`, `bf_investment_tickers`.`name`, `bf_investment_tickers`.`currency`, `bf_investment_tickers`.`exchange`, `bf_investment_tickers`.`mic_code`, `bf_investment_tickers`.`country`, `bf_investment_tickers`.`type`, `bf_investment_trade_alerts`.`id`, `bf_investment_trade_alerts`.`active`, `bf_investment_trade_alerts`.`status`, `bf_investment_trade_alerts`.`occurrences`, `bf_investment_trade_alerts`.`created_on`, `bf_investment_trade_alerts`.`updated_at`, `bf_investment_trade_alerts`.`date`, `bf_investment_trade_alerts`.`display`, `bf_investment_trade_alerts`.`submitted_date`, `bf_investment_trade_alerts`.`time`, `bf_investment_trade_alerts`.`category`, `bf_investment_trade_alerts`.`type`, `bf_investment_trade_alerts`.`free`, `bf_investment_trade_alerts`.`basic`, `bf_investment_trade_alerts`.`premium`, `bf_investment_trade_alerts`.`gold`, `bf_investment_trade_alerts`.`ticker`, `bf_investment_trade_alerts`.`exchange`, `bf_investment_trade_alerts`.`company`, `bf_investment_trade_alerts`.`open`, `bf_investment_trade_alerts`.`high`, `bf_investment_trade_alerts`.`low`, `bf_investment_trade_alerts`.`price`, `bf_investment_trade_alerts`.`volume`, `bf_investment_trade_alerts`.`ema5`, `bf_investment_trade_alerts`.`ema8`, `bf_investment_trade_alerts`.`ema13`, `bf_investment_trade_alerts`.`ema34`, `bf_investment_trade_alerts`.`ema48`, `bf_investment_trade_alerts`.`latest_trading_day`, `bf_investment_trade_alerts`.`previous_close`, `bf_investment_trade_alerts`.`change`, `bf_investment_trade_alerts`.`market_cap`, `bf_investment_trade_alerts`.`change_percent`, `bf_investment_trade_alerts`.`link`, `bf_investment_trade_alerts`.`current_price`, `bf_investment_trade_alerts`.`potential_price`, `bf_investment_trade_alerts`.`differential`, `bf_investment_trade_alerts`.`potential_gain`, `bf_investment_trade_alerts`.`stop_loss_percent`, `bf_investment_trade_alerts`.`stop_loss_differential`, `bf_investment_trade_alerts`.`stop_loss`, `bf_investment_trade_alerts`.`support`, `bf_investment_trade_alerts`.`max_entry`, `bf_investment_trade_alerts`.`price_high`, `bf_investment_trade_alerts`.`percent_change`, `bf_investment_trade_alerts`.`last_updated`, `bf_investment_trade_alerts`.`last_updated_time`, `bf_investment_trade_alerts`.`updated_stop_loss_differential`, `bf_investment_trade_alerts`.`updated_stop_loss`, `bf_investment_trade_alerts`.`closing_date`, `bf_investment_trade_alerts`.`closing_time`, `bf_investment_trade_alerts`.`details`, `bf_investment_trade_alerts`.`updated_details`, `bf_investment_trade_alerts`.`closing_details`, `bf_investment_trade_alerts`.`video_link`, `bf_investment_trade_alerts`.`send_msg`, `bf_investment_trade_alerts`.`expdate`, `bf_investment_trade_alerts`.`option_type`, `bf_investment_trade_alerts`.`expiration`, `bf_investment_trade_alerts`.`option_price`, `bf_investment_trade_alerts`.`strike`, `bf_investment_trade_alerts`.`chart_image`, `bf_investment_trade_alerts`.`watchlist`, `bf_investment_trade_alerts`.`tv_chart`, `bf_investments_calendar`.`id`, `bf_investments_calendar`.`date`, `bf_investments_calendar`.`symbol`, `bf_investments_calendar`.`event_type`, `bf_investments_calendar`.`description`, `bf_investments_calendar`.`event_time`, `bf_investments_calendar`.`earnings_report`, `bf_investments_calendar`.`percent_gain_loss`, `bf_investments_calendar`.`open_price`, `bf_investments_calendar`.`close_price`, `bf_investments_calendar`.`created_at`, `bf_jobs`.`id`, `bf_jobs`.`queue`, `bf_jobs`.`payload`, `bf_jobs`.`attempts`, `bf_jobs`.`reserved_at`, `bf_jobs`.`available_at`, `bf_jobs`.`created_at`, `bf_management_positions`.`id`, `bf_management_positions`.`name`, `bf_management_positions`.`username`, `bf_management_positions`.`role_id`, `bf_management_positions`.`email`, `bf_management_positions`.`phone`, `bf_management_positions`.`department`, `bf_management_positions`.`position`, `bf_management_positions`.`is_filled`, `bf_management_positions`.`date_assigned`, `bf_management_positions`.`created_at`, `bf_management_positions`.`updated_at`, `bf_management_tasks`.`id`, `bf_management_tasks`.`status`, `bf_management_tasks`.`group`, `bf_management_tasks`.`task`, `bf_management_tasks`.`title`, `bf_management_tasks`.`description`, `bf_management_tasks`.`url`, `bf_management_tasks`.`page_id`, `bf_management_tasks`.`task_url`, `bf_management_tasks`.`assigned_to`, `bf_management_tasks`.`assigned_by`, `bf_management_tasks`.`notes`, `bf_management_tasks`.`created_on`, `bf_management_tasks`.`created_by`, `bf_management_tasks`.`completed_on`, `bf_management_tasks`.`completed_by`, `bf_marketing_audience_selection`.`id`, `bf_marketing_audience_selection`.`campaign_id`, `bf_marketing_audience_selection`.`account_type`, `bf_marketing_calendar`.`id`, `bf_marketing_calendar`.`day`, `bf_marketing_calendar`.`time`, `bf_marketing_calendar`.`activity`, `bf_marketing_calendar`.`link`, `bf_marketing_calendar`.`completed`, `bf_marketing_campaigns`.`id`, `bf_marketing_campaigns`.`sched_id`, `bf_marketing_campaigns`.`status`, `bf_marketing_campaigns`.`beta`, `bf_marketing_campaigns`.`config_mode`, `bf_marketing_campaigns`.`form_mode`, `bf_marketing_campaigns`.`escalated`, `bf_marketing_campaigns`.`type`, `bf_marketing_campaigns`.`audience_type`, `bf_marketing_campaigns`.`stage`, `bf_marketing_campaigns`.`name`, `bf_marketing_campaigns`.`created_on`, `bf_marketing_campaigns`.`created_by`, `bf_marketing_campaigns`.`user_id`, `bf_marketing_campaigns`.`user_email`, `bf_marketing_campaigns`.`username`, `bf_marketing_campaigns`.`account_type`, `bf_marketing_campaigns`.`account_id`, `bf_marketing_campaigns`.`assigned_on`, `bf_marketing_campaigns`.`assigned_to`, `bf_marketing_campaigns`.`completed_on`, `bf_marketing_campaigns`.`scheduled_at`, `bf_marketing_campaigns`.`description`, `bf_marketing_campaigns`.`overall_campaign_description`, `bf_marketing_campaigns`.`primary_content`, `bf_marketing_campaigns`.`secondary_content`, `bf_marketing_campaigns`.`html_content`, `bf_marketing_campaigns`.`voice_script`, `bf_marketing_campaigns`.`shared`, `bf_marketing_campaigns`.`shared_users`, `bf_marketing_campaigns`.`blog`, `bf_marketing_campaigns`.`in_app`, `bf_marketing_campaigns`.`email`, `bf_marketing_campaigns`.`discord`, `bf_marketing_campaigns`.`facebook`, `bf_marketing_campaigns`.`linkedin`, `bf_marketing_campaigns`.`telegram`, `bf_marketing_campaigns`.`twitter`, `bf_marketing_campaigns`.`website`, `bf_marketing_campaigns`.`promotional_links`, `bf_marketing_campaigns`.`facebook_message`, `bf_marketing_campaigns`.`linkedin_message`, `bf_marketing_campaigns`.`discord_message`, `bf_marketing_campaigns`.`stocktwits_message`, `bf_marketing_campaigns`.`tiktok_message`, `bf_marketing_campaigns`.`youtube_message`, `bf_marketing_campaigns`.`email_message`, `bf_marketing_campaigns`.`email_message_json`, `bf_marketing_campaigns`.`additional_info`, `bf_marketing_campaigns`.`hashtags`, `bf_marketing_email_open_tracking`.`id`, `bf_marketing_email_open_tracking`.`campaign_id`, `bf_marketing_email_open_tracking`.`email`, `bf_marketing_email_open_tracking`.`opened_at`, `bf_marketing_email_queue`.`id`, `bf_marketing_email_queue`.`campaign_id`, `bf_marketing_email_queue`.`email`, `bf_marketing_email_queue`.`subject`, `bf_marketing_email_queue`.`content`, `bf_marketing_email_queue`.`status`, `bf_marketing_email_queue`.`opened`, `bf_marketing_email_queue`.`open_tracking_id`, `bf_marketing_email_queue`.`scheduled_at`, `bf_marketing_email_queue`.`created_at`, `bf_marketing_email_queue`.`updated_at`, `bf_marketing_email_templates`.`id`, `bf_marketing_email_templates`.`title`, `bf_marketing_email_templates`.`subject`, `bf_marketing_email_templates`.`content`, `bf_marketing_email_templates`.`created_at`, `bf_marketing_email_templates`.`updated_at`, `bf_marketing_ideas`.`id`, `bf_marketing_ideas`.`title`, `bf_marketing_ideas`.`description`, `bf_marketing_ideas`.`created_by`, `bf_marketing_ideas`.`created_on`, `bf_marketing_ideas`.`assigned_to`, `bf_marketing_ideas`.`priority`, `bf_marketing_ideas`.`status`, `bf_marketing_ideas`.`platforms`, `bf_marketing_ideas`.`additional_info`, `bf_marketing_newsletters`.`id`, `bf_marketing_newsletters`.`title`, `bf_marketing_newsletters`.`content`, `bf_marketing_newsletters`.`status`, `bf_marketing_newsletters`.`scheduled_date`, `bf_marketing_newsletters`.`sent_date`, `bf_marketing_newsletters`.`target_audience`, `bf_marketing_newsletters`.`created_by`, `bf_marketing_newsletters`.`created_at`, `bf_marketing_newsletters`.`updated_at`, `bf_marketing_newsletters`.`campaign_id`, `bf_marketing_newsletters`.`priority`, `bf_marketing_newsletters`.`attachments`, `bf_marketing_newsletters`.`preview_link`, `bf_marketing_newsletters`.`notes`, `bf_marketing_page_seo`.`id`, `bf_marketing_page_seo`.`status`, `bf_marketing_page_seo`.`deleted_at`, `bf_marketing_page_seo`.`automated`, `bf_marketing_page_seo`.`page_name`, `bf_marketing_page_seo`.`page_title`, `bf_marketing_page_seo`.`page_url`, `bf_marketing_page_seo`.`page_sitemap_url`, `bf_marketing_page_seo`.`page_internal_url`, `bf_marketing_page_seo`.`page_controller`, `bf_marketing_page_seo`.`page_controller_url`, `bf_marketing_page_seo`.`page_controller_directory`, `bf_marketing_page_seo`.`page_file_directory`, `bf_marketing_page_seo`.`page_image`, `bf_marketing_page_seo`.`page_description`, `bf_marketing_page_seo`.`page_address`, `bf_marketing_page_seo`.`page_city`, `bf_marketing_page_seo`.`page_state`, `bf_marketing_page_seo`.`page_country`, `bf_marketing_page_seo`.`page_zipcode`, `bf_marketing_page_seo`.`page_facebook`, `bf_marketing_page_seo`.`active`, `bf_marketing_page_seo`.`custom`, `bf_marketing_page_seo`.`linked`, `bf_marketing_page_seo`.`functionality`, `bf_marketing_page_seo`.`design`, `bf_marketing_page_seo`.`mobile`, `bf_marketing_page_seo`.`seo`, `bf_marketing_page_seo`.`ext_links`, `bf_marketing_page_seo`.`grammar`, `bf_marketing_page_seo`.`d_optimize`, `bf_marketing_page_seo`.`load_perf`, `bf_marketing_page_seo`.`additional_notes`, `bf_marketing_schedule`.`id`, `bf_marketing_schedule`.`post_date`, `bf_marketing_schedule`.`platform`, `bf_marketing_schedule`.`content_subject`, `bf_marketing_schedule`.`content_description`, `bf_marketing_schedule`.`content_script`, `bf_marketing_schedule`.`content_link`, `bf_marketing_schedule`.`additional_links`, `bf_marketing_schedule`.`created_at`, `bf_marketing_schedule`.`updated_at`, `bf_marketing_schedule`.`completed`, `bf_marketing_schedule_content`.`id`, `bf_marketing_schedule_content`.`post_id`, `bf_marketing_schedule_content`.`platform`, `bf_marketing_schedule_content`.`generated_content`, `bf_marketing_schedule_content`.`created_at`, `bf_marketing_schedule_content`.`updated_at`, `bf_marketing_scraper`.`id`, `bf_marketing_scraper`.`status`, `bf_marketing_scraper`.`type`, `bf_marketing_scraper`.`url`, `bf_marketing_scraper`.`title`, `bf_marketing_scraper`.`summary`, `bf_marketing_scraper`.`content`, `bf_marketing_scraper`.`email_identifier`, `bf_marketing_scraper`.`email_date`, `bf_marketing_scraper`.`email_sender`, `bf_marketing_scraper`.`email_subject`, `bf_marketing_scraper`.`email_body`, `bf_marketing_scraper`.`email_attachments`, `bf_marketing_scraper`.`keywords`, `bf_marketing_scraper`.`scraped_at`, `bf_marketing_scraper`.`created_on`, `bf_marketing_scraper`.`modified_on`, `bf_marketing_scraper`.`links`, `bf_marketing_scraper`.`images`, `bf_marketing_scraper`.`videos`, `bf_marketing_scraper`.`metadata`, `bf_marketing_scraper`.`structured_data`, `bf_marketing_scraper`.`additional_html_elements`, `bf_marketing_scraper`.`page_performance_data`, `bf_marketing_scraper`.`network_requests`, `bf_marketing_scraper`.`user_interaction_points`, `bf_marketing_scraper`.`accessibility_information`, `bf_marketing_scraper`.`page_relationships`, `bf_marketing_scraper`.`seo_elements`, `bf_marketing_scraper`.`social_media_links`, `bf_marketing_scraper`.`comments_user_generated_content`, `bf_marketing_scraper`.`contact_information`, `bf_marketing_scraper`.`legal_information`, `bf_marketing_scraper`.`breadcrumbs`, `bf_marketing_scraper`.`date_time`, `bf_marketing_scraper`.`author_information`, `bf_marketing_scraper`.`ratings_reviews`, `bf_marketing_scraper`.`price_information`, `bf_marketing_scraper`.`location_data`, `bf_marketing_scraper`.`language_locale`, `bf_marketing_scraper`.`mobile_responsiveness`, `bf_marketing_scraper`.`security_information`, `bf_marketing_scraper`.`technology_stack`, `bf_marketing_scraper`.`server_information`, `bf_marketing_scraper`.`caching_information`, `bf_marketing_scraper`.`content_type`, `bf_marketing_scraper`.`character_set`, `bf_marketing_scraper`.`rss_atom_feeds`, `bf_marketing_scraper`.`pagination`, `bf_marketing_scraper`.`custom_data`, `bf_marketing_scraper`.`error_handling`, `bf_marketing_scraper`.`historical_changes`, `bf_marketing_scraper`.`user_reviews_ratings`, `bf_marketing_scraper`.`inventory_levels`, `bf_marketing_scraper`.`shipping_information`, `bf_marketing_scraper`.`bots_crawlers_information`, `bf_marketing_scraper`.`affiliate_links`, `bf_marketing_scraper`.`advertisements`, `bf_marketing_scraper`.`cookie_notices`, `bf_marketing_scraper`.`popups_modals`, `bf_marketing_scraper`.`browser_specific_data`, `bf_marketing_scraper`.`geolocation_specific_content`, `bf_marketing_scraper`.`ab_testing_variations`, `bf_marketing_scraper`.`user_agent_specific_content`, `bf_marketing_scraper`.`screen_size_specific_content`, `bf_marketing_scraper`.`device_specific_content`, `bf_marketing_scraper`.`browser_extension_data`, `bf_marketing_scraper`.`custom_scripts_analytics`, `bf_marketing_scraper`.`include_newsletter`, `bf_marketing_temp_scraper`.`id`, `bf_marketing_temp_scraper`.`status`, `bf_marketing_temp_scraper`.`type`, `bf_marketing_temp_scraper`.`url`, `bf_marketing_temp_scraper`.`title`, `bf_marketing_temp_scraper`.`summary`, `bf_marketing_temp_scraper`.`content`, `bf_marketing_temp_scraper`.`email_identifier`, `bf_marketing_temp_scraper`.`email_date`, `bf_marketing_temp_scraper`.`email_sender`, `bf_marketing_temp_scraper`.`email_subject`, `bf_marketing_temp_scraper`.`email_body`, `bf_marketing_temp_scraper`.`email_attachments`, `bf_marketing_temp_scraper`.`keywords`, `bf_marketing_temp_scraper`.`scraped_at`, `bf_marketing_temp_scraper`.`created_on`, `bf_marketing_temp_scraper`.`modified_on`, `bf_marketing_temp_scraper`.`links`, `bf_marketing_temp_scraper`.`images`, `bf_marketing_temp_scraper`.`videos`, `bf_marketing_temp_scraper`.`metadata`, `bf_marketing_temp_scraper`.`structured_data`, `bf_marketing_temp_scraper`.`additional_html_elements`, `bf_marketing_temp_scraper`.`page_performance_data`, `bf_marketing_temp_scraper`.`network_requests`, `bf_marketing_temp_scraper`.`user_interaction_points`, `bf_marketing_temp_scraper`.`accessibility_information`, `bf_marketing_temp_scraper`.`page_relationships`, `bf_marketing_temp_scraper`.`seo_elements`, `bf_marketing_temp_scraper`.`social_media_links`, `bf_marketing_temp_scraper`.`comments_user_generated_content`, `bf_marketing_temp_scraper`.`contact_information`, `bf_marketing_temp_scraper`.`legal_information`, `bf_marketing_temp_scraper`.`breadcrumbs`, `bf_marketing_temp_scraper`.`date_time`, `bf_marketing_temp_scraper`.`author_information`, `bf_marketing_temp_scraper`.`ratings_reviews`, `bf_marketing_temp_scraper`.`price_information`, `bf_marketing_temp_scraper`.`location_data`, `bf_marketing_temp_scraper`.`language_locale`, `bf_marketing_temp_scraper`.`mobile_responsiveness`, `bf_marketing_temp_scraper`.`security_information`, `bf_marketing_temp_scraper`.`technology_stack`, `bf_marketing_temp_scraper`.`server_information`, `bf_marketing_temp_scraper`.`caching_information`, `bf_marketing_temp_scraper`.`content_type`, `bf_marketing_temp_scraper`.`character_set`, `bf_marketing_temp_scraper`.`rss_atom_feeds`, `bf_marketing_temp_scraper`.`pagination`, `bf_marketing_temp_scraper`.`custom_data`, `bf_marketing_temp_scraper`.`error_handling`, `bf_marketing_temp_scraper`.`historical_changes`, `bf_marketing_temp_scraper`.`user_reviews_ratings`, `bf_marketing_temp_scraper`.`inventory_levels`, `bf_marketing_temp_scraper`.`shipping_information`, `bf_marketing_temp_scraper`.`bots_crawlers_information`, `bf_marketing_temp_scraper`.`affiliate_links`, `bf_marketing_temp_scraper`.`advertisements`, `bf_marketing_temp_scraper`.`cookie_notices`, `bf_marketing_temp_scraper`.`popups_modals`, `bf_marketing_temp_scraper`.`browser_specific_data`, `bf_marketing_temp_scraper`.`geolocation_specific_content`, `bf_marketing_temp_scraper`.`ab_testing_variations`, `bf_marketing_temp_scraper`.`user_agent_specific_content`, `bf_marketing_temp_scraper`.`screen_size_specific_content`, `bf_marketing_temp_scraper`.`device_specific_content`, `bf_marketing_temp_scraper`.`browser_extension_data`, `bf_marketing_temp_scraper`.`custom_scripts_analytics`, `bf_migrations`.`id`, `bf_migrations`.`version`, `bf_migrations`.`class`, `bf_migrations`.`group`, `bf_migrations`.`namespace`, `bf_migrations`.`time`, `bf_migrations`.`batch`, `bf_mymicoin_overview`.`id`, `bf_mymicoin_overview`.`unix_timestamp`, `bf_mymicoin_overview`.`current_date`, `bf_mymicoin_overview`.`month`, `bf_mymicoin_overview`.`day`, `bf_mymicoin_overview`.`year`, `bf_mymicoin_overview`.`time`, `bf_mymicoin_overview`.`status`, `bf_mymicoin_overview`.`beta`, `bf_mymicoin_overview`.`wallet_id`, `bf_mymicoin_overview`.`user_id`, `bf_mymicoin_overview`.`user_email`, `bf_mymicoin_overview`.`reward`, `bf_mymicoin_overview`.`reward_type`, `bf_mymicoin_overview`.`initial_value`, `bf_mymicoin_overview`.`current_value`, `bf_mymicoin_overview`.`available_coins`, `bf_mymicoin_overview`.`new_availability`, `bf_mymicoin_overview`.`minimum_coin_amount`, `bf_mymicoin_overview`.`initial_coin_value`, `bf_mymicoin_overview`.`coin_value`, `bf_mymicoin_overview`.`amount`, `bf_mymicoin_overview`.`total`, `bf_mymicoin_overview`.`total_cost`, `bf_mymicoin_overview`.`gas_fee`, `bf_mymicoin_overview`.`trans_fee`, `bf_mymicoin_overview`.`trans_percent`, `bf_mymigold_overview`.`id`, `bf_mymigold_overview`.`trans_id`, `bf_mymigold_overview`.`unix_timestamp`, `bf_mymigold_overview`.`current_date`, `bf_mymigold_overview`.`status`, `bf_mymigold_overview`.`beta`, `bf_mymigold_overview`.`wallet_id`, `bf_mymigold_overview`.`user_id`, `bf_mymigold_overview`.`user_email`, `bf_mymigold_overview`.`reward`, `bf_mymigold_overview`.`reward_type`, `bf_mymigold_overview`.`initial_value`, `bf_mymigold_overview`.`current_value`, `bf_mymigold_overview`.`available_coins`, `bf_mymigold_overview`.`new_availability`, `bf_mymigold_overview`.`minimum_coin_amount`, `bf_mymigold_overview`.`initial_coin_value`, `bf_mymigold_overview`.`coin_value`, `bf_mymigold_overview`.`amount`, `bf_mymigold_overview`.`total`, `bf_mymigold_overview`.`total_cost`, `bf_mymigold_overview`.`total_fees`, `bf_mymigold_overview`.`gas_fee`, `bf_mymigold_overview`.`trans_fee`, `bf_mymigold_overview`.`trans_percent`, `bf_mymigold_overview`.`user_gas_fee`, `bf_mymigold_overview`.`user_trans_fee`, `bf_mymigold_overview`.`user_trans_percent`, `bf_project_comments`.`id`, `bf_project_comments`.`project_id`, `bf_project_comments`.`user_id`, `bf_project_comments`.`comment`, `bf_project_comments`.`created_at`, `bf_projects`.`id`, `bf_projects`.`name`, `bf_projects`.`description`, `bf_projects`.`target_amount`, `bf_projects`.`current_amount`, `bf_projects`.`status`, `bf_projects`.`created_by`, `bf_projects`.`created_at`, `bf_projects`.`updated_at`, `bf_projects`.`investment_goal`, `bf_projects`.`funds_raised`, `bf_projects`.`investor_count`, `bf_projects`.`minimum_investment`, `bf_projects`.`maximum_investment`, `bf_projects`.`progress_percentage`, `bf_projects`.`average_investment`, `bf_projects`.`top_investor_id`, `bf_projects`.`revenue_generated`, `bf_projects`.`project_stage`, `bf_projects`.`completion_date`, `bf_projects`.`last_investment_date`, `bf_projects`.`remarks`, `bf_projects`.`promotional_links`, `bf_projects_commitments`.`id`, `bf_projects_commitments`.`user_id`, `bf_projects_commitments`.`project_id`, `bf_projects_commitments`.`amount`, `bf_projects_commitments`.`status`, `bf_projects_commitments`.`created_at`, `bf_projects_commitments`.`updated_at`, `bf_projects_distributions`.`id`, `bf_projects_distributions`.`user_id`, `bf_projects_distributions`.`project_id`, `bf_projects_distributions`.`amount`, `bf_projects_distributions`.`status`, `bf_projects_distributions`.`created_at`, `bf_projects_distributions`.`updated_at`, `bf_projects_investments`.`id`, `bf_projects_investments`.`user_id`, `bf_projects_investments`.`project_id`, `bf_projects_investments`.`investment_amount`, `bf_projects_investments`.`shares`, `bf_projects_investments`.`status`, `bf_projects_investments`.`created_at`, `bf_projects_investments`.`updated_at`, `bf_projects_revenue`.`id`, `bf_projects_revenue`.`project_id`, `bf_projects_revenue`.`amount`, `bf_projects_revenue`.`reported_at`, `bf_projects_revenue`.`created_at`, `bf_projects_revenue`.`updated_at`, `bf_retirement_goals`.`id`, `bf_retirement_goals`.`user_id`, `bf_retirement_goals`.`target_age`, `bf_retirement_goals`.`target_value`, `bf_retirement_goals`.`current_savings`, `bf_retirement_goals`.`monthly_contribution`, `bf_retirement_goals`.`expected_annual_return`, `bf_retirement_goals`.`created_at`, `bf_retirement_goals`.`updated_at`, `bf_settings`.`id`, `bf_settings`.`class`, `bf_settings`.`key`, `bf_settings`.`value`, `bf_settings`.`type`, `bf_settings`.`context`, `bf_settings`.`created_at`, `bf_settings`.`updated_at`, `bf_strategy_progress`.`id`, `bf_strategy_progress`.`user_id`, `bf_strategy_progress`.`strategy_id`, `bf_strategy_progress`.`progress_percentage`, `bf_strategy_progress`.`notes`, `bf_strategy_progress`.`updated_on`, `bf_support_requests`.`id`, `bf_support_requests`.`user_id`, `bf_support_requests`.`email`, `bf_support_requests`.`name`, `bf_support_requests`.`details`, `bf_support_requests`.`date`, `bf_support_requests`.`time`, `bf_support_requests`.`res_id`, `bf_support_requests`.`response`, `bf_support_requests`.`status`, `bf_support_requests`.`topic`, `bf_support_requests`.`created_on`, `bf_support_requests`.`modified_on`, `bf_support_requests`.`deleted_on`, `bf_user_tokens`.`id`, `bf_user_tokens`.`user_id`, `bf_user_tokens`.`token_address`, `bf_user_tokens`.`amount`, `bf_user_tokens`.`created_at`, `bf_user_tokens`.`updated_at`, `bf_users`.`id`, `bf_users`.`role_id`, `bf_users`.`active`, `bf_users`.`activate_hash`, `bf_users`.`reset_by`, `bf_users`.`account_type`, `bf_users`.`signup_date`, `bf_users`.`email`, `bf_users`.`password_hash`, `bf_users`.`reset_hash`, `bf_users`.`force_password_reset`, `bf_users`.`referred`, `bf_users`.`referral_code`, `bf_users`.`reactivate`, `bf_users`.`username`, `bf_users`.`display_name`, `bf_users`.`display_name_changed`, `bf_users`.`first_name`, `bf_users`.`middle_name`, `bf_users`.`last_name`, `bf_users`.`name_suffix`, `bf_users`.`dob`, `bf_users`.`ssn`, `bf_users`.`phone`, `bf_users`.`address`, `bf_users`.`city`, `bf_users`.`state`, `bf_users`.`country`, `bf_users`.`zipcode`, `bf_users`.`mailing_address`, `bf_users`.`employment`, `bf_users`.`occupation`, `bf_users`.`salary`, `bf_users`.`proof_identity`, `bf_users`.`proof_address`, `bf_users`.`timezone`, `bf_users`.`language`, `bf_users`.`type`, `bf_users`.`admin`, `bf_users`.`partner`, `bf_users`.`investor`, `bf_users`.`beta_wallet`, `bf_users`.`private_key`, `bf_users`.`wallet_id`, `bf_users`.`default_wallet`, `bf_users`.`tt_columns`, `bf_users`.`organization`, `bf_users`.`picture`, `bf_users`.`link`, `bf_users`.`ref_signup_date`, `bf_users`.`referrer`, `bf_users`.`referrer_code`, `bf_users`.`promo_code`, `bf_users`.`last_login`, `bf_users`.`last_ip`, `bf_users`.`created_on`, `bf_users`.`deleted`, `bf_users`.`banned`, `bf_users`.`ban_message`, `bf_users`.`account_information`, `bf_users`.`kyc`, `bf_users`.`kyc_verified`, `bf_users`.`features_activated`, `bf_users`.`financial_assessment`, `bf_users`.`investment_assessment`, `bf_users`.`banking_accounts`, `bf_users`.`banking_wallets`, `bf_users`.`last_banking_update`, `bf_users`.`banking_integration`, `bf_users`.`credit_summary`, `bf_users`.`credit_wallets`, `bf_users`.`last_credit_update`, `bf_users`.`credit_integration`, `bf_users`.`debt_summary`, `bf_users`.`debt_wallets`, `bf_users`.`last_debt_update`, `bf_users`.`debt_integration`, `bf_users`.`budgeting_complete`, `bf_users`.`investment_wallets`, `bf_users`.`last_investment_update`, `bf_users`.`brokerage_integration`, `bf_users`.`risk_assessment`, `bf_users`.`financial_goals`, `bf_users`.`time_horizon`, `bf_users`.`financial_rating`, `bf_users`.`investment_experience`, `bf_users`.`investment_knowledge`, `bf_users`.`market_sentiment`, `bf_users`.`investment_availability`, `bf_users`.`personal_budgeting`, `bf_users`.`portfolio_manager`, `bf_users`.`automated_integration`, `bf_users`.`asset_creator`, `bf_users`.`account_review`, `bf_users`.`marketing_review`, `bf_users`.`request_ban`, `bf_users_account_ledger`.`id`, `bf_users_account_ledger`.`account_id`, `bf_users_account_ledger`.`user_id`, `bf_users_account_ledger`.`type`, `bf_users_account_ledger`.`previous_balance`, `bf_users_account_ledger`.`new_balance`, `bf_users_account_ledger`.`difference`, `bf_users_account_ledger`.`action`, `bf_users_account_ledger`.`timestamp`, `bf_users_alerts`.`id`, `bf_users_alerts`.`user_id`, `bf_users_alerts`.`alert_type`, `bf_users_alerts`.`alert_message`, `bf_users_alerts`.`status`, `bf_users_alerts`.`created_on`, `bf_users_bank_accounts`.`id`, `bf_users_bank_accounts`.`beta`, `bf_users_bank_accounts`.`active`, `bf_users_bank_accounts`.`status`, `bf_users_bank_accounts`.`deleted`, `bf_users_bank_accounts`.`current_timestamp`, `bf_users_bank_accounts`.`date`, `bf_users_bank_accounts`.`time`, `bf_users_bank_accounts`.`user_id`, `bf_users_bank_accounts`.`user_email`, `bf_users_bank_accounts`.`username`, `bf_users_bank_accounts`.`wallet_id`, `bf_users_bank_accounts`.`fl_loginId`, `bf_users_bank_accounts`.`fl_institution_id`, `bf_users_bank_accounts`.`account_type`, `bf_users_bank_accounts`.`bank_account_owner`, `bf_users_bank_accounts`.`bank_name`, `bf_users_bank_accounts`.`routing_number`, `bf_users_bank_accounts`.`account_number`, `bf_users_bank_accounts`.`verify_account`, `bf_users_bank_accounts`.`ach_enabled`, `bf_users_bank_accounts`.`nickname`, `bf_users_bank_accounts`.`balance`, `bf_users_budgeting`.`id`, `bf_users_budgeting`.`status`, `bf_users_budgeting`.`deleted`, `bf_users_budgeting`.`mode`, `bf_users_budgeting`.`paid`, `bf_users_budgeting`.`paid_date`, `bf_users_budgeting`.`paid_time`, `bf_users_budgeting`.`beta`, `bf_users_budgeting`.`submitted_on`, `bf_users_budgeting`.`unix_timestamp`, `bf_users_budgeting`.`designated_date`, `bf_users_budgeting`.`designated_date_override`, `bf_users_budgeting`.`initial_weeks_left`, `bf_users_budgeting`.`last_date`, `bf_users_budgeting`.`month`, `bf_users_budgeting`.`day`, `bf_users_budgeting`.`year`, `bf_users_budgeting`.`time`, `bf_users_budgeting`.`created_by`, `bf_users_budgeting`.`created_by_email`, `bf_users_budgeting`.`username`, `bf_users_budgeting`.`account_type`, `bf_users_budgeting`.`source_type`, `bf_users_budgeting`.`name`, `bf_users_budgeting`.`net_amount`, `bf_users_budgeting`.`gross_amount`, `bf_users_budgeting`.`monthly_payment`, `bf_users_budgeting`.`account_summary`, `bf_users_budgeting`.`wallet_id`, `bf_users_budgeting`.`is_debt`, `bf_users_budgeting`.`is_cc_payment`, `bf_users_budgeting`.`intervals`, `bf_users_budgeting`.`recurring_account`, `bf_users_budgeting`.`recurring_account_primary`, `bf_users_budgeting`.`recurring_account_id`, `bf_users_budgeting`.`recurring_account_order`, `bf_users_budgeting`.`recurring_schedule`, `bf_users_budgeting`.`link`, `bf_users_budgeting_goals`.`id`, `bf_users_budgeting_goals`.`user_id`, `bf_users_budgeting_goals`.`goal_name`, `bf_users_budgeting_goals`.`target_amount`, `bf_users_budgeting_goals`.`current_savings`, `bf_users_budgeting_goals`.`status`, `bf_users_budgeting_goals`.`target_date`, `bf_users_budgeting_goals`.`created_at`, `bf_users_budgeting_goals`.`updated_at`, `bf_users_budgeting_goals`.`description`, `bf_users_certified_advisors`.`id`, `bf_users_certified_advisors`.`user_id`, `bf_users_certified_advisors`.`name`, `bf_users_certified_advisors`.`specialty`, `bf_users_certified_advisors`.`location`, `bf_users_certified_advisors`.`contact`, `bf_users_certified_advisors`.`bio`, `bf_users_certified_advisors`.`certifications`, `bf_users_certified_advisors`.`experience`, `bf_users_certified_advisors`.`fee_structure`, `bf_users_certified_advisors`.`created_at`, `bf_users_certified_advisors`.`updated_at`, `bf_users_coin_purchases`.`id`, `bf_users_coin_purchases`.`unix_timestamp`, `bf_users_coin_purchases`.`current_date`, `bf_users_coin_purchases`.`month`, `bf_users_coin_purchases`.`day`, `bf_users_coin_purchases`.`year`, `bf_users_coin_purchases`.`time`, `bf_users_coin_purchases`.`status`, `bf_users_coin_purchases`.`beta`, `bf_users_coin_purchases`.`wallet_id`, `bf_users_coin_purchases`.`user_id`, `bf_users_coin_purchases`.`user_email`, `bf_users_coin_purchases`.`reward`, `bf_users_coin_purchases`.`reward_type`, `bf_users_coin_purchases`.`feature`, `bf_users_coin_purchases`.`coin`, `bf_users_coin_purchases`.`initial_value`, `bf_users_coin_purchases`.`current_value`, `bf_users_coin_purchases`.`available_coins`, `bf_users_coin_purchases`.`new_availability`, `bf_users_coin_purchases`.`minimum_coin_amount`, `bf_users_coin_purchases`.`initial_coin_value`, `bf_users_coin_purchases`.`new_coin_value`, `bf_users_coin_purchases`.`amount`, `bf_users_coin_purchases`.`total`, `bf_users_coin_purchases`.`total_cost`, `bf_users_coin_purchases`.`total_fees`, `bf_users_coin_purchases`.`gas_fee`, `bf_users_coin_purchases`.`trans_fee`, `bf_users_coin_purchases`.`trans_percent`, `bf_users_coin_purchases`.`user_gas_fee`, `bf_users_coin_purchases`.`user_trans_fee`, `bf_users_coin_purchases`.`user_trans_percent`, `bf_users_coin_purchases`.`referral_id`, `bf_users_coin_purchases`.`redirect_url`, `bf_users_credit_accounts`.`id`, `bf_users_credit_accounts`.`beta`, `bf_users_credit_accounts`.`status`, `bf_users_credit_accounts`.`deleted`, `bf_users_credit_accounts`.`current_timestamp`, `bf_users_credit_accounts`.`date`, `bf_users_credit_accounts`.`time`, `bf_users_credit_accounts`.`user_id`, `bf_users_credit_accounts`.`user_email`, `bf_users_credit_accounts`.`username`, `bf_users_credit_accounts`.`wallet_id`, `bf_users_credit_accounts`.`fl_loginId`, `bf_users_credit_accounts`.`fl_institution_id`, `bf_users_credit_accounts`.`account_type`, `bf_users_credit_accounts`.`bank_name`, `bf_users_credit_accounts`.`nickname`, `bf_users_credit_accounts`.`account_number`, `bf_users_credit_accounts`.`credit_limit`, `bf_users_credit_accounts`.`current_balance`, `bf_users_credit_accounts`.`available_balance`, `bf_users_credit_accounts`.`credit_status`, `bf_users_credit_accounts`.`due_date`, `bf_users_credit_accounts`.`payment_due`, `bf_users_credit_accounts`.`interest_rate`, `bf_users_crypto_accounts`.`id`, `bf_users_crypto_accounts`.`status`, `bf_users_crypto_accounts`.`deleted`, `bf_users_crypto_accounts`.`current_timestamp`, `bf_users_crypto_accounts`.`beta`, `bf_users_crypto_accounts`.`date`, `bf_users_crypto_accounts`.`time`, `bf_users_crypto_accounts`.`user_id`, `bf_users_crypto_accounts`.`user_email`, `bf_users_crypto_accounts`.`username`, `bf_users_crypto_accounts`.`account_id`, `bf_users_crypto_accounts`.`purchase_type`, `bf_users_crypto_accounts`.`wallet_id`, `bf_users_crypto_accounts`.`nickname`, `bf_users_crypto_accounts`.`account_type`, `bf_users_crypto_accounts`.`access_code`, `bf_users_crypto_accounts`.`refresh_token`, `bf_users_crypto_accounts`.`broker_id`, `bf_users_crypto_accounts`.`broker`, `bf_users_crypto_accounts`.`account_number`, `bf_users_crypto_accounts`.`amount`, `bf_users_crypto_accounts`.`initial_value`, `bf_users_crypto_accounts`.`available_funds`, `bf_users_crypto_accounts`.`net_worth`, `bf_users_debt_accounts`.`id`, `bf_users_debt_accounts`.`beta`, `bf_users_debt_accounts`.`status`, `bf_users_debt_accounts`.`deleted`, `bf_users_debt_accounts`.`current_timestamp`, `bf_users_debt_accounts`.`date`, `bf_users_debt_accounts`.`time`, `bf_users_debt_accounts`.`user_id`, `bf_users_debt_accounts`.`user_email`, `bf_users_debt_accounts`.`username`, `bf_users_debt_accounts`.`wallet_id`, `bf_users_debt_accounts`.`fl_loginId`, `bf_users_debt_accounts`.`fl_institution_id`, `bf_users_debt_accounts`.`account_type`, `bf_users_debt_accounts`.`debtor`, `bf_users_debt_accounts`.`nickname`, `bf_users_debt_accounts`.`account_status`, `bf_users_debt_accounts`.`account_number`, `bf_users_debt_accounts`.`due_date`, `bf_users_debt_accounts`.`credit_limit`, `bf_users_debt_accounts`.`credit_status`, `bf_users_debt_accounts`.`current_balance`, `bf_users_debt_accounts`.`available_balance`, `bf_users_debt_accounts`.`monthly_payment`, `bf_users_debt_accounts`.`interest_rate`, `bf_users_financial_institutions`.`id`, `bf_users_financial_institutions`.`user_id`, `bf_users_financial_institutions`.`name`, `bf_users_financial_institutions`.`specialty`, `bf_users_financial_institutions`.`location`, `bf_users_financial_institutions`.`contact`, `bf_users_financial_institutions`.`bio`, `bf_users_financial_institutions`.`certifications`, `bf_users_financial_institutions`.`experience`, `bf_users_financial_institutions`.`fee_structure`, `bf_users_financial_institutions`.`created_at`, `bf_users_financial_institutions`.`updated_at`, `bf_users_goal_checklist`.`id`, `bf_users_goal_checklist`.`status`, `bf_users_goal_checklist`.`active`, `bf_users_goal_checklist`.`order_id`, `bf_users_goal_checklist`.`category`, `bf_users_goal_checklist`.`goal_type`, `bf_users_goal_checklist`.`goal_description`, `bf_users_goal_checklist`.`goal_completion_status`, `bf_users_goal_checklist`.`gold_reward`, `bf_users_goal_checklist`.`start_date`, `bf_users_goal_checklist`.`end_date`, `bf_users_goal_checklist`.`frequency`, `bf_users_goal_checklist`.`created_at`, `bf_users_goal_checklist`.`updated_at`, `bf_users_goal_checklist`.`difficulty_level`, `bf_users_goal_checklist`.`sequence_order`, `bf_users_goal_checklist`.`max_redemption_times`, `bf_users_goal_completions`.`id`, `bf_users_goal_completions`.`user_id`, `bf_users_goal_completions`.`goal_id`, `bf_users_goal_completions`.`completion_date`, `bf_users_goal_completions`.`reward_transferred`, `bf_users_goal_completions`.`transaction_id`, `bf_users_invest_accounts`.`id`, `bf_users_invest_accounts`.`status`, `bf_users_invest_accounts`.`deleted`, `bf_users_invest_accounts`.`beta`, `bf_users_invest_accounts`.`current_timestamp`, `bf_users_invest_accounts`.`date`, `bf_users_invest_accounts`.`time`, `bf_users_invest_accounts`.`user_id`, `bf_users_invest_accounts`.`user_email`, `bf_users_invest_accounts`.`username`, `bf_users_invest_accounts`.`account_id`, `bf_users_invest_accounts`.`purchase_type`, `bf_users_invest_accounts`.`wallet_id`, `bf_users_invest_accounts`.`nickname`, `bf_users_invest_accounts`.`account_type`, `bf_users_invest_accounts`.`access_code`, `bf_users_invest_accounts`.`refresh_token`, `bf_users_invest_accounts`.`broker_id`, `bf_users_invest_accounts`.`broker`, `bf_users_invest_accounts`.`account_number`, `bf_users_invest_accounts`.`amount`, `bf_users_invest_accounts`.`initial_value`, `bf_users_invest_accounts`.`available_funds`, `bf_users_invest_accounts`.`net_worth`, `bf_users_memberships`.`id`, `bf_users_memberships`.`status`, `bf_users_memberships`.`active`, `bf_users_memberships`.`display`, `bf_users_memberships`.`identifier`, `bf_users_memberships`.`category`, `bf_users_memberships`.`feature_level`, `bf_users_memberships`.`feature_name`, `bf_users_memberships`.`feature_cost`, `bf_users_memberships`.`feature_description`, `bf_users_memberships`.`feature_benefits`, `bf_users_memberships`.`feature_link`, `bf_users_memberships`.`created_at`, `bf_users_memberships`.`updated_at`, `bf_users_notification_subscriptions`.`id`, `bf_users_notification_subscriptions`.`endpoint`, `bf_users_notification_subscriptions`.`public_key`, `bf_users_notification_subscriptions`.`auth_token`, `bf_users_notification_subscriptions`.`created_at`, `bf_users_notification_subscriptions`.`page_url`, `bf_users_notification_subscriptions`.`is_notified`, `bf_users_notification_subscriptions`.`user_id`, `bf_users_notification_subscriptions`.`email`, `bf_users_post_likes`.`id`, `bf_users_post_likes`.`post_id`, `bf_users_post_likes`.`user_id`, `bf_users_post_likes`.`submitted_date`, `bf_users_promotional_messages`.`id`, `bf_users_promotional_messages`.`active`, `bf_users_promotional_messages`.`message`, `bf_users_promotional_messages`.`created_at`, `bf_users_promotional_messages`.`updated_at`, `bf_users_promotional_messages`.`noto_count`, `bf_users_promotional_messages`.`email_noto_count`, `bf_users_promotions`.`id`, `bf_users_promotions`.`active`, `bf_users_promotions`.`message`, `bf_users_promotions`.`created_at`, `bf_users_promotions`.`updated_at`, `bf_users_referral_program`.`id`, `bf_users_referral_program`.`user_id`, `bf_users_referral_program`.`referrer_code`, `bf_users_referral_program`.`active`, `bf_users_referral_program`.`links_created`, `bf_users_referral_program`.`signup_date`, `bf_users_referral_program`.`user_type`, `bf_users_referral_program`.`first_name`, `bf_users_referral_program`.`last_name`, `bf_users_referral_program`.`email`, `bf_users_referral_program`.`phone`, `bf_users_referral_program`.`address`, `bf_users_referral_program`.`city`, `bf_users_referral_program`.`state`, `bf_users_referral_program`.`country`, `bf_users_referral_program`.`zipcode`, `bf_users_referral_program`.`paypal`, `bf_users_referral_program`.`basic_code`, `bf_users_referral_program`.`premium_code`, `bf_users_referral_program`.`gold_code`, `bf_users_referral_program`.`other_payment`, `bf_users_referral_program`.`advertisement`, `bf_users_referrals`.`id`, `bf_users_referrals`.`referrer_code`, `bf_users_referrals`.`signup_date`, `bf_users_referrals`.`user_id`, `bf_users_referrals`.`user_ip_address`, `bf_users_referrals`.`type`, `bf_users_referrals`.`city`, `bf_users_referrals`.`state`, `bf_users_referrals`.`country`, `bf_users_referrals`.`zipcode`, `bf_users_referrals`.`total_spend`, `bf_users_referrals`.`days_active`, `bf_users_referrals`.`active`, `bf_users_referrals`.`referral_email`, `bf_users_retirement`.`id`, `bf_users_retirement`.`user_id`, `bf_users_retirement`.`category`, `bf_users_retirement`.`current_age`, `bf_users_retirement`.`retirement_age`, `bf_users_retirement`.`monthly_savings`, `bf_users_retirement`.`current_savings`, `bf_users_retirement`.`target_value`, `bf_users_retirement`.`annual_return_target`, `bf_users_retirement`.`created_on`, `bf_users_retirement`.`modified_on`, `bf_users_retirement`.`created_by`, `bf_users_retirement`.`modified_by`, `bf_users_retirement_goals`.`id`, `bf_users_retirement_goals`.`user_id`, `bf_users_retirement_goals`.`target_value`, `bf_users_retirement_goals`.`annual_return_target`, `bf_users_retirement_goals`.`created_on`, `bf_users_retirement_plans`.`id`, `bf_users_retirement_plans`.`user_id`, `bf_users_retirement_plans`.`investment_id`, `bf_users_retirement_plans`.`target_amount`, `bf_users_retirement_plans`.`retirement_date`, `bf_users_retirement_plans`.`current_progress`, `bf_users_retirement_plans`.`status`, `bf_users_retirement_plans`.`created_at`, `bf_users_retirement_plans`.`updated_at`, `bf_users_retirement_progress_logs`.`id`, `bf_users_retirement_progress_logs`.`retirement_plan_id`, `bf_users_retirement_progress_logs`.`progress_amount`, `bf_users_retirement_progress_logs`.`log_date`, `bf_users_services`.`id`, `bf_users_services`.`status`, `bf_users_services`.`service`, `bf_users_services`.`description`, `bf_users_services`.`url_link`, `bf_users_services`.`cost`, `bf_users_services`.`price`, `bf_users_services`.`discount`, `bf_users_services`.`net_price`, `bf_users_services`.`call_limit`, `bf_users_services`.`billing_type`, `bf_users_services`.`user_id`, `bf_users_services_purchases`.`id`, `bf_users_services_purchases`.`status`, `bf_users_services_purchases`.`purchase_time`, `bf_users_services_purchases`.`user_id`, `bf_users_services_purchases`.`service_id`, `bf_users_services_purchases`.`service_name`, `bf_users_services_purchases`.`cost`, `bf_users_services_purchases`.`price`, `bf_users_subscribers`.`id`, `bf_users_subscribers`.`email`, `bf_users_subscribers`.`referral`, `bf_users_subscribers`.`category`, `bf_users_subscribers`.`subject`, `bf_users_subscribers`.`topic`, `bf_users_subscribers`.`beta`, `bf_users_subscribers`.`date`, `bf_users_subscribers`.`hostTime`, `bf_users_subscribers`.`time`, `bf_users_subscribers`.`user_id`, `bf_users_subscribers`.`user_ip`, `bf_users_subscribers`.`initial_sent`, `bf_users_trades`.`id`, `bf_users_trades`.`order_id`, `bf_users_trades`.`existing_order_id`, `bf_users_trades`.`active`, `bf_users_trades`.`status`, `bf_users_trades`.`deleted`, `bf_users_trades`.`saved_sorting`, `bf_users_trades`.`submitted_date`, `bf_users_trades`.`created_by`, `bf_users_trades`.`created_on`, `bf_users_trades`.`modified_on`, `bf_users_trades`.`updated_on`, `bf_users_trades`.`modified_by`, `bf_users_trades`.`user_id`, `bf_users_trades`.`user_email`, `bf_users_trades`.`username`, `bf_users_trades`.`trading_account_id`, `bf_users_trades`.`trading_account`, `bf_users_trades`.`trading_account_tag`, `bf_users_trades`.`order_status`, `bf_users_trades`.`category`, `bf_users_trades`.`trade_type`, `bf_users_trades`.`purchase_type`, `bf_users_trades`.`closed`, `bf_users_trades`.`symbol_id`, `bf_users_trades`.`symbol`, `bf_users_trades`.`symbol_tag`, `bf_users_trades`.`key`, `bf_users_trades`.`current_price`, `bf_users_trades`.`entry_price`, `bf_users_trades`.`close_price`, `bf_users_trades`.`net_gains`, `bf_users_trades`.`open_date`, `bf_users_trades`.`open_year`, `bf_users_trades`.`open_month`, `bf_users_trades`.`open_day`, `bf_users_trades`.`open_time`, `bf_users_trades`.`position_type`, `bf_users_trades`.`close_date`, `bf_users_trades`.`closed_year`, `bf_users_trades`.`closed_month`, `bf_users_trades`.`closed_day`, `bf_users_trades`.`close_time`, `bf_users_trades`.`price_target`, `bf_users_trades`.`stop_loss`, `bf_users_trades`.`total_trade_cost`, `bf_users_trades`.`expiration`, `bf_users_trades`.`shares`, `bf_users_trades`.`remaining_position`, `bf_users_trades`.`remaining_shares`, `bf_users_trades`.`number_of_contracts`, `bf_users_trades`.`strike`, `bf_users_trades`.`wallet`, `bf_users_trades`.`details`, `bf_users_trades`.`trade_log_details`, `bf_users_trades`.`premium`, `bf_users_trades`.`variation_perc`, `bf_users_trades`.`variation`, `bf_users_trades`.`closed_perc`, `bf_users_trades`.`closed_ref`, `bf_users_trades`.`closed_list`, `bf_users_trades`.`on_open_fees`, `bf_users_trades`.`on_close_fees`, `bf_users_trades`.`total_fees`, `bf_users_trades`.`json_user_fields`, `bf_users_trades`.`stats_interpolated_fields`, `bf_users_trades`.`testText`, `bf_users_trades`.`fund_type`, `bf_users_trades`.`bond_type`, `bf_users_trades`.`company_name`, `bf_users_trades`.`equity_percentage`, `bf_users_trades`.`startup_name`, `bf_users_trades`.`investment_stage`, `bf_users_trades`.`derivative_type`, `bf_users_trades`.`item_name`, `bf_users_trades`.`item_type`, `bf_users_trades`.`currency_type`, `bf_users_trades`.`amount`, `bf_users_trades`.`bank_name`, `bf_users_trades`.`interest_rate`, `bf_users_trades`.`fund_name`, `bf_users_trades`.`provider_name`, `bf_users_trades`.`annuity_type`, `bf_users_trades`.`account_type`, `bf_users_trades`.`coverage_type`, `bf_users_trades`.`security_type`, `bf_users_trades`.`index_name`, `bf_users_trades`.`pm_unit_of_measurement`, `bf_users_trades`.`pm_storage_costs`, `bf_users_trades`.`ib_country_of_origin`, `bf_users_trades`.`ib_currency`, `bf_users_trades`.`ib_local_exchange`, `bf_users_trades`.`strategy_id`, `bf_users_trades`.`goal_id`, `bf_users_trades_configs`.`id`, `bf_users_trades_configs`.`user_id`, `bf_users_trades_configs`.`config_name`, `bf_users_trades_configs`.`config_value`, `bf_users_trades_configs`.`status`, `bf_users_trades_configs`.`created_on`, `bf_users_trades_configs`.`modified_on`, `bf_users_trades_logs`.`id`, `bf_users_trades_logs`.`trade_id`, `bf_users_trades_logs`.`user_id`, `bf_users_trades_logs`.`action`, `bf_users_trades_logs`.`log_details`, `bf_users_trades_logs`.`created_on`, `bf_users_wallet`.`id`, `bf_users_wallet`.`status`, `bf_users_wallet`.`active`, `bf_users_wallet`.`beta`, `bf_users_wallet`.`created_on`, `bf_users_wallet`.`default_wallet`, `bf_users_wallet`.`exchange_wallet`, `bf_users_wallet`.`premium_wallet`, `bf_users_wallet`.`ach_enabled`, `bf_users_wallet`.`market_pair`, `bf_users_wallet`.`market`, `bf_users_wallet`.`user_id`, `bf_users_wallet`.`user_email`, `bf_users_wallet`.`username`, `bf_users_wallet`.`broker_id`, `bf_users_wallet`.`broker`, `bf_users_wallet`.`broker_account_owner`, `bf_users_wallet`.`public_token`, `bf_users_wallet`.`request_id`, `bf_users_wallet`.`account_id`, `bf_users_wallet`.`item_id`, `bf_users_wallet`.`access_token`, `bf_users_wallet`.`refresh_token`, `bf_users_wallet`.`purchase_type`, `bf_users_wallet`.`wallet_type`, `bf_users_wallet`.`amount`, `bf_users_wallet`.`initial_value`, `bf_users_wallet`.`nickname`, `bf_users_wallet`.`broker_products`, `bf_users_wallet`.`routing_numbers`, `bf_users_wallet`.`broker_logo`, `bf_users_wallet`.`broker_primary_color`, `bf_users_wallet`.`available_products`, `bf_users_wallet`.`billed_products`, `bf_users_wallet`.`consent_expiration_time`, `bf_users_wallet`.`error`, `bf_users_wallet`.`products`, `bf_users_wallet`.`update_type`, `bf_users_wallet`.`webhook`, `bf_users_wallet`.`notifications`, `bf_users_wallet`.`auto_staking`, `bf_users_wallet`.`withdrawal_limit`, `bf_users_wallet`.`transaction_fees`, `bf_users_wallet_transactions`.`id`, `bf_users_wallet_transactions`.`transaction_id`, `bf_users_wallet_transactions`.`status`, `bf_users_wallet_transactions`.`active`, `bf_users_wallet_transactions`.`unix_timestamp`, `bf_users_wallet_transactions`.`submitted_date`, `bf_users_wallet_transactions`.`month`, `bf_users_wallet_transactions`.`day`, `bf_users_wallet_transactions`.`year`, `bf_users_wallet_transactions`.`time`, `bf_users_wallet_transactions`.`trans_type`, `bf_users_wallet_transactions`.`currency`, `bf_users_wallet_transactions`.`wallet_id`, `bf_users_wallet_transactions`.`bank_account`, `bf_users_wallet_transactions`.`broker`, `bf_users_wallet_transactions`.`nickname`, `bf_users_wallet_transactions`.`user_id`, `bf_users_wallet_transactions`.`user_email`, `bf_users_wallet_transactions`.`type`, `bf_users_wallet_transactions`.`deposit_date`, `bf_users_wallet_transactions`.`withdraw_date`, `bf_users_wallet_transactions`.`amount`, `bf_users_wallet_transactions`.`initial_amount`, `bf_users_wallet_transactions`.`current_amount`, `bf_users_wallet_transactions`.`fees`, `bf_users_wallet_transactions`.`total_cost`, `bf_users_wallet_transactions`.`large_transaction_flag`, `bf_users_wallet_transactions`.`reviewed`, `bf_users_wallet_transactions`.`reviewed_by`, `bf_users_wallet_transactions`.`reviewed_at`, `bf_users_wallet_transactions`.`review_notes`, `bf_users_wallet_transactions`.`suspicious_pattern`, `bf_users_wallet_transactions`.`pattern_details`, `bf_users_watchlist`.`id`, `bf_users_watchlist`.`user_id`, `bf_users_watchlist`.`status`, `bf_users_watchlist`.`symbol`, `bf_users_watchlist`.`created_at`, `bf_users_watchlist`.`created_on`, `bf_users_watchlist`.`current_price`, `migrations`.`id`, `migrations`.`version`, `migrations`.`class`, `migrations`.`group`, `migrations`.`namespace`, `migrations`.`time`, `migrations`.`batch`, `quick_links`.`id`, `quick_links`.`title`, `quick_links`.`url`, `quick_links`.`keywords`, `settings`.`id`, `settings`.`class`, `settings`.`key`, `settings`.`value`, `settings`.`type`, `settings`.`context`, `settings`.`created_at`, `settings`.`updated_at`, `users`.`id`, `users`.`role_id`, `users`.`email`, `users`.`username`, `users`.`phone`, `users`.`status`, `users`.`status_message`, `users`.`active`, `users`.`activate_hash`, `users`.`last_active`, `users`.`password`, `users`.`password_hash`, `users`.`reset_at`, `users`.`reset_hash`, `users`.`reset_expires`, `users`.`created_at`, `users`.`updated_at`, `users`.`deleted_at`, `users`.`reset_by`, `users`.`account_type`, `users`.`signup_date`, `users`.`force_password_reset`, `users`.`referred`, `users`.`referral_code`, `users`.`reactivate`, `users`.`display_name`, `users`.`display_name_changed`, `users`.`first_name`, `users`.`middle_name`, `users`.`last_name`, `users`.`name_suffix`, `users`.`dob`, `users`.`ssn`, `users`.`address`, `users`.`city`, `users`.`state`, `users`.`country`, `users`.`zipcode`, `users`.`mailing_address`, `users`.`employment`, `users`.`occupation`, `users`.`salary`, `users`.`proof_identity`, `users`.`proof_address`, `users`.`timezone`, `users`.`language`, `users`.`type`, `users`.`admin`, `users`.`partner`, `users`.`investor`, `users`.`beta_wallet`, `users`.`private_key`, `users`.`wallet_id`, `users`.`default_wallet`, `users`.`tt_columns`, `users`.`organization`, `users`.`picture`, `users`.`link`, `users`.`ref_signup_date`, `users`.`referral`, `users`.`referrer`, `users`.`referral_link`, `users`.`referrer_code`, `users`.`promo_code`, `users`.`last_login`, `users`.`last_ip`, `users`.`created_on`, `users`.`deleted`, `users`.`banned`, `users`.`ban_message`, `users`.`account_information`, `users`.`kyc`, `users`.`kyc_verified`, `users`.`features_activated`, `users`.`financial_assessment`, `users`.`investment_assessment`, `users`.`banking_accounts`, `users`.`banking_wallets`, `users`.`last_banking_update`, `users`.`banking_integration`, `users`.`credit_summary`, `users`.`credit_wallets`, `users`.`last_credit_update`, `users`.`credit_integration`, `users`.`debt_summary`, `users`.`debt_wallets`, `users`.`last_debt_update`, `users`.`debt_integration`, `users`.`budgeting_complete`, `users`.`investment_wallets`, `users`.`last_investment_update`, `users`.`brokerage_integration`, `users`.`risk_assessment`, `users`.`financial_goals`, `users`.`time_horizon`, `users`.`financial_rating`, `users`.`investment_experience`, `users`.`investment_knowledge`, `users`.`market_sentiment`, `users`.`investment_availability`, `users`.`personal_budgeting`, `users`.`portfolio_manager`, `users`.`automated_integration`, `users`.`asset_creator`, `users`.`notification_preference`, `users`.`trade_alerts`, `users`.`account_review`, `users`.`marketing_review`, `users`.`request_ban`, `users`.`force_pass_reset`, `users`.`kyc_verification`, `users`.`kyc_status`, `users`.`kyc_date`, `users`.`kyc_time`, `users`.`kyc_documentation`, `users`.`kyc_rejection_date`, `users`.`kyc_rejection_details`
app/Views/errors/html/error_404.php:25:    $allRoutes[] = ''; // Add homepage `/`
app/Views/errors/html/error_404.php:41:// Boost segment1 and root `/` as high priority links
app/Controllers/UserController.php:112:     * you keep views under `app/Views/themes/public` or `app/Views/public/themes/public`.
app/Views/themes/public/previewAlert.php:130:                <!-- ‚ùå Removed inline `new TradingView.widget(...)` here (we init safely at the bottom) -->
app/Views/themes/public/previewAlert.php:493:                    div.innerHTML = `<strong>User${data.user_id}</strong><p>${data.comment}</p><small class="text-muted">${data.created_at}</small>`;
app/Views/themes/public/previewAlert.php:539:                            fallbackNewsBlock.innerHTML = `<div class="col-12 alert alert-warning">No news available for this symbol.</div>`;
app/Views/themes/public/previewAlert.php:544:                        fallbackNewsBlock.innerHTML = `<div class="col-12 alert alert-danger">News fetch failed.</div>`;
app/Views/themes/dashboard/partials/custom-js/realTimeData.php:66:        document.getElementById('market-price').textContent = `$${data.marketData.price}`;
app/Views/themes/dashboard/partials/custom-js/realTimeData.php:67:        document.getElementById('market-cap').textContent = `${data.marketData.marketCap}`;
app/Views/themes/dashboard/partials/custom-js/realTimeData.php:75:            div.textContent = `${asset.token}: ${asset.balance} (${asset.value})`;
app/Views/themes/dashboard/layouts/custom-js copy.php:296:            modalBody.innerHTML = `<div class="alert alert-danger" role="alert">Error: ${data.message}</div>`;
app/Views/themes/dashboard/layouts/custom-js copy.php:301:        modalBody.innerHTML = `<div class="alert alert-danger" role="alert">Error: ${error.message}</div>`;
app/Views/themes/dashboard/layouts/custom-js copy.php:354:            modalBody.innerHTML = `<div class="alert alert-danger" role="alert">Error: ${data.message}</div>`;
app/Views/themes/dashboard/layouts/custom-js copy.php:359:        modalBody.innerHTML = `<div class="alert alert-danger" role="alert">Error: ${error.message}</div>`;
app/Views/themes/dashboard/layouts/custom-js copy.php:385:    payload[`${entityType.toLowerCase()}_id`] = entityId;
app/Views/themes/dashboard/layouts/custom-js copy.php:430:                alert(`‚úÖ ${entityType} content generated successfully.`);
app/Views/themes/dashboard/layouts/custom-js copy.php:436:            console.error(`‚ùå ${entityType} AJAX error:`, xhr.responseText);
app/Views/themes/dashboard/layouts/custom-js copy.php:437:            alert(`‚ùå Failed to generate ${entityType} content.`);
app/Views/themes/dashboard/layouts/Honeypot.php:32:     * If you enabled CSP, you can remove `<span class="d-none">`.
